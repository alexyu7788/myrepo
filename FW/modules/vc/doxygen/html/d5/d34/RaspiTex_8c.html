<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VideoCore Library: host_applications/linux/apps/raspicam/RaspiTex.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VideoCore Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_195c69405b3ccf68dc267e50a7607549.html">host_applications</a></li><li class="navelem"><a class="el" href="../../dir_ae667c0685e91b0f02394ef15b55cb69.html">linux</a></li><li class="navelem"><a class="el" href="../../dir_828b50a65cb82fa3a052ff0ddf76562c.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_62c16307d7e2e5fb3d32f35d248c8245.html">raspicam</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">RaspiTex.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d0/d5c/RaspiTex_8h_source.html">RaspiTex.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d60/RaspiCLI_8h_source.html">RaspiCLI.h</a>&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../da/de2/egl_8h_source.html">EGL/egl.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d3/dda/eglext_8h_source.html">EGL/eglext.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d2/d61/gl_8h_source.html">GLES/gl.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dc/dd2/glext_8h_source.html">GLES/glext.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d83/RaspiTexUtil_8h_source.html">RaspiTexUtil.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/de3/vcos_8h_source.html">interface/vcos/vcos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/mmal__buffer_8h_source.html">interface/mmal/mmal_buffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d12/mmal__util_8h_source.html">interface/mmal/util/mmal_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/dbd/mmal__util__params_8h_source.html">interface/mmal/util/mmal_util_params.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d6e/tga_8h_source.html">tga.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d1d/mirror_8h_source.html">gl_scenes/mirror.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d47/sobel_8h_source.html">gl_scenes/sobel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d3c/square_8h_source.html">gl_scenes/square.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d4b/teapot_8h_source.html">gl_scenes/teapot.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/df1/vcsm__square_8h_source.html">gl_scenes/vcsm_square.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d20/yuv_8h_source.html">gl_scenes/yuv.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for RaspiTex.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/dfb/RaspiTex_8c__incl.png" border="0" usemap="#host__applications_2linux_2apps_2raspicam_2RaspiTex_8c" alt=""/></div>
<map name="host__applications_2linux_2apps_2raspicam_2RaspiTex_8c" id="host__applications_2linux_2apps_2raspicam_2RaspiTex_8c">
<area shape="rect" id="node2" href="../../d0/d5c/RaspiTex_8h.html" title="RaspiTex.h" alt="" coords="863,177,953,203"/>
<area shape="rect" id="node4" href="../../da/de2/egl_8h.html" title="EGL/egl.h" alt="" coords="1191,259,1271,285"/>
<area shape="rect" id="node6" href="../../d3/dda/eglext_8h.html" title="EGL/eglext.h" alt="" coords="1068,259,1167,285"/>
<area shape="rect" id="node8" href="../../d2/d61/gl_8h.html" title="GLES/gl.h" alt="" coords="231,259,313,285"/>
<area shape="rect" id="node10" href="../../dc/dd2/glext_8h.html" title="GLES/glext.h" alt="" coords="523,259,623,285"/>
<area shape="rect" id="node15" href="../../d4/de3/vcos_8h.html" title="interface/vcos/vcos.h" alt="" coords="1345,632,1492,659"/>
<area shape="rect" id="node34" href="../../de/d47/mmal__buffer_8h.html" title="mmal_buffer.h" alt="" coords="2027,483,2133,509"/>
<area shape="rect" id="node37" href="../../d2/d60/RaspiCLI_8h.html" title="RaspiCLI.h" alt="" coords="1156,95,1244,121"/>
<area shape="rect" id="node40" href="../../d3/d83/RaspiTexUtil_8h.html" title="RaspiTexUtil.h" alt="" coords="1476,95,1585,121"/>
<area shape="rect" id="node41" href="../../d0/d12/mmal__util_8h.html" title="interface/mmal/util\l/mmal_util.h" alt="" coords="1878,169,2007,211"/>
<area shape="rect" id="node42" href="../../d2/dbd/mmal__util__params_8h.html" title="interface/mmal/util\l/mmal_util_params.h" alt="" coords="1711,169,1854,211"/>
<area shape="rect" id="node43" href="../../d1/d6e/tga_8h.html" title="tga.h" alt="" coords="2137,177,2188,203"/>
<area shape="rect" id="node45" href="../../d7/d1d/mirror_8h.html" title="gl_scenes/mirror.h" alt="" coords="537,95,666,121"/>
<area shape="rect" id="node46" href="../../d2/d47/sobel_8h.html" title="gl_scenes/sobel.h" alt="" coords="690,95,817,121"/>
<area shape="rect" id="node47" href="../../d7/d3c/square_8h.html" title="gl_scenes/square.h" alt="" coords="841,95,975,121"/>
<area shape="rect" id="node48" href="../../d1/d4b/teapot_8h.html" title="gl_scenes/teapot.h" alt="" coords="999,95,1131,121"/>
<area shape="rect" id="node49" href="../../d5/df1/vcsm__square_8h.html" title="gl_scenes/vcsm_square.h" alt="" coords="145,95,319,121"/>
<area shape="rect" id="node50" href="../../da/d20/yuv_8h.html" title="gl_scenes/yuv.h" alt="" coords="344,95,461,121"/>
<area shape="rect" id="node7" href="../../d1/d3f/eglext__brcm_8h.html" title="eglext_brcm.h" alt="" coords="956,333,1060,360"/>
<area shape="rect" id="node11" href="../../df/de1/mmal_8h.html" title="interface/mmal/mmal.h" alt="" coords="1712,259,1867,285"/>
<area shape="rect" id="node5" href="../../d4/d35/eglplatform_8h.html" title="eglplatform.h" alt="" coords="1125,333,1222,360"/>
<area shape="rect" id="node9" href="../../d6/d4c/glplatform_8h.html" title="glplatform.h" alt="" coords="227,333,317,360"/>
<area shape="rect" id="node12" href="../../d4/df4/mmal__common_8h.html" title="mmal_common.h" alt="" coords="1691,557,1813,584"/>
<area shape="rect" id="node32" href="../../d6/df3/mmal__types_8h.html" title="mmal_types.h" alt="" coords="1720,483,1824,509"/>
<area shape="rect" id="node33" href="../../df/dcd/mmal__port_8h.html" title="mmal_port.h" alt="" coords="1862,408,1957,435"/>
<area shape="rect" id="node35" href="../../d1/d47/mmal__parameters_8h.html" title="mmal_parameters.h" alt="" coords="1849,483,1986,509"/>
<area shape="rect" id="node36" href="../../d1/d65/mmal__component_8h.html" title="mmal_component.h" alt="" coords="1771,333,1907,360"/>
<area shape="rect" id="node16" href="../../d6/db4/vcos__assert_8h.html" title="interface/vcos/vcos\l_assert.h" alt="" coords="660,707,796,748"/>
<area shape="rect" id="node17" href="../../da/df3/vcos__types_8h.html" title="interface/vcos/vcos\l_types.h" alt="" coords="1111,796,1247,837"/>
<area shape="rect" id="node18" href="../../db/db8/vcos__platform_8h.html" title="vcos_platform.h" alt="" coords="1831,714,1945,741"/>
<area shape="rect" id="node19" href="../../d0/d84/vcos__init_8h.html" title="interface/vcos/vcos\l_init.h" alt="" coords="871,707,1007,748"/>
<area shape="rect" id="node20" href="../../d2/dc2/vcos__semaphore_8h.html" title="interface/vcos/vcos\l_semaphore.h" alt="" coords="1031,707,1167,748"/>
<area shape="rect" id="node21" href="../../de/d30/vcos__thread_8h.html" title="interface/vcos/vcos\l_thread.h" alt="" coords="1191,707,1327,748"/>
<area shape="rect" id="node22" href="../../da/d1b/vcos__mutex_8h.html" title="interface/vcos/vcos\l_mutex.h" alt="" coords="1351,707,1487,748"/>
<area shape="rect" id="node23" href="../../d8/db9/vcos__mem_8h.html" title="interface/vcos/vcos\l_mem.h" alt="" coords="1511,707,1647,748"/>
<area shape="rect" id="node24" href="../../d0/d85/vcos__logging_8h.html" title="interface/vcos/vcos\l_logging.h" alt="" coords="1671,707,1807,748"/>
<area shape="rect" id="node25" href="../../d1/d77/vcos__string_8h.html" title="interface/vcos/vcos\l_string.h" alt="" coords="159,707,295,748"/>
<area shape="rect" id="node26" href="../../dc/dd7/vcos__event_8h.html" title="interface/vcos/vcos\l_event.h" alt="" coords="1969,707,2105,748"/>
<area shape="rect" id="node27" href="../../d1/d6d/vcos__thread__attr_8h.html" title="interface/vcos/vcos\l_thread_attr.h" alt="" coords="2289,707,2425,748"/>
<area shape="rect" id="node28" href="../../dc/d07/vcos__tls_8h.html" title="interface/vcos/vcos\l_tls.h" alt="" coords="2129,707,2265,748"/>
<area shape="rect" id="node29" href="../../d6/da9/vcos__reentrant__mutex_8h.html" title="interface/vcos/vcos\l_reentrant_mutex.h" alt="" coords="2449,707,2585,748"/>
<area shape="rect" id="node30" href="../../d6/d00/vcos__named__semaphore_8h.html" title="interface/vcos/vcos\l_named_semaphore.h" alt="" coords="319,707,470,748"/>
<area shape="rect" id="node31" href="../../dd/dc6/vcos__quickslow__mutex_8h.html" title="interface/vcos/vcos\l_quickslow_mutex.h" alt="" coords="495,707,636,748"/>
</map>
</div>
</div>
<p><a href="../../d5/d34/RaspiTex_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a93493eb8fae5549bd5be67f3449245e0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#a93493eb8fae5549bd5be67f3449245e0">DEFAULT_WIDTH</a>&#160;&#160;&#160;640</td></tr>
<tr class="separator:a93493eb8fae5549bd5be67f3449245e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1879f9e5604a01f0983829846001ab23"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#a1879f9e5604a01f0983829846001ab23">DEFAULT_HEIGHT</a>&#160;&#160;&#160;480</td></tr>
<tr class="separator:a1879f9e5604a01f0983829846001ab23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a0724528cce39d640312f4a7ad1a893f7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7acd1f8f8fee7bcc3e08988d073d977b51">CommandGLScene</a>, 
<a class="el" href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7a4ad5ca7ab8b5d812082a4730b2f5e85c">CommandGLWin</a>
 }</td></tr>
<tr class="separator:a0724528cce39d640312f4a7ad1a893f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aeb5497eb80a286fdf9d6c8568b0e7614"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#aeb5497eb80a286fdf9d6c8568b0e7614">raspitex_parse_cmdline</a> (<a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *state, const char *arg1, const char *arg2)</td></tr>
<tr class="separator:aeb5497eb80a286fdf9d6c8568b0e7614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98b056f0bc7e55f48ea3f95cc62ab767"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#a98b056f0bc7e55f48ea3f95cc62ab767">raspitex_display_help</a> ()</td></tr>
<tr class="separator:a98b056f0bc7e55f48ea3f95cc62ab767"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e5e2ea5be077d75eef95d2accf7ffb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#a15e5e2ea5be077d75eef95d2accf7ffb">raspitex_configure_preview_port</a> (<a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *state, <a class="el" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *preview_port)</td></tr>
<tr class="separator:a15e5e2ea5be077d75eef95d2accf7ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9222212815a7ff70aef22dcc73792639"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#a9222212815a7ff70aef22dcc73792639">raspitex_init</a> (<a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *state)</td></tr>
<tr class="separator:a9222212815a7ff70aef22dcc73792639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79729992f4649430719acdd184ee41c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#a79729992f4649430719acdd184ee41c1">raspitex_destroy</a> (<a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *state)</td></tr>
<tr class="separator:a79729992f4649430719acdd184ee41c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c15ef70a5cb2adfe9a00ba5dae5e48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#ab5c15ef70a5cb2adfe9a00ba5dae5e48">raspitex_set_defaults</a> (<a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *state)</td></tr>
<tr class="separator:ab5c15ef70a5cb2adfe9a00ba5dae5e48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a654b91398d5a12049e23c6022ec647ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#a654b91398d5a12049e23c6022ec647ee">raspitex_stop</a> (<a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *state)</td></tr>
<tr class="separator:a654b91398d5a12049e23c6022ec647ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a011084dc0f75e0ae08b53998360b9961"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#a011084dc0f75e0ae08b53998360b9961">raspitex_start</a> (<a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *state)</td></tr>
<tr class="separator:a011084dc0f75e0ae08b53998360b9961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94b3a0f896e510831da779cdc45b8464"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d34/RaspiTex_8c.html#a94b3a0f896e510831da779cdc45b8464">raspitex_capture</a> (<a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *state, FILE *output_file)</td></tr>
<tr class="separator:a94b3a0f896e510831da779cdc45b8464"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple framework for extending a MMAL application to render buffers via OpenGL.</p>
<p>MMAL buffers are often in YUV colour space and in either a planar or tile format which is not supported directly by V3D. Instead of copying the buffer from the GPU and doing a colour space / pixel format conversion the GL_OES_EGL_image_external is used. This allows an EGL image to be created from GPU buffer handle (MMAL opaque buffer handle). The EGL image may then be used to create a texture (glEGLImageTargetTexture2DOES) and drawn by either OpenGL ES 1.0 or 2.0 contexts.</p>
<p>Notes: 1) GL_OES_EGL_image_external textures always return pixels in RGBA format. This is also the case when used from a fragment shader.</p>
<p>2) The driver implementation creates a new RGB_565 buffer and does the color space conversion from YUV. This happens in GPU memory using the vector processor.</p>
<p>3) Each EGL external image in use will consume GPU memory for the RGB 565 buffer. In addition, the GL pipeline might require more than one EGL image to be retained in GPU memory until the drawing commands are flushed.</p>
<p>Typically 128 MB of GPU memory is sufficient for 720p viewfinder and 720p GL surface. If both the viewfinder and the GL surface are 1080p then 256MB of GPU memory is recommended, otherwise, for non-trivial scenes the system can run out of GPU memory whilst the camera is running.</p>
<p>4) It is important to make sure that the MMAL opaque buffer is not returned to MMAL before the GL driver has completed the asynchronous call to glEGLImageTargetTexture2DOES. Deferring destruction of the EGL image and the buffer return to MMAL until after eglSwapBuffers is the recommended.</p>
<p>See also: <a href="http://www.khronos.org/registry/gles/extensions/OES/OES_EGL_image_external.txt">http://www.khronos.org/registry/gles/extensions/OES/OES_EGL_image_external.txt</a> </p>

<p class="definition">Definition in file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1879f9e5604a01f0983829846001ab23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1879f9e5604a01f0983829846001ab23">&#9670;&nbsp;</a></span>DEFAULT_HEIGHT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_HEIGHT&#160;&#160;&#160;480</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00094">94</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00645">raspitex_set_defaults()</a>.</p>

</div>
</div>
<a id="a93493eb8fae5549bd5be67f3449245e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93493eb8fae5549bd5be67f3449245e0">&#9670;&nbsp;</a></span>DEFAULT_WIDTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_WIDTH&#160;&#160;&#160;640</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00093">93</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00645">raspitex_set_defaults()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a0724528cce39d640312f4a7ad1a893f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0724528cce39d640312f4a7ad1a893f7">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a0724528cce39d640312f4a7ad1a893f7acd1f8f8fee7bcc3e08988d073d977b51"></a>CommandGLScene&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a0724528cce39d640312f4a7ad1a893f7a4ad5ca7ab8b5d812082a4730b2f5e85c"></a>CommandGLWin&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00096">96</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;{</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <a class="code" href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7acd1f8f8fee7bcc3e08988d073d977b51">CommandGLScene</a>,</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <a class="code" href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7a4ad5ca7ab8b5d812082a4730b2f5e85c">CommandGLWin</a></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;};</div><div class="ttc" id="RaspiTex_8c_html_a0724528cce39d640312f4a7ad1a893f7acd1f8f8fee7bcc3e08988d073d977b51"><div class="ttname"><a href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7acd1f8f8fee7bcc3e08988d073d977b51">CommandGLScene</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/RaspiTex_8c_source.html#l00098">RaspiTex.c:98</a></div></div>
<div class="ttc" id="RaspiTex_8c_html_a0724528cce39d640312f4a7ad1a893f7a4ad5ca7ab8b5d812082a4730b2f5e85c"><div class="ttname"><a href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7a4ad5ca7ab8b5d812082a4730b2f5e85c">CommandGLWin</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/RaspiTex_8c_source.html#l00099">RaspiTex.c:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a94b3a0f896e510831da779cdc45b8464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94b3a0f896e510831da779cdc45b8464">&#9670;&nbsp;</a></span>raspitex_capture()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int raspitex_capture </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>output_file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes the next GL frame-buffer to a RAW .ppm formatted file using the specified file-handle. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Pointer to the GL preview state. </td></tr>
    <tr><td class="paramname">outpt_file</td><td>Output file handle for the ppm image. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00714">714</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;{</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="keywordtype">int</span> rc = 0;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *<a class="code" href="../../d3/dda/eglext_8h.html#a769ee876630087de1b07d78b25dcecea">buffer</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../dc/dd2/glext_8h.html#a9f139c614d49f2a707b6037305b0fec0">size</a> = 0;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;%s: state %p file %p&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>,</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                  state, output_file);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <span class="keywordflow">if</span> (state &amp;&amp; output_file)</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="comment">/* Only request one capture at a time */</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#a1478647a6bc7e82569361d72c04dceb0">vcos_semaphore_wait</a>(&amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#aabfdd04da9d576c0b5783d34001361d0">start_sem</a>);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#a712f7c51e0c77a3342fa29566e009363">request</a> = 1;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="comment">/* Wait for capture to start */</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#a1478647a6bc7e82569361d72c04dceb0">vcos_semaphore_wait</a>(&amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#a07d23dc0d5a703ed8819705b80644489">completed_sem</a>);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="comment">/* Take ownership of the captured buffer */</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      buffer = state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#ab9491d378c834dd3745d1da2f01a0fb1">buffer</a>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      size = state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#a140276cd83af17ee8fe765e23acd9fb5">size</a>;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#a712f7c51e0c77a3342fa29566e009363">request</a> = 0;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#ab9491d378c834dd3745d1da2f01a0fb1">buffer</a> = 0;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#a140276cd83af17ee8fe765e23acd9fb5">size</a> = 0;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="comment">/* Allow another capture to be requested */</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#abf6b67a0c6156bcefd842120131e2846">vcos_semaphore_post</a>(&amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#aabfdd04da9d576c0b5783d34001361d0">start_sem</a>);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="keywordflow">if</span> (size == 0 || ! buffer)</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;%s: capture failed&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      rc = -1;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="keywordflow">goto</span> end;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <a class="code" href="../../d6/d18/RaspiTexUtil_8c.html#aa1f3e8d0bb11b2f01ea0a439e4172525">raspitexutil_brga_to_rgba</a>(buffer, size);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   rc = <a class="code" href="../../d2/d57/tga_8c.html#af786e41e82deaa13464915c32e0f7665">write_tga</a>(output_file, state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a12c01f8656c00308bd0877aee649ffc7">width</a>, state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a3cf5f60073358382462f7720957e36da">height</a>, buffer, size);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   fflush(output_file);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;end:</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   free(buffer);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div><div class="ttc" id="structRASPITEX__CAPTURE_html_a07d23dc0d5a703ed8819705b80644489"><div class="ttname"><a href="../../da/d81/structRASPITEX__CAPTURE.html#a07d23dc0d5a703ed8819705b80644489">RASPITEX_CAPTURE::completed_sem</a></div><div class="ttdeci">VCOS_SEMAPHORE_T completed_sem</div><div class="ttdoc">Posted once the capture is complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00108">RaspiTex.h:108</a></div></div>
<div class="ttc" id="vcos__semaphore_8h_html_a1478647a6bc7e82569361d72c04dceb0"><div class="ttname"><a href="../../d2/dc2/vcos__semaphore_8h.html#a1478647a6bc7e82569361d72c04dceb0">vcos_semaphore_wait</a></div><div class="ttdeci">VCOS_INLINE_DECL VCOS_STATUS_T vcos_semaphore_wait(VCOS_SEMAPHORE_T *sem)</div><div class="ttdoc">Wait on a semaphore. </div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structRASPITEX__CAPTURE_html_aabfdd04da9d576c0b5783d34001361d0"><div class="ttname"><a href="../../da/d81/structRASPITEX__CAPTURE.html#aabfdd04da9d576c0b5783d34001361d0">RASPITEX_CAPTURE::start_sem</a></div><div class="ttdeci">VCOS_SEMAPHORE_T start_sem</div><div class="ttdoc">Wait for previous capture to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00105">RaspiTex.h:105</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a3cf5f60073358382462f7720957e36da"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a3cf5f60073358382462f7720957e36da">RASPITEX_STATE::height</a></div><div class="ttdeci">int32_t height</div><div class="ttdoc">width in pixels </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00145">RaspiTex.h:145</a></div></div>
<div class="ttc" id="structRASPITEX__CAPTURE_html_a140276cd83af17ee8fe765e23acd9fb5"><div class="ttname"><a href="../../da/d81/structRASPITEX__CAPTURE.html#a140276cd83af17ee8fe765e23acd9fb5">RASPITEX_CAPTURE::size</a></div><div class="ttdeci">size_t size</div><div class="ttdoc">Size of the captured buffer in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00114">RaspiTex.h:114</a></div></div>
<div class="ttc" id="glext_8h_html_a9f139c614d49f2a707b6037305b0fec0"><div class="ttname"><a href="../../dc/dd2/glext_8h.html#a9f139c614d49f2a707b6037305b0fec0">size</a></div><div class="ttdeci">GLsizei size</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd2/glext_8h_source.html#l01070">glext.h:1070</a></div></div>
<div class="ttc" id="vcos__semaphore_8h_html_abf6b67a0c6156bcefd842120131e2846"><div class="ttname"><a href="../../d2/dc2/vcos__semaphore_8h.html#abf6b67a0c6156bcefd842120131e2846">vcos_semaphore_post</a></div><div class="ttdeci">VCOS_INLINE_DECL VCOS_STATUS_T vcos_semaphore_post(VCOS_SEMAPHORE_T *sem)</div><div class="ttdoc">Post a semaphore. </div></div>
<div class="ttc" id="structRASPITEX__STATE_html_abe415a637b0001d1f939176d33394ee4"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">RASPITEX_STATE::capture</a></div><div class="ttdeci">RASPITEX_CAPTURE capture</div><div class="ttdoc">Log FPS. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00177">RaspiTex.h:177</a></div></div>
<div class="ttc" id="RaspiTexUtil_8c_html_aa1f3e8d0bb11b2f01ea0a439e4172525"><div class="ttname"><a href="../../d6/d18/RaspiTexUtil_8c.html#aa1f3e8d0bb11b2f01ea0a439e4172525">raspitexutil_brga_to_rgba</a></div><div class="ttdeci">void raspitexutil_brga_to_rgba(uint8_t *buffer, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d18/RaspiTexUtil_8c_source.html#l00439">RaspiTexUtil.c:439</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a12c01f8656c00308bd0877aee649ffc7"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a12c01f8656c00308bd0877aee649ffc7">RASPITEX_STATE::width</a></div><div class="ttdeci">int32_t width</div><div class="ttdoc">y-offset in pixels </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00144">RaspiTex.h:144</a></div></div>
<div class="ttc" id="structRASPITEX__CAPTURE_html_ab9491d378c834dd3745d1da2f01a0fb1"><div class="ttname"><a href="../../da/d81/structRASPITEX__CAPTURE.html#ab9491d378c834dd3745d1da2f01a0fb1">RASPITEX_CAPTURE::buffer</a></div><div class="ttdeci">uint8_t * buffer</div><div class="ttdoc">The RGB capture buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00111">RaspiTex.h:111</a></div></div>
<div class="ttc" id="containers__types_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00069">containers_types.h:69</a></div></div>
<div class="ttc" id="structRASPITEX__CAPTURE_html_a712f7c51e0c77a3342fa29566e009363"><div class="ttname"><a href="../../da/d81/structRASPITEX__CAPTURE.html#a712f7c51e0c77a3342fa29566e009363">RASPITEX_CAPTURE::request</a></div><div class="ttdeci">int request</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00118">RaspiTex.h:118</a></div></div>
<div class="ttc" id="tga_8c_html_af786e41e82deaa13464915c32e0f7665"><div class="ttname"><a href="../../d2/d57/tga_8c.html#af786e41e82deaa13464915c32e0f7665">write_tga</a></div><div class="ttdeci">int write_tga(FILE *fp, int width, int height, uint8_t *buffer, size_t buffer_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d57/tga_8c_source.html#l00034">tga.c:34</a></div></div>
<div class="ttc" id="eglext_8h_html_a769ee876630087de1b07d78b25dcecea"><div class="ttname"><a href="../../d3/dda/eglext_8h.html#a769ee876630087de1b07d78b25dcecea">buffer</a></div><div class="ttdeci">EGLContext EGLenum EGLClientBuffer buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/eglext_8h_source.html#l00092">eglext.h:92</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a15e5e2ea5be077d75eef95d2accf7ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e5e2ea5be077d75eef95d2accf7ffb">&#9670;&nbsp;</a></span>raspitex_configure_preview_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int raspitex_configure_preview_port </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *&#160;</td>
          <td class="paramname"><em>preview_port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00483">483</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <a class="code" href="../../df/d8f/group__MmalTypes.html#ga5ac87230bd615d2b154a9d5899bc37fd">MMAL_STATUS_T</a> <a class="code" href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a>;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;%s port %p&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, preview_port);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <span class="comment">/* Enable ZERO_COPY mode on the preview port which instructs MMAL to only</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">    * pass the 4-byte opaque buffer handle instead of the contents of the opaque</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">    * buffer.</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">    * The opaque handle is resolved on VideoCore by the GL driver when the EGL</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">    * image is created.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   status = <a class="code" href="../../db/d48/mmal__util__params_8c.html#aba9fe4904a386eaa681c7bdbbcf93023">mmal_port_parameter_set_boolean</a>(preview_port,</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <a class="code" href="../../df/d90/group__MMAL__PARAMETER__IDS.html#gga319d524aadad53dcd886c2bba304ded4a3f474fab18813d85593a01f52774ba00">MMAL_PARAMETER_ZERO_COPY</a>, <a class="code" href="../../d4/df4/mmal__common_8h.html#aa120400c032442cda78d19700286ce62">MMAL_TRUE</a>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;Failed to enable zero copy on camera preview port&quot;</span>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">goto</span> end;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   status = <a class="code" href="../../d0/d5f/group__MmalPort.html#gae118f5d30974f414fd2ead7891ad9ee9">mmal_port_format_commit</a>(preview_port);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;camera viewfinder format couldn&#39;t be set&quot;</span>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">goto</span> end;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <span class="comment">/* For GL a pool of opaque buffer handles must be allocated in the client.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">    * These buffers are used to create the EGL images.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abcb6622bf187cd2fd39fd033a1c9e2c7">preview_port</a> = preview_port;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   preview_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#afedb224ac236134e0802c630ca7edadd">buffer_num</a> = preview_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#abdd8fd5e4051411ae18f31c063eca741">buffer_num_recommended</a>;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   preview_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#ac4a6ecc45ef42a4609e5a3a5a706eade">buffer_size</a> = preview_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#a448fa7a76b24384ac49227bafbd11dac">buffer_size_recommended</a>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;Creating buffer pool for GL renderer num %d size %d&quot;</span>,</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                  preview_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#afedb224ac236134e0802c630ca7edadd">buffer_num</a>, preview_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#ac4a6ecc45ef42a4609e5a3a5a706eade">buffer_size</a>);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   <span class="comment">/* Pool + queue to hold preview frames */</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a2927af1474206185a229fe78c364974f">preview_pool</a> = <a class="code" href="../../d3/d14/group__MmalUtilities.html#ga7228191288b87cfcd45d275bed55fa38">mmal_port_pool_create</a>(preview_port,</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                         preview_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#afedb224ac236134e0802c630ca7edadd">buffer_num</a>, preview_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#ac4a6ecc45ef42a4609e5a3a5a706eade">buffer_size</a>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   <span class="keywordflow">if</span> (! state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a2927af1474206185a229fe78c364974f">preview_pool</a>)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;Error allocating pool&quot;</span>);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      status = <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda0087a54d8266a48649fbe0643aa6ab7e">MMAL_ENOMEM</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">goto</span> end;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="comment">/* Place filled buffers from the preview port in a queue to render */</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ac87bea722dc547a8be1ee1dc61e684c7">preview_queue</a> = <a class="code" href="../../d8/d82/group__MmalQueue.html#gacafb60bc36fdb1de9b802335cb1488bc">mmal_queue_create</a>();</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <span class="keywordflow">if</span> (! state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ac87bea722dc547a8be1ee1dc61e684c7">preview_queue</a>)</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;Error allocating queue&quot;</span>);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      status = <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda0087a54d8266a48649fbe0643aa6ab7e">MMAL_ENOMEM</a>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keywordflow">goto</span> end;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="comment">/* Enable preview port callback */</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   preview_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#ac48ce60dae764525880438aabb058faa">userdata</a> = (<span class="keyword">struct </span>MMAL_PORT_USERDATA_T*) state;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   status = <a class="code" href="../../d0/d5f/group__MmalPort.html#gaa723c325260a53f553c6ab7ee8038b70">mmal_port_enable</a>(preview_port, preview_output_cb);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;Failed to camera preview port&quot;</span>);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">goto</span> end;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;end:</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keywordflow">return</span> (status == <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a> ? 0 : -1);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;}</div><div class="ttc" id="group__MmalUtilities_html_ga7228191288b87cfcd45d275bed55fa38"><div class="ttname"><a href="../../d3/d14/group__MmalUtilities.html#ga7228191288b87cfcd45d275bed55fa38">mmal_port_pool_create</a></div><div class="ttdeci">MMAL_POOL_T * mmal_port_pool_create(MMAL_PORT_T *port, unsigned int headers, uint32_t payload_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddd/mmal__util_8c_source.html#l00280">mmal_util.c:280</a></div></div>
<div class="ttc" id="mmal__util_8c_html_affbc5e7be0de233c0edafa72d894118c"><div class="ttname"><a href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a></div><div class="ttdeci">MMAL_STATUS_T status</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddd/mmal__util_8c_source.html#l00037">mmal_util.c:37</a></div></div>
<div class="ttc" id="structMMAL__PORT__T_html_ac4a6ecc45ef42a4609e5a3a5a706eade"><div class="ttname"><a href="../../df/d68/structMMAL__PORT__T.html#ac4a6ecc45ef42a4609e5a3a5a706eade">MMAL_PORT_T::buffer_size</a></div><div class="ttdeci">uint32_t buffer_size</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcd/mmal__port_8h_source.html#l00106">mmal_port.h:106</a></div></div>
<div class="ttc" id="group__MmalPort_html_gaa723c325260a53f553c6ab7ee8038b70"><div class="ttname"><a href="../../d0/d5f/group__MmalPort.html#gaa723c325260a53f553c6ab7ee8038b70">mmal_port_enable</a></div><div class="ttdeci">MMAL_STATUS_T mmal_port_enable(MMAL_PORT_T *port, MMAL_PORT_BH_CB_T cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4d/mmal__port_8c_source.html#l00351">mmal_port.c:351</a></div></div>
<div class="ttc" id="group__MmalPort_html_gae118f5d30974f414fd2ead7891ad9ee9"><div class="ttname"><a href="../../d0/d5f/group__MmalPort.html#gae118f5d30974f414fd2ead7891ad9ee9">mmal_port_format_commit</a></div><div class="ttdeci">MMAL_STATUS_T mmal_port_format_commit(MMAL_PORT_T *port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4d/mmal__port_8c_source.html#l00288">mmal_port.c:288</a></div></div>
<div class="ttc" id="group__MmalTypes_html_gga5ac87230bd615d2b154a9d5899bc37fda0087a54d8266a48649fbe0643aa6ab7e"><div class="ttname"><a href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda0087a54d8266a48649fbe0643aa6ab7e">MMAL_ENOMEM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df3/mmal__types_8h_source.html#l00049">mmal_types.h:49</a></div></div>
<div class="ttc" id="group__MMAL__PARAMETER__IDS_html_gga319d524aadad53dcd886c2bba304ded4a3f474fab18813d85593a01f52774ba00"><div class="ttname"><a href="../../df/d90/group__MMAL__PARAMETER__IDS.html#gga319d524aadad53dcd886c2bba304ded4a3f474fab18813d85593a01f52774ba00">MMAL_PARAMETER_ZERO_COPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d6f/mmal__parameters__common_8h_source.html#l00066">mmal_parameters_common.h:66</a></div></div>
<div class="ttc" id="mmal__common_8h_html_aa120400c032442cda78d19700286ce62"><div class="ttname"><a href="../../d4/df4/mmal__common_8h.html#aa120400c032442cda78d19700286ce62">MMAL_TRUE</a></div><div class="ttdeci">#define MMAL_TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df4/mmal__common_8h_source.html#l00062">mmal_common.h:62</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_ac87bea722dc547a8be1ee1dc61e684c7"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#ac87bea722dc547a8be1ee1dc61e684c7">RASPITEX_STATE::preview_queue</a></div><div class="ttdeci">MMAL_QUEUE_T * preview_queue</div><div class="ttdoc">Pool for storing opaque buffer handles. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00131">RaspiTex.h:131</a></div></div>
<div class="ttc" id="structMMAL__PORT__T_html_a448fa7a76b24384ac49227bafbd11dac"><div class="ttname"><a href="../../df/d68/structMMAL__PORT__T.html#a448fa7a76b24384ac49227bafbd11dac">MMAL_PORT_T::buffer_size_recommended</a></div><div class="ttdeci">uint32_t buffer_size_recommended</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcd/mmal__port_8h_source.html#l00101">mmal_port.h:101</a></div></div>
<div class="ttc" id="structMMAL__PORT__T_html_ac48ce60dae764525880438aabb058faa"><div class="ttname"><a href="../../df/d68/structMMAL__PORT__T.html#ac48ce60dae764525880438aabb058faa">MMAL_PORT_T::userdata</a></div><div class="ttdeci">struct MMAL_PORT_USERDATA_T * userdata</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcd/mmal__port_8h_source.html#l00110">mmal_port.h:110</a></div></div>
<div class="ttc" id="group__MmalTypes_html_ga5ac87230bd615d2b154a9d5899bc37fd"><div class="ttname"><a href="../../df/d8f/group__MmalTypes.html#ga5ac87230bd615d2b154a9d5899bc37fd">MMAL_STATUS_T</a></div><div class="ttdeci">MMAL_STATUS_T</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df3/mmal__types_8h_source.html#l00046">mmal_types.h:46</a></div></div>
<div class="ttc" id="structMMAL__PORT__T_html_abdd8fd5e4051411ae18f31c063eca741"><div class="ttname"><a href="../../df/d68/structMMAL__PORT__T.html#abdd8fd5e4051411ae18f31c063eca741">MMAL_PORT_T::buffer_num_recommended</a></div><div class="ttdeci">uint32_t buffer_num_recommended</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcd/mmal__port_8h_source.html#l00098">mmal_port.h:98</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a2927af1474206185a229fe78c364974f"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a2927af1474206185a229fe78c364974f">RASPITEX_STATE::preview_pool</a></div><div class="ttdeci">MMAL_POOL_T * preview_pool</div><div class="ttdoc">Source port for preview opaque buffers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00130">RaspiTex.h:130</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_abcb6622bf187cd2fd39fd033a1c9e2c7"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#abcb6622bf187cd2fd39fd033a1c9e2c7">RASPITEX_STATE::preview_port</a></div><div class="ttdeci">MMAL_PORT_T * preview_port</div><div class="ttdoc">Incremented for new features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00129">RaspiTex.h:129</a></div></div>
<div class="ttc" id="group__MmalTypes_html_gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01"><div class="ttname"><a href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df3/mmal__types_8h_source.html#l00048">mmal_types.h:48</a></div></div>
<div class="ttc" id="structMMAL__PORT__T_html_afedb224ac236134e0802c630ca7edadd"><div class="ttname"><a href="../../df/d68/structMMAL__PORT__T.html#afedb224ac236134e0802c630ca7edadd">MMAL_PORT_T::buffer_num</a></div><div class="ttdeci">uint32_t buffer_num</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcd/mmal__port_8h_source.html#l00104">mmal_port.h:104</a></div></div>
<div class="ttc" id="group__MmalQueue_html_gacafb60bc36fdb1de9b802335cb1488bc"><div class="ttname"><a href="../../d8/d82/group__MmalQueue.html#gacafb60bc36fdb1de9b802335cb1488bc">mmal_queue_create</a></div><div class="ttdeci">MMAL_QUEUE_T * mmal_queue_create(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd6/mmal__queue_8c_source.html#l00059">mmal_queue.c:59</a></div></div>
<div class="ttc" id="mmal__util__params_8c_html_aba9fe4904a386eaa681c7bdbbcf93023"><div class="ttname"><a href="../../db/d48/mmal__util__params_8c.html#aba9fe4904a386eaa681c7bdbbcf93023">mmal_port_parameter_set_boolean</a></div><div class="ttdeci">MMAL_STATUS_T mmal_port_parameter_set_boolean(MMAL_PORT_T *port, uint32_t id, MMAL_BOOL_T value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d48/mmal__util__params_8c_source.html#l00031">mmal_util_params.c:31</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a79729992f4649430719acdd184ee41c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79729992f4649430719acdd184ee41c1">&#9670;&nbsp;</a></span>raspitex_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> raspitex_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00614">614</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;{</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keywordflow">if</span> (state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a2927af1474206185a229fe78c364974f">preview_pool</a>)</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <a class="code" href="../../d8/d6d/group__MmalPool.html#ga392efa95efde822ddec1187aa7332a3d">mmal_pool_destroy</a>(state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a2927af1474206185a229fe78c364974f">preview_pool</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a2927af1474206185a229fe78c364974f">preview_pool</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="keywordflow">if</span> (state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ac87bea722dc547a8be1ee1dc61e684c7">preview_queue</a>)</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <a class="code" href="../../d8/d82/group__MmalQueue.html#ga4caac58e82878025213b922cc6815863">mmal_queue_destroy</a>(state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ac87bea722dc547a8be1ee1dc61e684c7">preview_queue</a>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ac87bea722dc547a8be1ee1dc61e684c7">preview_queue</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="keywordflow">if</span> (state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a9575206a8c389b78417f5451d25e095a">destroy_native_window</a>)</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a9575206a8c389b78417f5451d25e095a">destroy_native_window</a>(state);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="keywordflow">if</span> (state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a3d38ac3ee675f533bf21673bc2adae3f">close</a>)</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a3d38ac3ee675f533bf21673bc2adae3f">close</a>(state);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#a4dd7165fc2dd9873731b11ec07202c91">vcos_semaphore_delete</a>(&amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#aabfdd04da9d576c0b5783d34001361d0">start_sem</a>);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#a4dd7165fc2dd9873731b11ec07202c91">vcos_semaphore_delete</a>(&amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#a07d23dc0d5a703ed8819705b80644489">completed_sem</a>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div><div class="ttc" id="structRASPITEX__CAPTURE_html_a07d23dc0d5a703ed8819705b80644489"><div class="ttname"><a href="../../da/d81/structRASPITEX__CAPTURE.html#a07d23dc0d5a703ed8819705b80644489">RASPITEX_CAPTURE::completed_sem</a></div><div class="ttdeci">VCOS_SEMAPHORE_T completed_sem</div><div class="ttdoc">Posted once the capture is complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00108">RaspiTex.h:108</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structRASPITEX__CAPTURE_html_aabfdd04da9d576c0b5783d34001361d0"><div class="ttname"><a href="../../da/d81/structRASPITEX__CAPTURE.html#aabfdd04da9d576c0b5783d34001361d0">RASPITEX_CAPTURE::start_sem</a></div><div class="ttdeci">VCOS_SEMAPHORE_T start_sem</div><div class="ttdoc">Wait for previous capture to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00105">RaspiTex.h:105</a></div></div>
<div class="ttc" id="group__MmalQueue_html_ga4caac58e82878025213b922cc6815863"><div class="ttname"><a href="../../d8/d82/group__MmalQueue.html#ga4caac58e82878025213b922cc6815863">mmal_queue_destroy</a></div><div class="ttdeci">void mmal_queue_destroy(MMAL_QUEUE_T *queue)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd6/mmal__queue_8c_source.html#l00192">mmal_queue.c:192</a></div></div>
<div class="ttc" id="vcos__semaphore_8h_html_a4dd7165fc2dd9873731b11ec07202c91"><div class="ttname"><a href="../../d2/dc2/vcos__semaphore_8h.html#a4dd7165fc2dd9873731b11ec07202c91">vcos_semaphore_delete</a></div><div class="ttdeci">VCOS_INLINE_DECL void vcos_semaphore_delete(VCOS_SEMAPHORE_T *sem)</div><div class="ttdoc">Delete a semaphore, releasing any resources consumed by it. </div></div>
<div class="ttc" id="structRASPITEX__STATE_html_acbbff29ab18bb86533d32838d4755850"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">RASPITEX_STATE::ops</a></div><div class="ttdeci">RASPITEX_SCENE_OPS ops</div><div class="ttdoc">Id of the scene to load. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00173">RaspiTex.h:173</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_a3d38ac3ee675f533bf21673bc2adae3f"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a3d38ac3ee675f533bf21673bc2adae3f">RASPITEX_SCENE_OPS::close</a></div><div class="ttdeci">void(* close)(struct RASPITEX_STATE *state)</div><div class="ttdoc">Called when the scene is unloaded. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00099">RaspiTex.h:99</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_abe415a637b0001d1f939176d33394ee4"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">RASPITEX_STATE::capture</a></div><div class="ttdeci">RASPITEX_CAPTURE capture</div><div class="ttdoc">Log FPS. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00177">RaspiTex.h:177</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_ac87bea722dc547a8be1ee1dc61e684c7"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#ac87bea722dc547a8be1ee1dc61e684c7">RASPITEX_STATE::preview_queue</a></div><div class="ttdeci">MMAL_QUEUE_T * preview_queue</div><div class="ttdoc">Pool for storing opaque buffer handles. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00131">RaspiTex.h:131</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_a9575206a8c389b78417f5451d25e095a"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a9575206a8c389b78417f5451d25e095a">RASPITEX_SCENE_OPS::destroy_native_window</a></div><div class="ttdeci">void(* destroy_native_window)(struct RASPITEX_STATE *state)</div><div class="ttdoc">Destroys the native window. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00096">RaspiTex.h:96</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a2927af1474206185a229fe78c364974f"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a2927af1474206185a229fe78c364974f">RASPITEX_STATE::preview_pool</a></div><div class="ttdeci">MMAL_POOL_T * preview_pool</div><div class="ttdoc">Source port for preview opaque buffers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00130">RaspiTex.h:130</a></div></div>
<div class="ttc" id="group__MmalPool_html_ga392efa95efde822ddec1187aa7332a3d"><div class="ttname"><a href="../../d8/d6d/group__MmalPool.html#ga392efa95efde822ddec1187aa7332a3d">mmal_pool_destroy</a></div><div class="ttdeci">void mmal_pool_destroy(MMAL_POOL_T *pool)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d09/mmal__pool_8c_source.html#l00195">mmal_pool.c:195</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a98b056f0bc7e55f48ea3f95cc62ab767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98b056f0bc7e55f48ea3f95cc62ab767">&#9670;&nbsp;</a></span>raspitex_display_help()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> raspitex_display_help </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Display help for command line options </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00181">181</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   fprintf(stdout, <span class="stringliteral">&quot;\nGL parameter commands\n\n&quot;</span>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <a class="code" href="../../dc/d63/RaspiCLI_8c.html#a31311751947144c959ed352431f574ea">raspicli_display_help</a>(cmdline_commands, cmdline_commands_size);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div><div class="ttc" id="RaspiCLI_8c_html_a31311751947144c959ed352431f574ea"><div class="ttname"><a href="../../dc/d63/RaspiCLI_8c.html#a31311751947144c959ed352431f574ea">raspicli_display_help</a></div><div class="ttdeci">void raspicli_display_help(const COMMAND_LIST *commands, const int num_commands)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d63/RaspiCLI_8c_source.html#l00098">RaspiCLI.c:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9222212815a7ff70aef22dcc73792639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9222212815a7ff70aef22dcc73792639">&#9670;&nbsp;</a></span>raspitex_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int raspitex_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00556">556</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;{</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8">VCOS_STATUS_T</a> <a class="code" href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <a class="code" href="../../df/d96/vcos__init_8c.html#a8b1f92590d7f2c734e280c106b57ca48">vcos_init</a>();</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <a class="code" href="../../d1/d3a/vcos__logcat_8c.html#a3b1a5dfa854033cd021dac6db2934b9c">vcos_log_register</a>(<span class="stringliteral">&quot;RaspiTex&quot;</span>, <a class="code" href="../../d0/d5e/applog_8h.html#a0c35674425ccbeb9a3b5d5f96e619fb4">VCOS_LOG_CATEGORY</a>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <a class="code" href="../../d0/d85/vcos__logging_8h.html#ad591aefcc7a481c6e5f59204f69fc408">vcos_log_set_level</a>(<a class="code" href="../../d0/d5e/applog_8h.html#a0c35674425ccbeb9a3b5d5f96e619fb4">VCOS_LOG_CATEGORY</a>,</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a575ddefef030e7478160b81a9f24216a">verbose</a> ? <a class="code" href="../../d0/d85/vcos__logging_8h.html#a22e4514715949e2bb80d29fc85153b2dae40b56c97360bb863ddb24977c452766">VCOS_LOG_INFO</a> : <a class="code" href="../../d0/d85/vcos__logging_8h.html#a22e4514715949e2bb80d29fc85153b2da852e9dace3ca9c78f14aba9e819c82cd">VCOS_LOG_WARN</a>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   status = <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#aec46d55c9e9b7f8a4beab46601744b56">vcos_semaphore_create</a>(&amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#aabfdd04da9d576c0b5783d34001361d0">start_sem</a>,</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                                  <span class="stringliteral">&quot;glcap_start_sem&quot;</span>, 1);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keywordflow">if</span> (status != <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a>)</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   status = <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#aec46d55c9e9b7f8a4beab46601744b56">vcos_semaphore_create</a>(&amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">capture</a>.<a class="code" href="../../da/d81/structRASPITEX__CAPTURE.html#a07d23dc0d5a703ed8819705b80644489">completed_sem</a>,</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                                  <span class="stringliteral">&quot;glcap_completed_sem&quot;</span>, 0);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordflow">if</span> (status != <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a>)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keywordflow">switch</span> (state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">scene_id</a>)</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca1180d7894cc3b917bc189d363006b8c2">RASPITEX_SCENE_SQUARE</a>:</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      rc = <a class="code" href="../../d1/dea/square_8c.html#a7100f3ed0d29266e5d18a5c9840c2841">square_open</a>(state);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9cac288d8dc3c1d178f26b85db7bee80b4b">RASPITEX_SCENE_MIRROR</a>:</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      rc = <a class="code" href="../../d8/d88/mirror_8c.html#a062d02cd36672eeb1c81781def2680ee">mirror_open</a>(state);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca63f2c9aa885dea2216048e72c52573b0">RASPITEX_SCENE_TEAPOT</a>:</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      rc = <a class="code" href="../../db/d0b/teapot_8c.html#a6d87d15b481d6a1be0ddb7178ab88608">teapot_open</a>(state);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca35cbe3aa0e83d1d06fe120871e4f3108">RASPITEX_SCENE_YUV</a>:</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      rc = <a class="code" href="../../df/dab/yuv_8c.html#a63b40c3f7ec7642d4ba3849e1744a666">yuv_open</a>(state);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca7ce4a746f93c3e2c1f76a2a6d12cc37b">RASPITEX_SCENE_SOBEL</a>:</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      rc = <a class="code" href="../../d8/d08/sobel_8c.html#af6591533bc973902af15ad02492c0fd4">sobel_open</a>(state);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9cabb6decb3e0990842de540fae50ff3c07">RASPITEX_SCENE_VCSM_SQUARE</a>:</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      rc = <a class="code" href="../../d8/d6d/vcsm__square_8c.html#ad9f2bec1fbc2e3db99cab6c8e9787e15">vcsm_square_open</a>(state);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      rc = -1;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keywordflow">if</span> (rc != 0)</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>:</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   vcos_log_error(<span class="stringliteral">&quot;%s: failed&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div><div class="ttc" id="structRASPITEX__CAPTURE_html_a07d23dc0d5a703ed8819705b80644489"><div class="ttname"><a href="../../da/d81/structRASPITEX__CAPTURE.html#a07d23dc0d5a703ed8819705b80644489">RASPITEX_CAPTURE::completed_sem</a></div><div class="ttdeci">VCOS_SEMAPHORE_T completed_sem</div><div class="ttdoc">Posted once the capture is complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00108">RaspiTex.h:108</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a575ddefef030e7478160b81a9f24216a"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a575ddefef030e7478160b81a9f24216a">RASPITEX_STATE::verbose</a></div><div class="ttdeci">int verbose</div><div class="ttdoc">Pointer to scene specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00175">RaspiTex.h:175</a></div></div>
<div class="ttc" id="mmal__util_8c_html_affbc5e7be0de233c0edafa72d894118c"><div class="ttname"><a href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a></div><div class="ttdeci">MMAL_STATUS_T status</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddd/mmal__util_8c_source.html#l00037">mmal_util.c:37</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9ca35cbe3aa0e83d1d06fe120871e4f3108"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca35cbe3aa0e83d1d06fe120871e4f3108">RASPITEX_SCENE_YUV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00048">RaspiTex.h:48</a></div></div>
<div class="ttc" id="sobel_8c_html_af6591533bc973902af15ad02492c0fd4"><div class="ttname"><a href="../../d8/d08/sobel_8c.html#af6591533bc973902af15ad02492c0fd4">sobel_open</a></div><div class="ttdeci">int sobel_open(RASPITEX_STATE *state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d08/sobel_8c_source.html#l00186">sobel.c:186</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_ad8d4dbf7ba8ae84b4a2d35b787bdbc3f"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">RASPITEX_STATE::scene_id</a></div><div class="ttdeci">RASPITEX_SCENE_T scene_id</div><div class="ttdoc">MMAL buffer currently bound to texture(s) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00172">RaspiTex.h:172</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9cac288d8dc3c1d178f26b85db7bee80b4b"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9cac288d8dc3c1d178f26b85db7bee80b4b">RASPITEX_SCENE_MIRROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00046">RaspiTex.h:46</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9cabb6decb3e0990842de540fae50ff3c07"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9cabb6decb3e0990842de540fae50ff3c07">RASPITEX_SCENE_VCSM_SQUARE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00050">RaspiTex.h:50</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8">VCOS_STATUS_T</a></div><div class="ttdeci">VCOS_STATUS_T</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00073">vcos_types.h:73</a></div></div>
<div class="ttc" id="structRASPITEX__CAPTURE_html_aabfdd04da9d576c0b5783d34001361d0"><div class="ttname"><a href="../../da/d81/structRASPITEX__CAPTURE.html#aabfdd04da9d576c0b5783d34001361d0">RASPITEX_CAPTURE::start_sem</a></div><div class="ttdeci">VCOS_SEMAPHORE_T start_sem</div><div class="ttdoc">Wait for previous capture to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00105">RaspiTex.h:105</a></div></div>
<div class="ttc" id="applog_8h_html_a0c35674425ccbeb9a3b5d5f96e619fb4"><div class="ttname"><a href="../../d0/d5e/applog_8h.html#a0c35674425ccbeb9a3b5d5f96e619fb4">VCOS_LOG_CATEGORY</a></div><div class="ttdeci">#define VCOS_LOG_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5e/applog_8h_source.html#l00040">applog.h:40</a></div></div>
<div class="ttc" id="utils_8c_html_a31a889e0e0f939aa348887bfc5209b70"><div class="ttname"><a href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a></div><div class="ttdeci">int error(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/utils_8c_source.html#l00443">utils.c:443</a></div></div>
<div class="ttc" id="vcos__init_8c_html_a8b1f92590d7f2c734e280c106b57ca48"><div class="ttname"><a href="../../df/d96/vcos__init_8c.html#a8b1f92590d7f2c734e280c106b57ca48">vcos_init</a></div><div class="ttdeci">VCOS_STATUS_T vcos_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d96/vcos__init_8c_source.html#l00042">vcos_init.c:42</a></div></div>
<div class="ttc" id="teapot_8c_html_a6d87d15b481d6a1be0ddb7178ab88608"><div class="ttname"><a href="../../db/d0b/teapot_8c.html#a6d87d15b481d6a1be0ddb7178ab88608">teapot_open</a></div><div class="ttdeci">int teapot_open(RASPITEX_STATE *raspitex_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/teapot_8c_source.html#l00323">teapot.c:323</a></div></div>
<div class="ttc" id="vcos__logcat_8c_html_a3b1a5dfa854033cd021dac6db2934b9c"><div class="ttname"><a href="../../d1/d3a/vcos__logcat_8c.html#a3b1a5dfa854033cd021dac6db2934b9c">vcos_log_register</a></div><div class="ttdeci">void vcos_log_register(const char *name, VCOS_LOG_CAT_T *category)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3a/vcos__logcat_8c_source.html#l00373">vcos_logcat.c:373</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_abe415a637b0001d1f939176d33394ee4"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#abe415a637b0001d1f939176d33394ee4">RASPITEX_STATE::capture</a></div><div class="ttdeci">RASPITEX_CAPTURE capture</div><div class="ttdoc">Log FPS. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00177">RaspiTex.h:177</a></div></div>
<div class="ttc" id="vcos__logging_8h_html_ad591aefcc7a481c6e5f59204f69fc408"><div class="ttname"><a href="../../d0/d85/vcos__logging_8h.html#ad591aefcc7a481c6e5f59204f69fc408">vcos_log_set_level</a></div><div class="ttdeci">VCOS_STATIC_INLINE void vcos_log_set_level(VCOS_LOG_CAT_T *category, VCOS_LOG_LEVEL_T level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/vcos__logging_8h_source.html#l00180">vcos_logging.h:180</a></div></div>
<div class="ttc" id="vcos__logging_8h_html_a22e4514715949e2bb80d29fc85153b2da852e9dace3ca9c78f14aba9e819c82cd"><div class="ttname"><a href="../../d0/d85/vcos__logging_8h.html#a22e4514715949e2bb80d29fc85153b2da852e9dace3ca9c78f14aba9e819c82cd">VCOS_LOG_WARN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/vcos__logging_8h_source.html#l00085">vcos_logging.h:85</a></div></div>
<div class="ttc" id="vcsm__square_8c_html_ad9f2bec1fbc2e3db99cab6c8e9787e15"><div class="ttname"><a href="../../d8/d6d/vcsm__square_8c.html#ad9f2bec1fbc2e3db99cab6c8e9787e15">vcsm_square_open</a></div><div class="ttdeci">int vcsm_square_open(RASPITEX_STATE *raspitex_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d6d/vcsm__square_8c_source.html#l00320">vcsm_square.c:320</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9ca63f2c9aa885dea2216048e72c52573b0"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca63f2c9aa885dea2216048e72c52573b0">RASPITEX_SCENE_TEAPOT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00047">RaspiTex.h:47</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00075">vcos_types.h:75</a></div></div>
<div class="ttc" id="vcos__semaphore_8h_html_aec46d55c9e9b7f8a4beab46601744b56"><div class="ttname"><a href="../../d2/dc2/vcos__semaphore_8h.html#aec46d55c9e9b7f8a4beab46601744b56">vcos_semaphore_create</a></div><div class="ttdeci">VCOS_INLINE_DECL VCOS_STATUS_T vcos_semaphore_create(VCOS_SEMAPHORE_T *sem, const char *name, VCOS_UNSIGNED count)</div><div class="ttdoc">Create a semaphore. </div></div>
<div class="ttc" id="square_8c_html_a7100f3ed0d29266e5d18a5c9840c2841"><div class="ttname"><a href="../../d1/dea/square_8c.html#a7100f3ed0d29266e5d18a5c9840c2841">square_open</a></div><div class="ttdeci">int square_open(RASPITEX_STATE *state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dea/square_8c_source.html#l00114">square.c:114</a></div></div>
<div class="ttc" id="mirror_8c_html_a062d02cd36672eeb1c81781def2680ee"><div class="ttname"><a href="../../d8/d88/mirror_8c.html#a062d02cd36672eeb1c81781def2680ee">mirror_open</a></div><div class="ttdeci">int mirror_open(RASPITEX_STATE *state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d88/mirror_8c_source.html#l00117">mirror.c:117</a></div></div>
<div class="ttc" id="yuv_8c_html_a63b40c3f7ec7642d4ba3849e1744a666"><div class="ttname"><a href="../../df/dab/yuv_8c.html#a63b40c3f7ec7642d4ba3849e1744a666">yuv_open</a></div><div class="ttdeci">int yuv_open(RASPITEX_STATE *state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dab/yuv_8c_source.html#l00136">yuv.c:136</a></div></div>
<div class="ttc" id="vcos__logging_8h_html_a22e4514715949e2bb80d29fc85153b2dae40b56c97360bb863ddb24977c452766"><div class="ttname"><a href="../../d0/d85/vcos__logging_8h.html#a22e4514715949e2bb80d29fc85153b2dae40b56c97360bb863ddb24977c452766">VCOS_LOG_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d85/vcos__logging_8h_source.html#l00086">vcos_logging.h:86</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9ca7ce4a746f93c3e2c1f76a2a6d12cc37b"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca7ce4a746f93c3e2c1f76a2a6d12cc37b">RASPITEX_SCENE_SOBEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00049">RaspiTex.h:49</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9ca1180d7894cc3b917bc189d363006b8c2"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca1180d7894cc3b917bc189d363006b8c2">RASPITEX_SCENE_SQUARE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00045">RaspiTex.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb5497eb80a286fdf9d6c8568b0e7614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb5497eb80a286fdf9d6c8568b0e7614">&#9670;&nbsp;</a></span>raspitex_parse_cmdline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int raspitex_parse_cmdline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>arg2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parse a possible command pair - command and parameter </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg1</td><td>Command </td></tr>
    <tr><td class="paramname">arg2</td><td>Parameter (could be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>How many parameters were used, 0,1,2 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00116">116</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="keywordtype">int</span> command_id, <a class="code" href="../../d3/d5d/khrn__client__platform__linux_8c.html#accd366cbfd7b8a1b904ca4177a894f95">used</a> = 0, num_parameters;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   <span class="keywordflow">if</span> (!arg1)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   command_id = <a class="code" href="../../dc/d63/RaspiCLI_8c.html#a06c0dc687ddb9a0549e7ccdfe9d08a52">raspicli_get_command_id</a>(cmdline_commands,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                        cmdline_commands_size, arg1, &amp;num_parameters);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <span class="comment">// If invalid command, or we are missing a parameter, drop out</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <span class="keywordflow">if</span> (command_id==-1 || (command_id != -1 &amp;&amp; num_parameters &gt; 0 &amp;&amp; arg2 == <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="keywordflow">switch</span> (command_id)</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7a4ad5ca7ab8b5d812082a4730b2f5e85c">CommandGLWin</a>: <span class="comment">// Allows a GL window to be different to preview-res</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordtype">int</span> tmp;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      tmp = sscanf(arg2, <span class="stringliteral">&quot;%d,%d,%d,%d&quot;</span>,</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                   &amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a809ec31841f2408fb38df73a83b24b0e">x</a>, &amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#aabfe5d919a4e0d7f746e326337158cfb">y</a>, &amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a12c01f8656c00308bd0877aee649ffc7">width</a>, &amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a3cf5f60073358382462f7720957e36da">height</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">if</span> (tmp != 4)</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;         <span class="comment">// Default to safe size on parse error</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a809ec31841f2408fb38df73a83b24b0e">x</a> = state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#aabfe5d919a4e0d7f746e326337158cfb">y</a> = 0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a12c01f8656c00308bd0877aee649ffc7">width</a> = <a class="code" href="../../d5/d34/RaspiTex_8c.html#a93493eb8fae5549bd5be67f3449245e0">DEFAULT_WIDTH</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a3cf5f60073358382462f7720957e36da">height</a> = <a class="code" href="../../d5/d34/RaspiTex_8c.html#a1879f9e5604a01f0983829846001ab23">DEFAULT_HEIGHT</a>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a3496c0227ed7d770d59384949cc0b50b">gl_win_defined</a> = 1;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      used = 2;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7acd1f8f8fee7bcc3e08988d073d977b51">CommandGLScene</a>: <span class="comment">// Selects the GL scene</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">if</span> (strcmp(arg2, <span class="stringliteral">&quot;square&quot;</span>) == 0)</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">scene_id</a> = <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca1180d7894cc3b917bc189d363006b8c2">RASPITEX_SCENE_SQUARE</a>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(arg2, <span class="stringliteral">&quot;teapot&quot;</span>) == 0)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">scene_id</a> = <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca63f2c9aa885dea2216048e72c52573b0">RASPITEX_SCENE_TEAPOT</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(arg2, <span class="stringliteral">&quot;mirror&quot;</span>) == 0)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">scene_id</a> = <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9cac288d8dc3c1d178f26b85db7bee80b4b">RASPITEX_SCENE_MIRROR</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(arg2, <span class="stringliteral">&quot;yuv&quot;</span>) == 0)</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">scene_id</a> = <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca35cbe3aa0e83d1d06fe120871e4f3108">RASPITEX_SCENE_YUV</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(arg2, <span class="stringliteral">&quot;sobel&quot;</span>) == 0)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">scene_id</a> = <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca7ce4a746f93c3e2c1f76a2a6d12cc37b">RASPITEX_SCENE_SOBEL</a>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(arg2, <span class="stringliteral">&quot;vcsm_square&quot;</span>) == 0)</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;         state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">scene_id</a> = <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9cabb6decb3e0990842de540fae50ff3c07">RASPITEX_SCENE_VCSM_SQUARE</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;         vcos_log_error(<span class="stringliteral">&quot;Unknown scene %s&quot;</span>, arg2);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      used = 2;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d5d/khrn__client__platform__linux_8c.html#accd366cbfd7b8a1b904ca4177a894f95">used</a>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div><div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9ca35cbe3aa0e83d1d06fe120871e4f3108"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca35cbe3aa0e83d1d06fe120871e4f3108">RASPITEX_SCENE_YUV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00048">RaspiTex.h:48</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_ad8d4dbf7ba8ae84b4a2d35b787bdbc3f"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">RASPITEX_STATE::scene_id</a></div><div class="ttdeci">RASPITEX_SCENE_T scene_id</div><div class="ttdoc">MMAL buffer currently bound to texture(s) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00172">RaspiTex.h:172</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9cac288d8dc3c1d178f26b85db7bee80b4b"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9cac288d8dc3c1d178f26b85db7bee80b4b">RASPITEX_SCENE_MIRROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00046">RaspiTex.h:46</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9cabb6decb3e0990842de540fae50ff3c07"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9cabb6decb3e0990842de540fae50ff3c07">RASPITEX_SCENE_VCSM_SQUARE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00050">RaspiTex.h:50</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a809ec31841f2408fb38df73a83b24b0e"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a809ec31841f2408fb38df73a83b24b0e">RASPITEX_STATE::x</a></div><div class="ttdeci">int32_t x</div><div class="ttdoc">preview y-plane height in pixels </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00142">RaspiTex.h:142</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a3cf5f60073358382462f7720957e36da"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a3cf5f60073358382462f7720957e36da">RASPITEX_STATE::height</a></div><div class="ttdeci">int32_t height</div><div class="ttdoc">width in pixels </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00145">RaspiTex.h:145</a></div></div>
<div class="ttc" id="RaspiTex_8c_html_a93493eb8fae5549bd5be67f3449245e0"><div class="ttname"><a href="../../d5/d34/RaspiTex_8c.html#a93493eb8fae5549bd5be67f3449245e0">DEFAULT_WIDTH</a></div><div class="ttdeci">#define DEFAULT_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/RaspiTex_8c_source.html#l00093">RaspiTex.c:93</a></div></div>
<div class="ttc" id="khrn__client__platform__linux_8c_html_accd366cbfd7b8a1b904ca4177a894f95"><div class="ttname"><a href="../../d3/d5d/khrn__client__platform__linux_8c.html#accd366cbfd7b8a1b904ca4177a894f95">used</a></div><div class="ttdeci">bool used</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5d/khrn__client__platform__linux_8c_source.html#l00619">khrn_client_platform_linux.c:619</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_aabfe5d919a4e0d7f746e326337158cfb"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#aabfe5d919a4e0d7f746e326337158cfb">RASPITEX_STATE::y</a></div><div class="ttdeci">int32_t y</div><div class="ttdoc">x-offset in pixels </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00143">RaspiTex.h:143</a></div></div>
<div class="ttc" id="RaspiCLI_8c_html_a06c0dc687ddb9a0549e7ccdfe9d08a52"><div class="ttname"><a href="../../dc/d63/RaspiCLI_8c.html#a06c0dc687ddb9a0549e7ccdfe9d08a52">raspicli_get_command_id</a></div><div class="ttdeci">int raspicli_get_command_id(const COMMAND_LIST *commands, const int num_commands, const char *arg, int *num_parameters)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d63/RaspiCLI_8c_source.html#l00062">RaspiCLI.c:62</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a3496c0227ed7d770d59384949cc0b50b"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a3496c0227ed7d770d59384949cc0b50b">RASPITEX_STATE::gl_win_defined</a></div><div class="ttdeci">int gl_win_defined</div><div class="ttdoc">Alpha value for display element. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00147">RaspiTex.h:147</a></div></div>
<div class="ttc" id="RaspiTex_8c_html_a0724528cce39d640312f4a7ad1a893f7acd1f8f8fee7bcc3e08988d073d977b51"><div class="ttname"><a href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7acd1f8f8fee7bcc3e08988d073d977b51">CommandGLScene</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/RaspiTex_8c_source.html#l00098">RaspiTex.c:98</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9ca63f2c9aa885dea2216048e72c52573b0"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca63f2c9aa885dea2216048e72c52573b0">RASPITEX_SCENE_TEAPOT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00047">RaspiTex.h:47</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a12c01f8656c00308bd0877aee649ffc7"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a12c01f8656c00308bd0877aee649ffc7">RASPITEX_STATE::width</a></div><div class="ttdeci">int32_t width</div><div class="ttdoc">y-offset in pixels </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00144">RaspiTex.h:144</a></div></div>
<div class="ttc" id="RaspiTex_8c_html_a0724528cce39d640312f4a7ad1a893f7a4ad5ca7ab8b5d812082a4730b2f5e85c"><div class="ttname"><a href="../../d5/d34/RaspiTex_8c.html#a0724528cce39d640312f4a7ad1a893f7a4ad5ca7ab8b5d812082a4730b2f5e85c">CommandGLWin</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/RaspiTex_8c_source.html#l00099">RaspiTex.c:99</a></div></div>
<div class="ttc" id="RaspiTex_8c_html_a1879f9e5604a01f0983829846001ab23"><div class="ttname"><a href="../../d5/d34/RaspiTex_8c.html#a1879f9e5604a01f0983829846001ab23">DEFAULT_HEIGHT</a></div><div class="ttdeci">#define DEFAULT_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/RaspiTex_8c_source.html#l00094">RaspiTex.c:94</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9ca7ce4a746f93c3e2c1f76a2a6d12cc37b"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca7ce4a746f93c3e2c1f76a2a6d12cc37b">RASPITEX_SCENE_SOBEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00049">RaspiTex.h:49</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9ca1180d7894cc3b917bc189d363006b8c2"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca1180d7894cc3b917bc189d363006b8c2">RASPITEX_SCENE_SQUARE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00045">RaspiTex.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5c15ef70a5cb2adfe9a00ba5dae5e48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c15ef70a5cb2adfe9a00ba5dae5e48">&#9670;&nbsp;</a></span>raspitex_set_defaults()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> raspitex_set_defaults </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00645">645</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;{</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   memset(state, 0, <span class="keyword">sizeof</span>(*state));</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a01d28778942f3b709099cf4df7f09f21">version_major</a> = <a class="code" href="../../d0/d5c/RaspiTex_8h.html#a7ee9d794be8b1a4db044e9a73ca296c5">RASPITEX_VERSION_MAJOR</a>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a401ea57fc629384b33be091c1e57c1fb">version_minor</a> = <a class="code" href="../../d0/d5c/RaspiTex_8h.html#aa8ba68100174e36eca0d84ccdc0b2327">RASPITEX_VERSION_MINOR</a>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a97cb9a95b894a173ea5cc92baeaae133">display</a> = <a class="code" href="../../da/de2/egl_8h.html#a2eb0e3fe048fa79c7fc04f06f6e198be">EGL_NO_DISPLAY</a>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a8590c538ae3619948ca26d26ed5c8f09">surface</a> = <a class="code" href="../../da/de2/egl_8h.html#a7702c4a90b1a17bd2692fd01341b28b4">EGL_NO_SURFACE</a>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#aea7a9b3c4c8d4e58739cf786796c3400">context</a> = <a class="code" href="../../da/de2/egl_8h.html#a145d8278e9c309f0ca36cbcd9a16e3b2">EGL_NO_CONTEXT</a>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#aac99a575866e6e9720939c08e267278b">egl_image</a> = <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#ac7f888561942d95e7d3ea8d78292422f">EGL_NO_IMAGE_KHR</a>;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ab03e51076d3ad76c08e334846ed0a978">y_egl_image</a> = <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#ac7f888561942d95e7d3ea8d78292422f">EGL_NO_IMAGE_KHR</a>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acc20ead616a9b983d0a87774d28b9b99">u_egl_image</a> = <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#ac7f888561942d95e7d3ea8d78292422f">EGL_NO_IMAGE_KHR</a>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a73cc9cd95f7623fdaa123fa54b448404">v_egl_image</a> = <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#ac7f888561942d95e7d3ea8d78292422f">EGL_NO_IMAGE_KHR</a>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a70a65e3e2e97488ed2f8e807b9acb4a4">opacity</a> = 255;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a12c01f8656c00308bd0877aee649ffc7">width</a> = <a class="code" href="../../d5/d34/RaspiTex_8c.html#a93493eb8fae5549bd5be67f3449245e0">DEFAULT_WIDTH</a>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a3cf5f60073358382462f7720957e36da">height</a> = <a class="code" href="../../d5/d34/RaspiTex_8c.html#a1879f9e5604a01f0983829846001ab23">DEFAULT_HEIGHT</a>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">scene_id</a> = <a class="code" href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca1180d7894cc3b917bc189d363006b8c2">RASPITEX_SCENE_SQUARE</a>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a476ea401fd74c8fcbf3f0ceb0ac72394">create_native_window</a> = <a class="code" href="../../d6/d18/RaspiTexUtil_8c.html#a83ebdff01840a358614b0059134944ee">raspitexutil_create_native_window</a>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#ae930e28df9a6232807008190ca5d8c40">gl_init</a> = <a class="code" href="../../d6/d18/RaspiTexUtil_8c.html#ac2e8cb03517bad386fb173fe1b1767db">raspitexutil_gl_init_1_0</a>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#ae79444122eb273a948d29ed41d289485">update_model</a> = <a class="code" href="../../d6/d18/RaspiTexUtil_8c.html#a7497467d48f8f13300285bc80f265480">raspitexutil_update_model</a>;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a0dae2beac84905bc1ca029b3c8db34eb">redraw</a> = <a class="code" href="../../d6/d18/RaspiTexUtil_8c.html#a019e683b003d11e2aa51728396d22d20">raspitexutil_redraw</a>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a65b8e36da2115c0bdff9e235f9147ec3">capture</a> = <a class="code" href="../../d6/d18/RaspiTexUtil_8c.html#a47086da51eef44cb4c4ac3b4132d25b5">raspitexutil_capture_bgra</a>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a5b67656c1595093edeb15c0df79d3562">gl_term</a> = <a class="code" href="../../d6/d18/RaspiTexUtil_8c.html#ac74b848b6d25c779e49de068115445a8">raspitexutil_gl_term</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a9575206a8c389b78417f5451d25e095a">destroy_native_window</a> = <a class="code" href="../../d6/d18/RaspiTexUtil_8c.html#ae17d616ba64f87fedf5aba3775ae7338">raspitexutil_destroy_native_window</a>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">ops</a>.<a class="code" href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a3d38ac3ee675f533bf21673bc2adae3f">close</a> = <a class="code" href="../../d6/d18/RaspiTexUtil_8c.html#a4f4c0c629e832ca7194215e303e8d943">raspitexutil_close</a>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div><div class="ttc" id="RaspiTexUtil_8c_html_a83ebdff01840a358614b0059134944ee"><div class="ttname"><a href="../../d6/d18/RaspiTexUtil_8c.html#a83ebdff01840a358614b0059134944ee">raspitexutil_create_native_window</a></div><div class="ttdeci">int raspitexutil_create_native_window(RASPITEX_STATE *raspitex_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d18/RaspiTexUtil_8c_source.html#l00080">RaspiTexUtil.c:80</a></div></div>
<div class="ttc" id="RaspiTexUtil_8c_html_ac74b848b6d25c779e49de068115445a8"><div class="ttname"><a href="../../d6/d18/RaspiTexUtil_8c.html#ac74b848b6d25c779e49de068115445a8">raspitexutil_gl_term</a></div><div class="ttdeci">void raspitexutil_gl_term(RASPITEX_STATE *raspitex_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d18/RaspiTexUtil_8c_source.html#l00047">RaspiTexUtil.c:47</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a70a65e3e2e97488ed2f8e807b9acb4a4"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a70a65e3e2e97488ed2f8e807b9acb4a4">RASPITEX_STATE::opacity</a></div><div class="ttdeci">int opacity</div><div class="ttdoc">height in pixels </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00146">RaspiTex.h:146</a></div></div>
<div class="ttc" id="RaspiTexUtil_8c_html_a47086da51eef44cb4c4ac3b4132d25b5"><div class="ttname"><a href="../../d6/d18/RaspiTexUtil_8c.html#a47086da51eef44cb4c4ac3b4132d25b5">raspitexutil_capture_bgra</a></div><div class="ttdeci">int raspitexutil_capture_bgra(RASPITEX_STATE *state, uint8_t **buffer, size_t *buffer_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d18/RaspiTexUtil_8c_source.html#l00466">RaspiTexUtil.c:466</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_ac7f888561942d95e7d3ea8d78292422f"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#ac7f888561942d95e7d3ea8d78292422f">EGL_NO_IMAGE_KHR</a></div><div class="ttdeci">#define EGL_NO_IMAGE_KHR</div></div>
<div class="ttc" id="egl_8h_html_a7702c4a90b1a17bd2692fd01341b28b4"><div class="ttname"><a href="../../da/de2/egl_8h.html#a7702c4a90b1a17bd2692fd01341b28b4">EGL_NO_SURFACE</a></div><div class="ttdeci">#define EGL_NO_SURFACE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/de2/egl_8h_source.html#l00071">egl.h:71</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_ad8d4dbf7ba8ae84b4a2d35b787bdbc3f"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#ad8d4dbf7ba8ae84b4a2d35b787bdbc3f">RASPITEX_STATE::scene_id</a></div><div class="ttdeci">RASPITEX_SCENE_T scene_id</div><div class="ttdoc">MMAL buffer currently bound to texture(s) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00172">RaspiTex.h:172</a></div></div>
<div class="ttc" id="RaspiTexUtil_8c_html_a7497467d48f8f13300285bc80f265480"><div class="ttname"><a href="../../d6/d18/RaspiTexUtil_8c.html#a7497467d48f8f13300285bc80f265480">raspitexutil_update_model</a></div><div class="ttdeci">int raspitexutil_update_model(RASPITEX_STATE *raspitex_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d18/RaspiTexUtil_8c_source.html#l00408">RaspiTexUtil.c:408</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_a7ee9d794be8b1a4db044e9a73ca296c5"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#a7ee9d794be8b1a4db044e9a73ca296c5">RASPITEX_VERSION_MAJOR</a></div><div class="ttdeci">#define RASPITEX_VERSION_MAJOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00040">RaspiTex.h:40</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a97cb9a95b894a173ea5cc92baeaae133"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a97cb9a95b894a173ea5cc92baeaae133">RASPITEX_STATE::display</a></div><div class="ttdeci">EGLDisplay display</div><div class="ttdoc">Native window used for EGL surface. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00155">RaspiTex.h:155</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_a0dae2beac84905bc1ca029b3c8db34eb"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a0dae2beac84905bc1ca029b3c8db34eb">RASPITEX_SCENE_OPS::redraw</a></div><div class="ttdeci">int(* redraw)(struct RASPITEX_STATE *state)</div><div class="ttdoc">Draw the scene - called after update_model. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00085">RaspiTex.h:85</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_acc20ead616a9b983d0a87774d28b9b99"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#acc20ead616a9b983d0a87774d28b9b99">RASPITEX_STATE::u_egl_image</a></div><div class="ttdeci">EGLImageKHR u_egl_image</div><div class="ttdoc">The U plane texture. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00166">RaspiTex.h:166</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a3cf5f60073358382462f7720957e36da"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a3cf5f60073358382462f7720957e36da">RASPITEX_STATE::height</a></div><div class="ttdeci">int32_t height</div><div class="ttdoc">width in pixels </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00145">RaspiTex.h:145</a></div></div>
<div class="ttc" id="RaspiTex_8c_html_a93493eb8fae5549bd5be67f3449245e0"><div class="ttname"><a href="../../d5/d34/RaspiTex_8c.html#a93493eb8fae5549bd5be67f3449245e0">DEFAULT_WIDTH</a></div><div class="ttdeci">#define DEFAULT_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/RaspiTex_8c_source.html#l00093">RaspiTex.c:93</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_aa8ba68100174e36eca0d84ccdc0b2327"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#aa8ba68100174e36eca0d84ccdc0b2327">RASPITEX_VERSION_MINOR</a></div><div class="ttdeci">#define RASPITEX_VERSION_MINOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00041">RaspiTex.h:41</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a8590c538ae3619948ca26d26ed5c8f09"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a8590c538ae3619948ca26d26ed5c8f09">RASPITEX_STATE::surface</a></div><div class="ttdeci">EGLSurface surface</div><div class="ttdoc">The current EGL display. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00156">RaspiTex.h:156</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_acbbff29ab18bb86533d32838d4755850"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#acbbff29ab18bb86533d32838d4755850">RASPITEX_STATE::ops</a></div><div class="ttdeci">RASPITEX_SCENE_OPS ops</div><div class="ttdoc">Id of the scene to load. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00173">RaspiTex.h:173</a></div></div>
<div class="ttc" id="egl_8h_html_a2eb0e3fe048fa79c7fc04f06f6e198be"><div class="ttname"><a href="../../da/de2/egl_8h.html#a2eb0e3fe048fa79c7fc04f06f6e198be">EGL_NO_DISPLAY</a></div><div class="ttdeci">#define EGL_NO_DISPLAY</div><div class="ttdef"><b>Definition:</b> <a href="../../da/de2/egl_8h_source.html#l00070">egl.h:70</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_a3d38ac3ee675f533bf21673bc2adae3f"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a3d38ac3ee675f533bf21673bc2adae3f">RASPITEX_SCENE_OPS::close</a></div><div class="ttdeci">void(* close)(struct RASPITEX_STATE *state)</div><div class="ttdoc">Called when the scene is unloaded. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00099">RaspiTex.h:99</a></div></div>
<div class="ttc" id="RaspiTexUtil_8c_html_a019e683b003d11e2aa51728396d22d20"><div class="ttname"><a href="../../d6/d18/RaspiTexUtil_8c.html#a019e683b003d11e2aa51728396d22d20">raspitexutil_redraw</a></div><div class="ttdeci">int raspitexutil_redraw(RASPITEX_STATE *raspitex_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d18/RaspiTexUtil_8c_source.html#l00419">RaspiTexUtil.c:419</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_ae79444122eb273a948d29ed41d289485"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#ae79444122eb273a948d29ed41d289485">RASPITEX_SCENE_OPS::update_model</a></div><div class="ttdeci">int(* update_model)(struct RASPITEX_STATE *state)</div><div class="ttdoc">Advance to the next animation step. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00082">RaspiTex.h:82</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_ab03e51076d3ad76c08e334846ed0a978"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#ab03e51076d3ad76c08e334846ed0a978">RASPITEX_STATE::y_egl_image</a></div><div class="ttdeci">EGLImageKHR y_egl_image</div><div class="ttdoc">The Y plane texture. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00164">RaspiTex.h:164</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_a65b8e36da2115c0bdff9e235f9147ec3"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a65b8e36da2115c0bdff9e235f9147ec3">RASPITEX_SCENE_OPS::capture</a></div><div class="ttdeci">int(* capture)(struct RASPITEX_STATE *state, uint8_t **buffer, size_t *buffer_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00089">RaspiTex.h:89</a></div></div>
<div class="ttc" id="egl_8h_html_a145d8278e9c309f0ca36cbcd9a16e3b2"><div class="ttname"><a href="../../da/de2/egl_8h.html#a145d8278e9c309f0ca36cbcd9a16e3b2">EGL_NO_CONTEXT</a></div><div class="ttdeci">#define EGL_NO_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/de2/egl_8h_source.html#l00069">egl.h:69</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_a9575206a8c389b78417f5451d25e095a"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a9575206a8c389b78417f5451d25e095a">RASPITEX_SCENE_OPS::destroy_native_window</a></div><div class="ttdeci">void(* destroy_native_window)(struct RASPITEX_STATE *state)</div><div class="ttdoc">Destroys the native window. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00096">RaspiTex.h:96</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_ae930e28df9a6232807008190ca5d8c40"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#ae930e28df9a6232807008190ca5d8c40">RASPITEX_SCENE_OPS::gl_init</a></div><div class="ttdeci">int(* gl_init)(struct RASPITEX_STATE *state)</div><div class="ttdoc">Creates EGL surface for native window. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00063">RaspiTex.h:63</a></div></div>
<div class="ttc" id="RaspiTexUtil_8c_html_a4f4c0c629e832ca7194215e303e8d943"><div class="ttname"><a href="../../d6/d18/RaspiTexUtil_8c.html#a4f4c0c629e832ca7194215e303e8d943">raspitexutil_close</a></div><div class="ttdeci">void raspitexutil_close(RASPITEX_STATE *raspitex_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d18/RaspiTexUtil_8c_source.html#l00429">RaspiTexUtil.c:429</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_aac99a575866e6e9720939c08e267278b"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#aac99a575866e6e9720939c08e267278b">RASPITEX_STATE::egl_image</a></div><div class="ttdeci">EGLImageKHR egl_image</div><div class="ttdoc">Name for the preview texture. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00161">RaspiTex.h:161</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_a5b67656c1595093edeb15c0df79d3562"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a5b67656c1595093edeb15c0df79d3562">RASPITEX_SCENE_OPS::gl_term</a></div><div class="ttdeci">void(* gl_term)(struct RASPITEX_STATE *state)</div><div class="ttdoc">Creates EGL surface for native window. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00093">RaspiTex.h:93</a></div></div>
<div class="ttc" id="structRASPITEX__SCENE__OPS_html_a476ea401fd74c8fcbf3f0ceb0ac72394"><div class="ttname"><a href="../../dd/df7/structRASPITEX__SCENE__OPS.html#a476ea401fd74c8fcbf3f0ceb0ac72394">RASPITEX_SCENE_OPS::create_native_window</a></div><div class="ttdeci">int(* create_native_window)(struct RASPITEX_STATE *state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00060">RaspiTex.h:60</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a12c01f8656c00308bd0877aee649ffc7"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a12c01f8656c00308bd0877aee649ffc7">RASPITEX_STATE::width</a></div><div class="ttdeci">int32_t width</div><div class="ttdoc">y-offset in pixels </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00144">RaspiTex.h:144</a></div></div>
<div class="ttc" id="RaspiTexUtil_8c_html_ac2e8cb03517bad386fb173fe1b1767db"><div class="ttname"><a href="../../d6/d18/RaspiTexUtil_8c.html#ac2e8cb03517bad386fb173fe1b1767db">raspitexutil_gl_init_1_0</a></div><div class="ttdeci">int raspitexutil_gl_init_1_0(RASPITEX_STATE *raspitex_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d18/RaspiTexUtil_8c_source.html#l00242">RaspiTexUtil.c:242</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a01d28778942f3b709099cf4df7f09f21"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a01d28778942f3b709099cf4df7f09f21">RASPITEX_STATE::version_major</a></div><div class="ttdeci">int version_major</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00127">RaspiTex.h:127</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a401ea57fc629384b33be091c1e57c1fb"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a401ea57fc629384b33be091c1e57c1fb">RASPITEX_STATE::version_minor</a></div><div class="ttdeci">int version_minor</div><div class="ttdoc">For binary compatibility. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00128">RaspiTex.h:128</a></div></div>
<div class="ttc" id="RaspiTexUtil_8c_html_ae17d616ba64f87fedf5aba3775ae7338"><div class="ttname"><a href="../../d6/d18/RaspiTexUtil_8c.html#ae17d616ba64f87fedf5aba3775ae7338">raspitexutil_destroy_native_window</a></div><div class="ttdeci">void raspitexutil_destroy_native_window(RASPITEX_STATE *raspitex_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d18/RaspiTexUtil_8c_source.html#l00141">RaspiTexUtil.c:141</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_aea7a9b3c4c8d4e58739cf786796c3400"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#aea7a9b3c4c8d4e58739cf786796c3400">RASPITEX_STATE::context</a></div><div class="ttdeci">EGLContext context</div><div class="ttdoc">The current EGL surface. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00157">RaspiTex.h:157</a></div></div>
<div class="ttc" id="RaspiTex_8c_html_a1879f9e5604a01f0983829846001ab23"><div class="ttname"><a href="../../d5/d34/RaspiTex_8c.html#a1879f9e5604a01f0983829846001ab23">DEFAULT_HEIGHT</a></div><div class="ttdeci">#define DEFAULT_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d34/RaspiTex_8c_source.html#l00094">RaspiTex.c:94</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a73cc9cd95f7623fdaa123fa54b448404"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a73cc9cd95f7623fdaa123fa54b448404">RASPITEX_STATE::v_egl_image</a></div><div class="ttdeci">EGLImageKHR v_egl_image</div><div class="ttdoc">The V plane texture. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00168">RaspiTex.h:168</a></div></div>
<div class="ttc" id="RaspiTex_8h_html_accc8aa2405cbe42b0b65b1200896ac9ca1180d7894cc3b917bc189d363006b8c2"><div class="ttname"><a href="../../d0/d5c/RaspiTex_8h.html#accc8aa2405cbe42b0b65b1200896ac9ca1180d7894cc3b917bc189d363006b8c2">RASPITEX_SCENE_SQUARE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00045">RaspiTex.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a011084dc0f75e0ae08b53998360b9961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a011084dc0f75e0ae08b53998360b9961">&#9670;&nbsp;</a></span>raspitex_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int raspitex_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts the worker / GL renderer thread. </p><dl class="section pre"><dt>Precondition</dt><dd>raspitex_init was successful </dd>
<dd>
raspitex_configure_preview_port was successful </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Pointer to the GL preview state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success, otherwise, -1 is returned </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00692">692</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;{</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8">VCOS_STATUS_T</a> <a class="code" href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   status = <a class="code" href="../../dd/d29/vcos__pthreads_8c.html#a913549abb71a2d5d44c4da7665d6a423">vcos_thread_create</a>(&amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a9bbd52441c2a9bb9972f17aa45ec5a91">preview_thread</a>, <span class="stringliteral">&quot;preview-worker&quot;</span>,</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                               <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, preview_worker, state);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordflow">if</span> (status != <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a>)</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;%s: Failed to start worker thread %d&quot;</span>,</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                     <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, status);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <span class="keywordflow">return</span> (status == <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a> ? 0 : -1);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}</div><div class="ttc" id="mmal__util_8c_html_affbc5e7be0de233c0edafa72d894118c"><div class="ttname"><a href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a></div><div class="ttdeci">MMAL_STATUS_T status</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddd/mmal__util_8c_source.html#l00037">mmal_util.c:37</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8">VCOS_STATUS_T</a></div><div class="ttdeci">VCOS_STATUS_T</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00073">vcos_types.h:73</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a9bbd52441c2a9bb9972f17aa45ec5a91"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a9bbd52441c2a9bb9972f17aa45ec5a91">RASPITEX_STATE::preview_thread</a></div><div class="ttdeci">VCOS_THREAD_T preview_thread</div><div class="ttdoc">Queue preview buffers to display in order. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00132">RaspiTex.h:132</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00075">vcos_types.h:75</a></div></div>
<div class="ttc" id="vcos__pthreads_8c_html_a913549abb71a2d5d44c4da7665d6a423"><div class="ttname"><a href="../../dd/d29/vcos__pthreads_8c.html#a913549abb71a2d5d44c4da7665d6a423">vcos_thread_create</a></div><div class="ttdeci">VCOS_STATUS_T vcos_thread_create(VCOS_THREAD_T *thread, const char *name, VCOS_THREAD_ATTR_T *attrs, VCOS_THREAD_ENTRY_FN_T entry, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d29/vcos__pthreads_8c_source.html#l00165">vcos_pthreads.c:165</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a654b91398d5a12049e23c6022ec647ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a654b91398d5a12049e23c6022ec647ee">&#9670;&nbsp;</a></span>raspitex_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> raspitex_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d90/structRASPITEX__STATE.html">RASPITEX_STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d34/RaspiTex_8c_source.html#l00675">675</a> of file <a class="el" href="../../d5/d34/RaspiTex_8c_source.html">RaspiTex.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;{</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <span class="keywordflow">if</span> (! state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#afc6b151e33cb432be12a8d8102f9ee78">preview_stop</a>)</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      vcos_log_trace(<span class="stringliteral">&quot;Stopping GL preview&quot;</span>);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#afc6b151e33cb432be12a8d8102f9ee78">preview_stop</a> = 1;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <a class="code" href="../../dd/d29/vcos__pthreads_8c.html#af6706a2a68687f9a46c055b77c950ab1">vcos_thread_join</a>(&amp;state-&gt;<a class="code" href="../../d3/d90/structRASPITEX__STATE.html#a9bbd52441c2a9bb9972f17aa45ec5a91">preview_thread</a>, <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div><div class="ttc" id="vcos__pthreads_8c_html_af6706a2a68687f9a46c055b77c950ab1"><div class="ttname"><a href="../../dd/d29/vcos__pthreads_8c.html#af6706a2a68687f9a46c055b77c950ab1">vcos_thread_join</a></div><div class="ttdeci">void vcos_thread_join(VCOS_THREAD_T *thread, void **pData)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d29/vcos__pthreads_8c_source.html#l00227">vcos_pthreads.c:227</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_a9bbd52441c2a9bb9972f17aa45ec5a91"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#a9bbd52441c2a9bb9972f17aa45ec5a91">RASPITEX_STATE::preview_thread</a></div><div class="ttdeci">VCOS_THREAD_T preview_thread</div><div class="ttdoc">Queue preview buffers to display in order. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00132">RaspiTex.h:132</a></div></div>
<div class="ttc" id="structRASPITEX__STATE_html_afc6b151e33cb432be12a8d8102f9ee78"><div class="ttname"><a href="../../d3/d90/structRASPITEX__STATE.html#afc6b151e33cb432be12a8d8102f9ee78">RASPITEX_STATE::preview_stop</a></div><div class="ttdeci">uint32_t preview_stop</div><div class="ttdoc">Preview worker / GL rendering thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/RaspiTex_8h_source.html#l00133">RaspiTex.h:133</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
