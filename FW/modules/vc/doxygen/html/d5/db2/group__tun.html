<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VideoCore Library: Tunneling</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VideoCore Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Tunneling<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">OpenMAX IL core</a> &#124; <a class="el" href="../../d1/d71/group__comp.html">OpenMAX IL component</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Tunneling:</div>
<div class="dyncontent">
<center><table><tr><td><img src="../../d5/db2/group__tun.png" border="0" alt="" usemap="#d5_2db2_2group____tun"/>
<map name="d5_2db2_2group____tun" id="d5_2db2_2group____tun">
<area shape="rect" id="node2" href="../../d1/d71/group__comp.html" title="OpenMAX IL component" alt="" coords="5,5,171,32"/>
<area shape="rect" id="node3" href="../../d0/de1/group__core.html" title="OpenMAX IL core" alt="" coords="25,56,151,83"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d54/structOMX__PARAM__BUFFERSUPPLIERTYPE.html">OMX_PARAM_BUFFERSUPPLIERTYPE</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html">OMX_TUNNELSETUPTYPE</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gab73b8fc1b49b1e81eb108cb11256bb37"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d8/d54/structOMX__PARAM__BUFFERSUPPLIERTYPE.html">OMX_PARAM_BUFFERSUPPLIERTYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db2/group__tun.html#gab73b8fc1b49b1e81eb108cb11256bb37">OMX_PARAM_BUFFERSUPPLIERTYPE</a></td></tr>
<tr class="separator:gab73b8fc1b49b1e81eb108cb11256bb37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8cef2b317ffae62e408b54e8b5a6146"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html">OMX_TUNNELSETUPTYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db2/group__tun.html#gaa8cef2b317ffae62e408b54e8b5a6146">OMX_TUNNELSETUPTYPE</a></td></tr>
<tr class="separator:gaa8cef2b317ffae62e408b54e8b5a6146"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8fa43caacbb2ede24ba0d35f03ce6dbe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d0e/OMX__Types_8h.html#aa904bc42411fc5979c164cef96e90400">OMX_API</a> <a class="el" href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629a">OMX_ERRORTYPE</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9b7491ee0c559eaba7416fe922882f65">OMX_APIENTRY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db2/group__tun.html#ga8fa43caacbb2ede24ba0d35f03ce6dbe">OMX_SetupTunnel</a> (<a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a7b426d7bc825bf8a56ee39dc3c217af7">OMX_HANDLETYPE</a> hOutput, <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a04983f4ca9c7876035dffc578597eae3">OMX_U32</a> nPortOutput, <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a7b426d7bc825bf8a56ee39dc3c217af7">OMX_HANDLETYPE</a> hInput, <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a04983f4ca9c7876035dffc578597eae3">OMX_U32</a> nPortInput)</td></tr>
<tr class="separator:ga8fa43caacbb2ede24ba0d35f03ce6dbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga0d4b2e0d8e28f54e9eb12d550c5f2e5a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629a">OMX_ERRORTYPE</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db2/group__tun.html#ga0d4b2e0d8e28f54e9eb12d550c5f2e5a">OMX_COMPONENTTYPE::ComponentTunnelRequest</a> )(<a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a7b426d7bc825bf8a56ee39dc3c217af7">OMX_HANDLETYPE</a> hComp, <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a04983f4ca9c7876035dffc578597eae3">OMX_U32</a> nPort, <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a7b426d7bc825bf8a56ee39dc3c217af7">OMX_HANDLETYPE</a> hTunneledComp, <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a04983f4ca9c7876035dffc578597eae3">OMX_U32</a> nTunneledPort, <a class="el" href="../../da/d0e/OMX__Types_8h.html#ae2413e67d24fdfc2c077685e84c53741">OMX_INOUT</a> <a class="el" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html">OMX_TUNNELSETUPTYPE</a> *pTunnelSetup)</td></tr>
<tr class="separator:ga0d4b2e0d8e28f54e9eb12d550c5f2e5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Structures and functions to manage tunnels among component ports </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gab73b8fc1b49b1e81eb108cb11256bb37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab73b8fc1b49b1e81eb108cb11256bb37">&#9670;&nbsp;</a></span>OMX_PARAM_BUFFERSUPPLIERTYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d8/d54/structOMX__PARAM__BUFFERSUPPLIERTYPE.html">OMX_PARAM_BUFFERSUPPLIERTYPE</a>  <a class="el" href="../../d8/d54/structOMX__PARAM__BUFFERSUPPLIERTYPE.html">OMX_PARAM_BUFFERSUPPLIERTYPE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>buffer supplier parameter indicates that buffers received by an input port of a tunnel may not modify the data in the buffers </p>

</div>
</div>
<a id="gaa8cef2b317ffae62e408b54e8b5a6146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa8cef2b317ffae62e408b54e8b5a6146">&#9670;&nbsp;</a></span>OMX_TUNNELSETUPTYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html">OMX_TUNNELSETUPTYPE</a>  <a class="el" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html">OMX_TUNNELSETUPTYPE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html">OMX_TUNNELSETUPTYPE</a> structure is used to pass data from an output port to an input port as part the two ComponentTunnelRequest calls resulting from a OMX_SetupTunnel call from the IL Client. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8fa43caacbb2ede24ba0d35f03ce6dbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8fa43caacbb2ede24ba0d35f03ce6dbe">&#9670;&nbsp;</a></span>OMX_SetupTunnel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d0e/OMX__Types_8h.html#aa904bc42411fc5979c164cef96e90400">OMX_API</a> <a class="el" href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629a">OMX_ERRORTYPE</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9b7491ee0c559eaba7416fe922882f65">OMX_APIENTRY</a> OMX_SetupTunnel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a7b426d7bc825bf8a56ee39dc3c217af7">OMX_HANDLETYPE</a>&#160;</td>
          <td class="paramname"><em>hOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a04983f4ca9c7876035dffc578597eae3">OMX_U32</a>&#160;</td>
          <td class="paramname"><em>nPortOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a7b426d7bc825bf8a56ee39dc3c217af7">OMX_HANDLETYPE</a>&#160;</td>
          <td class="paramname"><em>hInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a04983f4ca9c7876035dffc578597eae3">OMX_U32</a>&#160;</td>
          <td class="paramname"><em>nPortInput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The OMX_SetupTunnel method will handle the necessary calls to the components to setup the specified tunnel the two components. NOTE: This is an actual method (not a #define macro). This method will make calls into the component ComponentTunnelRequest method to do the actual tunnel connection.</p>
<p>The ComponentTunnelRequest method on both components will be called. This method shall not be called unless the component is in the OMX_StateLoaded state except when the ports used for the tunnel are disabled. In this case, the component may be in the OMX_StateExecuting, OMX_StatePause, or OMX_StateIdle states.</p>
<p>The core should return from this call within 20 msec.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hOutput</td><td>Handle of the component to be accessed. Also this is the handle of the component whose port, specified in the nPortOutput parameter will be used the source for the tunnel. This is the component handle returned by the call to the OMX_GetHandle function. There is a requirement that hOutput be the source for the data when tunelling (i.e. nPortOutput is an output port). If 0x0, the component specified in hInput will have it's port specified in nPortInput setup for communication with the application / IL client. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nPortOutput</td><td>nPortOutput is used to select the source port on component to be used in the tunnel. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hInput</td><td>This is the component to setup the tunnel with. This is the handle of the component whose port, specified in the nPortInput parameter will be used the destination for the tunnel. This is the component handle returned by the call to the OMX_GetHandle function. There is a requirement that hInput be the destination for the data when tunelling (i.e. nPortInut is an input port). If 0x0, the component specified in hOutput will have it's port specified in nPortPOutput setup for communication with the application / IL client. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nPortInput</td><td>nPortInput is used to select the destination port on component to be used in the tunnel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OMX_ERRORTYPE If the command successfully executes, the return code will be OMX_ErrorNone. Otherwise the appropriate OMX error will be returned. When OMX_ErrorNotImplemented is returned, one or both components is a non-interop component and does not support tunneling.</dd></dl>
<p>On failure, the ports of both components are setup for communication with the application / IL Client. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d25/framework_2common_2ilcore_8c_source.html#l00281">281</a> of file <a class="el" href="../../de/d25/framework_2common_2ilcore_8c_source.html">ilcore.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d7a/OMX__Component_8h_source.html#l00467">OMX_COMPONENTTYPE::ComponentTunnelRequest</a>, <a class="el" href="../../d9/d89/OMX__Core_8h_source.html#l00674">OMX_TUNNELSETUPTYPE::eSupplier</a>, <a class="el" href="../../d9/d89/OMX__Core_8h_source.html#l00673">OMX_TUNNELSETUPTYPE::nTunnelFlags</a>, <a class="el" href="../../d5/d5f/khrn__misc_8h_source.html#l00133">NULL</a>, <a class="el" href="../../d9/d89/OMX__Core_8h_source.html#l00638">OMX_BufferSupplyUnspecified</a>, <a class="el" href="../../d9/d89/OMX__Core_8h_source.html#l00158">OMX_ErrorBadParameter</a>, and <a class="el" href="../../d9/d89/OMX__Core_8h_source.html#l00139">OMX_ErrorNone</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/ded/jpeg_8c_source.html#l00569">cleanup()</a>, <a class="el" href="../../da/dd4/ilclient_8c_source.html#l00515">ilclient_teardown_tunnels()</a>, and <a class="el" href="../../d1/ded/jpeg_8c_source.html#l00055">portSettingsChanged()</a>.</p>
<div class="fragment"><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;{</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <a class="code" href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629a">OMX_ERRORTYPE</a> eError = <a class="code" href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629aa5c9da0dc80ae827d74da9249806ba53f">OMX_ErrorNone</a>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <a class="code" href="../../d5/d86/structOMX__COMPONENTTYPE.html">OMX_COMPONENTTYPE</a> *pCompIn, *pCompOut;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <a class="code" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html">OMX_TUNNELSETUPTYPE</a> oTunnelSetup;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordflow">if</span> ((hOutput == <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; hInput == <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || ilcs_service == <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629aac7eaeea582e8ff5a51bb8abc54c130e0">OMX_ErrorBadParameter</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   oTunnelSetup.<a class="code" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html#a72a7c6f490bd7ccadc31bab56ac1dbf1">nTunnelFlags</a> = 0;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   oTunnelSetup.<a class="code" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html#a47d4123a9df639c54fd1b73dde6348e4">eSupplier</a> = <a class="code" href="../../d8/d64/group__buf.html#gga794922c5b300e5acec13b1dcccd09e4badb0dd8e4aa6a020fb1aa13df7985a94a">OMX_BufferSupplyUnspecified</a>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   pCompOut = (<a class="code" href="../../d5/d86/structOMX__COMPONENTTYPE.html">OMX_COMPONENTTYPE</a>*)hOutput;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">if</span> (hOutput){</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      eError = pCompOut-&gt;<a class="code" href="../../d5/db2/group__tun.html#ga0d4b2e0d8e28f54e9eb12d550c5f2e5a">ComponentTunnelRequest</a>(hOutput, nPortOutput, hInput, nPortInput, &amp;oTunnelSetup);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keywordflow">if</span> (eError == <a class="code" href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629aa5c9da0dc80ae827d74da9249806ba53f">OMX_ErrorNone</a> &amp;&amp; hInput) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      pCompIn = (<a class="code" href="../../d5/d86/structOMX__COMPONENTTYPE.html">OMX_COMPONENTTYPE</a>*)hInput;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      eError = pCompIn-&gt;<a class="code" href="../../d5/db2/group__tun.html#ga0d4b2e0d8e28f54e9eb12d550c5f2e5a">ComponentTunnelRequest</a>(hInput, nPortInput, hOutput, nPortOutput, &amp;oTunnelSetup);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">if</span> (eError != <a class="code" href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629aa5c9da0dc80ae827d74da9249806ba53f">OMX_ErrorNone</a> &amp;&amp; hOutput) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;         <span class="comment">/* cancel tunnel request on output port since input port failed */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;         pCompOut-&gt;<a class="code" href="../../d5/db2/group__tun.html#ga0d4b2e0d8e28f54e9eb12d550c5f2e5a">ComponentTunnelRequest</a>(hOutput, nPortOutput, <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">return</span> eError;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div><div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="group__buf_html_gga794922c5b300e5acec13b1dcccd09e4badb0dd8e4aa6a020fb1aa13df7985a94a"><div class="ttname"><a href="../../d8/d64/group__buf.html#gga794922c5b300e5acec13b1dcccd09e4badb0dd8e4aa6a020fb1aa13df7985a94a">OMX_BufferSupplyUnspecified</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d89/OMX__Core_8h_source.html#l00638">OMX_Core.h:638</a></div></div>
<div class="ttc" id="OMX__Core_8h_html_a4e2923ea92fd56f5bd9783a6dac7629aac7eaeea582e8ff5a51bb8abc54c130e0"><div class="ttname"><a href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629aac7eaeea582e8ff5a51bb8abc54c130e0">OMX_ErrorBadParameter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d89/OMX__Core_8h_source.html#l00158">OMX_Core.h:158</a></div></div>
<div class="ttc" id="OMX__Core_8h_html_a4e2923ea92fd56f5bd9783a6dac7629a"><div class="ttname"><a href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629a">OMX_ERRORTYPE</a></div><div class="ttdeci">OMX_ERRORTYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d89/OMX__Core_8h_source.html#l00137">OMX_Core.h:137</a></div></div>
<div class="ttc" id="structOMX__TUNNELSETUPTYPE_html"><div class="ttname"><a href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html">OMX_TUNNELSETUPTYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d89/OMX__Core_8h_source.html#l00671">OMX_Core.h:671</a></div></div>
<div class="ttc" id="OMX__Core_8h_html_a4e2923ea92fd56f5bd9783a6dac7629aa5c9da0dc80ae827d74da9249806ba53f"><div class="ttname"><a href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629aa5c9da0dc80ae827d74da9249806ba53f">OMX_ErrorNone</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d89/OMX__Core_8h_source.html#l00139">OMX_Core.h:139</a></div></div>
<div class="ttc" id="structOMX__TUNNELSETUPTYPE_html_a72a7c6f490bd7ccadc31bab56ac1dbf1"><div class="ttname"><a href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html#a72a7c6f490bd7ccadc31bab56ac1dbf1">OMX_TUNNELSETUPTYPE::nTunnelFlags</a></div><div class="ttdeci">OMX_U32 nTunnelFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d89/OMX__Core_8h_source.html#l00673">OMX_Core.h:673</a></div></div>
<div class="ttc" id="structOMX__COMPONENTTYPE_html"><div class="ttname"><a href="../../d5/d86/structOMX__COMPONENTTYPE.html">OMX_COMPONENTTYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/OMX__Component_8h_source.html#l00307">OMX_Component.h:307</a></div></div>
<div class="ttc" id="group__tun_html_ga0d4b2e0d8e28f54e9eb12d550c5f2e5a"><div class="ttname"><a href="../../d5/db2/group__tun.html#ga0d4b2e0d8e28f54e9eb12d550c5f2e5a">OMX_COMPONENTTYPE::ComponentTunnelRequest</a></div><div class="ttdeci">OMX_ERRORTYPE(* ComponentTunnelRequest)(OMX_IN OMX_HANDLETYPE hComp, OMX_IN OMX_U32 nPort, OMX_IN OMX_HANDLETYPE hTunneledComp, OMX_IN OMX_U32 nTunneledPort, OMX_INOUT OMX_TUNNELSETUPTYPE *pTunnelSetup)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/OMX__Component_8h_source.html#l00467">OMX_Component.h:467</a></div></div>
<div class="ttc" id="structOMX__TUNNELSETUPTYPE_html_a47d4123a9df639c54fd1b73dde6348e4"><div class="ttname"><a href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html#a47d4123a9df639c54fd1b73dde6348e4">OMX_TUNNELSETUPTYPE::eSupplier</a></div><div class="ttdeci">OMX_BUFFERSUPPLIERTYPE eSupplier</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d89/OMX__Core_8h_source.html#l00674">OMX_Core.h:674</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga0d4b2e0d8e28f54e9eb12d550c5f2e5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d4b2e0d8e28f54e9eb12d550c5f2e5a">&#9670;&nbsp;</a></span>ComponentTunnelRequest</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d89/OMX__Core_8h.html#a4e2923ea92fd56f5bd9783a6dac7629a">OMX_ERRORTYPE</a>(* OMX_COMPONENTTYPE::ComponentTunnelRequest) (<a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a7b426d7bc825bf8a56ee39dc3c217af7">OMX_HANDLETYPE</a> hComp, <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a04983f4ca9c7876035dffc578597eae3">OMX_U32</a> nPort, <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a7b426d7bc825bf8a56ee39dc3c217af7">OMX_HANDLETYPE</a> hTunneledComp, <a class="el" href="../../da/d0e/OMX__Types_8h.html#a9f94ed9e467960d51f3b1da3a4ebf55c">OMX_IN</a> <a class="el" href="../../da/d0e/OMX__Types_8h.html#a04983f4ca9c7876035dffc578597eae3">OMX_U32</a> nTunneledPort, <a class="el" href="../../da/d0e/OMX__Types_8h.html#ae2413e67d24fdfc2c077685e84c53741">OMX_INOUT</a> <a class="el" href="../../d3/d33/structOMX__TUNNELSETUPTYPE.html">OMX_TUNNELSETUPTYPE</a> *pTunnelSetup)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The ComponentTunnelRequest method will interact with another OMX component to determine if tunneling is possible and to setup the tunneling. The return codes for this method can be used to determine if tunneling is not possible, or if tunneling is not supported.</p>
<p>Base profile components (i.e. non-interop) do not support this method and should return OMX_ErrorNotImplemented</p>
<p>The interop profile component MUST support tunneling to another interop profile component with a compatible port parameters. A component may also support proprietary communication.</p>
<p>If proprietary communication is supported the negotiation of proprietary communication is done outside of OMX in a vendor specific way. It is only required that the proper result be returned and the details of how the setup is done is left to the component implementation.</p>
<p>When this method is invoked when nPort in an output port, the component will:</p><ol type="1">
<li>Populate the pTunnelSetup structure with the output port's requirements and constraints for the tunnel.</li>
</ol>
<p>When this method is invoked when nPort in an input port, the component will:</p><ol type="1">
<li>Query the necessary parameters from the output port to determine if the ports are compatible for tunneling</li>
<li>If the ports are compatible, the component should store the tunnel step provided by the output port</li>
<li>Determine which port (either input or output) is the buffer supplier, and call OMX_SetParameter on the output port to indicate this selection.</li>
</ol>
<p>The component will return from this call within 5 msec.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hComp</td><td>Handle of the component to be accessed. This is the component handle returned by the call to the OMX_GetHandle method. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nPort</td><td>nPort is used to select the port on the component to be used for tunneling. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hTunneledComp</td><td>Handle of the component to tunnel with. This is the component handle returned by the call to the OMX_GetHandle method. When this parameter is 0x0 the component should setup the port for communication with the application / IL Client. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nPortOutput</td><td>nPortOutput is used indicate the port the component should tunnel with. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pTunnelSetup</td><td>Pointer to the tunnel setup structure. When nPort is an output port the component should populate the fields of this structure. When When nPort is an input port the component should review the setup provided by the component with the output port. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OMX_ERRORTYPE If the command successfully executes, the return code will be OMX_ErrorNone. Otherwise the appropriate OMX error will be returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d7a/OMX__Component_8h_source.html#l00467">467</a> of file <a class="el" href="../../d6/d7a/OMX__Component_8h_source.html">OMX_Component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d25/framework_2common_2ilcore_8c_source.html#l00281">OMX_SetupTunnel()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
