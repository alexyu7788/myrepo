<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VideoCore Library: host_applications/linux/apps/raspicam/RaspiVid.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VideoCore Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_195c69405b3ccf68dc267e50a7607549.html">host_applications</a></li><li class="navelem"><a class="el" href="../../dir_ae667c0685e91b0f02394ef15b55cb69.html">linux</a></li><li class="navelem"><a class="el" href="../../dir_828b50a65cb82fa3a052ff0ddf76562c.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_62c16307d7e2e5fb3d32f35d248c8245.html">raspicam</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">RaspiVid.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;memory.h&gt;</code><br />
<code>#include &lt;sysexits.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d7/dc4/bcm__host_8h_source.html">bcm_host.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/de3/vcos_8h_source.html">interface/vcos/vcos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/de1/mmal_8h_source.html">interface/mmal/mmal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/dea/mmal__logging_8h_source.html">interface/mmal/mmal_logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/mmal__buffer_8h_source.html">interface/mmal/mmal_buffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d12/mmal__util_8h_source.html">interface/mmal/util/mmal_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/dbd/mmal__util__params_8h_source.html">interface/mmal/util/mmal_util_params.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/ddf/mmal__default__components_8h_source.html">interface/mmal/util/mmal_default_components.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/db3/mmal__connection_8h_source.html">interface/mmal/util/mmal_connection.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d70/mmal__parameters__camera_8h_source.html">interface/mmal/mmal_parameters_camera.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d4c/RaspiCommonSettings_8h_source.html">RaspiCommonSettings.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d97/RaspiCamControl_8h_source.html">RaspiCamControl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d05/RaspiPreview_8h_source.html">RaspiPreview.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d60/RaspiCLI_8h_source.html">RaspiCLI.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d0d/RaspiHelpers_8h_source.html">RaspiHelpers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d3e/RaspiGPS_8h_source.html">RaspiGPS.h</a>&quot;</code><br />
<code>#include &lt;semaphore.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for RaspiVid.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d29/RaspiVid_8c__incl.png" border="0" usemap="#host__applications_2linux_2apps_2raspicam_2RaspiVid_8c" alt=""/></div>
<map name="host__applications_2linux_2apps_2raspicam_2RaspiVid_8c" id="host__applications_2linux_2apps_2raspicam_2RaspiVid_8c">
<area shape="rect" id="node13" href="../../d7/dc4/bcm__host_8h.html" title="bcm_host.h" alt="" coords="1087,102,1177,129"/>
<area shape="rect" id="node16" href="../../d4/de3/vcos_8h.html" title="interface/vcos/vcos.h" alt="" coords="1771,281,1917,307"/>
<area shape="rect" id="node36" href="../../df/de1/mmal_8h.html" title="interface/mmal/mmal.h" alt="" coords="1936,191,2091,218"/>
<area shape="rect" id="node37" href="../../d4/dea/mmal__logging_8h.html" title="interface/mmal/mmal\l_logging.h" alt="" coords="1036,273,1180,315"/>
<area shape="rect" id="node38" href="../../de/d47/mmal__buffer_8h.html" title="mmal_buffer.h" alt="" coords="1253,102,1358,129"/>
<area shape="rect" id="node39" href="../../d0/d12/mmal__util_8h.html" title="interface/mmal/util\l/mmal_util.h" alt="" coords="1982,95,2111,136"/>
<area shape="rect" id="node40" href="../../d2/dbd/mmal__util__params_8h.html" title="interface/mmal/util\l/mmal_util_params.h" alt="" coords="1382,95,1525,136"/>
<area shape="rect" id="node41" href="../../d3/ddf/mmal__default__components_8h.html" title="interface/mmal/util\l/mmal_default_components.h" alt="" coords="1601,95,1794,136"/>
<area shape="rect" id="node42" href="../../db/db3/mmal__connection_8h.html" title="interface/mmal/util\l/mmal_connection.h" alt="" coords="1819,95,1957,136"/>
<area shape="rect" id="node43" href="../../dc/d70/mmal__parameters__camera_8h.html" title="mmal_parameters_camera.h" alt="" coords="2461,191,2648,218"/>
<area shape="rect" id="node44" href="../../d5/d4c/RaspiCommonSettings_8h.html" title="RaspiCommonSettings.h" alt="" coords="2136,102,2304,129"/>
<area shape="rect" id="node45" href="../../d4/d97/RaspiCamControl_8h.html" title="RaspiCamControl.h" alt="" coords="2329,102,2466,129"/>
<area shape="rect" id="node46" href="../../db/d05/RaspiPreview_8h.html" title="RaspiPreview.h" alt="" coords="2491,102,2605,129"/>
<area shape="rect" id="node47" href="../../d2/d60/RaspiCLI_8h.html" title="RaspiCLI.h" alt="" coords="2629,102,2717,129"/>
<area shape="rect" id="node48" href="../../d3/d0d/RaspiHelpers_8h.html" title="RaspiHelpers.h" alt="" coords="2741,102,2853,129"/>
<area shape="rect" id="node49" href="../../d2/d3e/RaspiGPS_8h.html" title="RaspiGPS.h" alt="" coords="142,281,237,307"/>
<area shape="rect" id="node15" href="../../db/d61/vc__dispmanx_8h.html" title="interface/vmcs_host\l/vc_dispmanx.h" alt="" coords="1721,184,1861,225"/>
<area shape="rect" id="node32" href="../../d9/d2a/vc__tvservice_8h.html" title="interface/vmcs_host\l/vc_tvservice.h" alt="" coords="1557,184,1697,225"/>
<area shape="rect" id="node33" href="../../d6/d46/vc__cec_8h.html" title="interface/vmcs_host\l/vc_cec.h" alt="" coords="1338,273,1478,315"/>
<area shape="rect" id="node34" href="../../d2/d09/vc__cecservice_8h.html" title="interface/vmcs_host\l/vc_cecservice.h" alt="" coords="1393,184,1533,225"/>
<area shape="rect" id="node35" href="../../d0/dd5/vcgencmd_8h.html" title="interface/vmcs_host\l/vcgencmd.h" alt="" coords="1087,184,1227,225"/>
<area shape="rect" id="node17" href="../../d6/db4/vcos__assert_8h.html" title="interface/vcos/vcos\l_assert.h" alt="" coords="2476,363,2612,404"/>
<area shape="rect" id="node18" href="../../da/df3/vcos__types_8h.html" title="interface/vcos/vcos\l_types.h" alt="" coords="1916,452,2052,493"/>
<area shape="rect" id="node19" href="../../db/db8/vcos__platform_8h.html" title="vcos_platform.h" alt="" coords="796,370,911,397"/>
<area shape="rect" id="node21" href="../../d0/d84/vcos__init_8h.html" title="interface/vcos/vcos\l_init.h" alt="" coords="2847,363,2983,404"/>
<area shape="rect" id="node22" href="../../d2/dc2/vcos__semaphore_8h.html" title="interface/vcos/vcos\l_semaphore.h" alt="" coords="1356,363,1492,404"/>
<area shape="rect" id="node23" href="../../de/d30/vcos__thread_8h.html" title="interface/vcos/vcos\l_thread.h" alt="" coords="1516,363,1652,404"/>
<area shape="rect" id="node24" href="../../da/d1b/vcos__mutex_8h.html" title="interface/vcos/vcos\l_mutex.h" alt="" coords="1676,363,1812,404"/>
<area shape="rect" id="node25" href="../../d8/db9/vcos__mem_8h.html" title="interface/vcos/vcos\l_mem.h" alt="" coords="1836,363,1972,404"/>
<area shape="rect" id="node26" href="../../d0/d85/vcos__logging_8h.html" title="interface/vcos/vcos\l_logging.h" alt="" coords="1036,363,1172,404"/>
<area shape="rect" id="node27" href="../../d1/d77/vcos__string_8h.html" title="interface/vcos/vcos\l_string.h" alt="" coords="1196,363,1332,404"/>
<area shape="rect" id="node28" href="../../dc/dd7/vcos__event_8h.html" title="interface/vcos/vcos\l_event.h" alt="" coords="1996,363,2132,404"/>
<area shape="rect" id="node29" href="../../d1/d6d/vcos__thread__attr_8h.html" title="interface/vcos/vcos\l_thread_attr.h" alt="" coords="2687,363,2823,404"/>
<area shape="rect" id="node30" href="../../dc/d07/vcos__tls_8h.html" title="interface/vcos/vcos\l_tls.h" alt="" coords="2156,363,2292,404"/>
<area shape="rect" id="node31" href="../../d6/da9/vcos__reentrant__mutex_8h.html" title="interface/vcos/vcos\l_reentrant_mutex.h" alt="" coords="2316,363,2452,404"/>
</map>
</div>
</div>
<p><a href="../../d7/d0c/RaspiVid_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dbc/structPORT__USERDATA.html">PORT_USERDATA</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d90/structRASPIVID__STATE__S.html">RASPIVID_STATE_S</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a369266c24eacffb87046522897a570d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a369266c24eacffb87046522897a570d5">_GNU_SOURCE</a></td></tr>
<tr class="separator:a369266c24eacffb87046522897a570d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cc92011d6ebe2f6c3bd842467181fe0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a8cc92011d6ebe2f6c3bd842467181fe0">MMAL_CAMERA_PREVIEW_PORT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a8cc92011d6ebe2f6c3bd842467181fe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8b496a6c64a35c25734f640ff2909db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#ab8b496a6c64a35c25734f640ff2909db">MMAL_CAMERA_VIDEO_PORT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ab8b496a6c64a35c25734f640ff2909db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ea8994f409e4b977b3f49529bd8836e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6ea8994f409e4b977b3f49529bd8836e">MMAL_CAMERA_CAPTURE_PORT</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a6ea8994f409e4b977b3f49529bd8836e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ccaddea8f655548d3e9d270009e4ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a27ccaddea8f655548d3e9d270009e4ee">SPLITTER_OUTPUT_PORT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a27ccaddea8f655548d3e9d270009e4ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f78d92239cee17bbe68927b15bbb61c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a4f78d92239cee17bbe68927b15bbb61c">SPLITTER_PREVIEW_PORT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a4f78d92239cee17bbe68927b15bbb61c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa58458e24843c25918857dfb95700aef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#aa58458e24843c25918857dfb95700aef">VIDEO_FRAME_RATE_NUM</a>&#160;&#160;&#160;30</td></tr>
<tr class="separator:aa58458e24843c25918857dfb95700aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a005418ba77c3dfcbfe94731506490255"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a005418ba77c3dfcbfe94731506490255">VIDEO_FRAME_RATE_DEN</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a005418ba77c3dfcbfe94731506490255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45ef30a3e903c0589d9c1191047fb960"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a45ef30a3e903c0589d9c1191047fb960">VIDEO_OUTPUT_BUFFERS_NUM</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a45ef30a3e903c0589d9c1191047fb960"><td class="mdescLeft">&#160;</td><td class="mdescRight">Video render needs at least 2 buffers.  <a href="#a45ef30a3e903c0589d9c1191047fb960">More...</a><br /></td></tr>
<tr class="separator:a45ef30a3e903c0589d9c1191047fb960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7984de2d81a175626a2d8d3b68dd2257"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a7984de2d81a175626a2d8d3b68dd2257">IFRAME_BUFSIZE</a>&#160;&#160;&#160;(60*1000)</td></tr>
<tr class="memdesc:a7984de2d81a175626a2d8d3b68dd2257"><td class="mdescLeft">&#160;</td><td class="mdescRight">Valid bytes in buffer.  <a href="#a7984de2d81a175626a2d8d3b68dd2257">More...</a><br /></td></tr>
<tr class="separator:a7984de2d81a175626a2d8d3b68dd2257"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ade192e4e9a2ddcd687c43ce90d086cbf"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d1/d90/structRASPIVID__STATE__S.html">RASPIVID_STATE_S</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#ade192e4e9a2ddcd687c43ce90d086cbf">RASPIVID_STATE</a></td></tr>
<tr class="separator:ade192e4e9a2ddcd687c43ce90d086cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a425be5f49e9c31d8d13d53190a3e7bc2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2afeb8a192d80d228fe1b0f4b92bb1568f">WAIT_METHOD_NONE</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2abc6602d797df70692570715bd3e30e45">WAIT_METHOD_TIMED</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a0e94daf6c277a432256d2618bd221732">WAIT_METHOD_KEYPRESS</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a8aedff18e4b951ccd2b3090777f52631">WAIT_METHOD_SIGNAL</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2aae6da5465c4ffc17440cc06780ef2069">WAIT_METHOD_FOREVER</a>
<br />
 }</td></tr>
<tr class="separator:a425be5f49e9c31d8d13d53190a3e7bc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0585f6d32bfa475cd6096b514b61761f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761f">RAW_OUTPUT_FMT</a> { <a class="el" href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761fa2486b528acce8c32cc846d19f24857f8">RAW_OUTPUT_FMT_YUV</a> = 0, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761fa7a6ba3d42593602ecd7b4d12ac810134">RAW_OUTPUT_FMT_RGB</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761faaff2121412cd1548a2c380167ee54cc2">RAW_OUTPUT_FMT_GRAY</a>
 }</td></tr>
<tr class="separator:a0585f6d32bfa475cd6096b514b61761f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6739788b75165c40c5fa298fbd9c18bd"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaa6423a07db01e866d25b53fab0e235a5">CommandBitrate</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda66aaf2ee3201f300b4afa248e2a49ba8">CommandTimeout</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdae74c4a46aa039a54621a5b516e6a1aa0">CommandDemoMode</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda4ff1a44e176489cd021363cb11547040">CommandFramerate</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda56389bf6a7ce8b84faf3ee17d18d7ca8">CommandPreviewEnc</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaadf3fe28eec26609a98cefb175774188">CommandIntraPeriod</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaab2e80141fbd2ae11cc23729a386a4e5">CommandProfile</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda2e376163daef1c2166249769412dc307">CommandTimed</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda1faeea6e2150797fb5d079c4a492d44a">CommandSignal</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda6a88bfbfd3a75d0d65845ef9d33e8152">CommandKeypress</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda7078bd4b6e6b4f333b669341e58ea2c2">CommandInitialState</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaee1cd56a56e0e1914e9624fa48746ce7">CommandQP</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdae1b6b92d5278d3efd8b3ad751f8ba923">CommandInlineHeaders</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdabfa1d086ee8836cf8b80d278d75c1995">CommandSegmentFile</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaedaecaf18daae924efa5b5f02d5602d0">CommandSegmentWrap</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda267bee8801394689f76c0edb46f214ee">CommandSegmentStart</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda32ee0bf1e77cb347943aa9617f0eeb6b">CommandSplitWait</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda5ae0715243792ab49b6dba1af1828552">CommandCircular</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaf3cf763ef411b79c926b1360193902c4">CommandIMV</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaa45a1543f5021b8eaa066fbcd1a81645">CommandIntraRefreshType</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda7507ff6424b681891b8d4bf1093c466a">CommandFlush</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda5d6f926a741c6a12c4022cebbcc0427d">CommandSavePTS</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdad9549c72a2b2233ee3e3bdc1fb35d741">CommandCodec</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda748b92900285ad42f5bcad9715ebe5e7">CommandLevel</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdadebcfe6cd6fbc870a7d457cdbdfc0352">CommandRaw</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda61942944f8a99e09082f2d39bbdcc87f">CommandRawFormat</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaa26dd1ec294b9061cb668fdd86f734e9">CommandNetListen</a>, 
<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaf214f7cd0df9713a4c1d7644d00ad798">CommandSPSTimings</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaeb202c1a30ae94db1b757a37c96cabf3">CommandSlices</a>
<br />
 }<tr class="memdesc:a6739788b75165c40c5fa298fbd9c18bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command ID's and Structure defining our command line options.  <a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bd">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a6739788b75165c40c5fa298fbd9c18bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a217dbf8b442f20279ea00b898af96f52"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a217dbf8b442f20279ea00b898af96f52">main</a> (int argc, const char **argv)</td></tr>
<tr class="separator:a217dbf8b442f20279ea00b898af96f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1b19283dd3e4c79e378ec15ebe507acb"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a1b19283dd3e4c79e378ec15ebe507acb">MAX_BITRATE_MJPEG</a> = 25000000</td></tr>
<tr class="separator:a1b19283dd3e4c79e378ec15ebe507acb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a389a009f43533b11405c4a018daa835f"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a389a009f43533b11405c4a018daa835f">MAX_BITRATE_LEVEL4</a> = 25000000</td></tr>
<tr class="separator:a389a009f43533b11405c4a018daa835f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bdf7f8527d7b753933ed1d1a8bdb795"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a3bdf7f8527d7b753933ed1d1a8bdb795">MAX_BITRATE_LEVEL42</a> = 62500000</td></tr>
<tr class="separator:a3bdf7f8527d7b753933ed1d1a8bdb795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88469a10b5094c869d47b8e7b06f49e5"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0c/RaspiVid_8c.html#a88469a10b5094c869d47b8e7b06f49e5">ABORT_INTERVAL</a> = 100</td></tr>
<tr class="memdesc:a88469a10b5094c869d47b8e7b06f49e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interval at which we check for an failure abort during capture.  <a href="#a88469a10b5094c869d47b8e7b06f49e5">More...</a><br /></td></tr>
<tr class="separator:a88469a10b5094c869d47b8e7b06f49e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Command line program to capture a camera video stream and encode it to file. Also optionally display a preview/viewfinder of current camera input.</p>
<p>Description</p>
<p>3 components are created; camera, preview and video encoder. Camera component has three ports, preview, video and stills. This program connects preview and video to the preview and video encoder. Using mmal we don't need to worry about buffers between these components, but we do need to handle buffers from the encoder, which are simply written straight to the file in the requisite buffer callback.</p>
<p>If raw option is selected, a video splitter component is connected between camera and preview. This allows us to set up callback for raw camera data (in YUV420 or RGB format) which might be useful for further image processing.</p>
<p>We use the RaspiCamControl code to handle the specific camera settings. We use the RaspiPreview code to handle the (generic) preview window </p>

<p class="definition">Definition in file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a369266c24eacffb87046522897a570d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a369266c24eacffb87046522897a570d5">&#9670;&nbsp;</a></span>_GNU_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _GNU_SOURCE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00054">54</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a7984de2d81a175626a2d8d3b68dd2257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7984de2d81a175626a2d8d3b68dd2257">&#9670;&nbsp;</a></span>IFRAME_BUFSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IFRAME_BUFSIZE&#160;&#160;&#160;(60*1000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Valid bytes in buffer. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00145">145</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a6ea8994f409e4b977b3f49529bd8836e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea8994f409e4b977b3f49529bd8836e">&#9670;&nbsp;</a></span>MMAL_CAMERA_CAPTURE_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMAL_CAMERA_CAPTURE_PORT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00096">96</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a8cc92011d6ebe2f6c3bd842467181fe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cc92011d6ebe2f6c3bd842467181fe0">&#9670;&nbsp;</a></span>MMAL_CAMERA_PREVIEW_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMAL_CAMERA_PREVIEW_PORT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00094">94</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="ab8b496a6c64a35c25734f640ff2909db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8b496a6c64a35c25734f640ff2909db">&#9670;&nbsp;</a></span>MMAL_CAMERA_VIDEO_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMAL_CAMERA_VIDEO_PORT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00095">95</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a27ccaddea8f655548d3e9d270009e4ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27ccaddea8f655548d3e9d270009e4ee">&#9670;&nbsp;</a></span>SPLITTER_OUTPUT_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPLITTER_OUTPUT_PORT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00099">99</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a4f78d92239cee17bbe68927b15bbb61c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f78d92239cee17bbe68927b15bbb61c">&#9670;&nbsp;</a></span>SPLITTER_PREVIEW_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPLITTER_PREVIEW_PORT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00100">100</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a005418ba77c3dfcbfe94731506490255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a005418ba77c3dfcbfe94731506490255">&#9670;&nbsp;</a></span>VIDEO_FRAME_RATE_DEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VIDEO_FRAME_RATE_DEN&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00105">105</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="aa58458e24843c25918857dfb95700aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa58458e24843c25918857dfb95700aef">&#9670;&nbsp;</a></span>VIDEO_FRAME_RATE_NUM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VIDEO_FRAME_RATE_NUM&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00104">104</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a45ef30a3e903c0589d9c1191047fb960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45ef30a3e903c0589d9c1191047fb960">&#9670;&nbsp;</a></span>VIDEO_OUTPUT_BUFFERS_NUM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VIDEO_OUTPUT_BUFFERS_NUM&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Video render needs at least 2 buffers. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00108">108</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ade192e4e9a2ddcd687c43ce90d086cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade192e4e9a2ddcd687c43ce90d086cbf">&#9670;&nbsp;</a></span>RASPIVID_STATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d1/d90/structRASPIVID__STATE__S.html">RASPIVID_STATE_S</a> <a class="el" href="../../d7/d0c/RaspiVid_8c.html#ade192e4e9a2ddcd687c43ce90d086cbf">RASPIVID_STATE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00131">131</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a425be5f49e9c31d8d13d53190a3e7bc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a425be5f49e9c31d8d13d53190a3e7bc2">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Capture/Pause switch method Simply capture for time specified </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a425be5f49e9c31d8d13d53190a3e7bc2afeb8a192d80d228fe1b0f4b92bb1568f"></a>WAIT_METHOD_NONE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a425be5f49e9c31d8d13d53190a3e7bc2abc6602d797df70692570715bd3e30e45"></a>WAIT_METHOD_TIMED&#160;</td><td class="fielddoc"><p>Simply capture for time specified. </p>
</td></tr>
<tr><td class="fieldname"><a id="a425be5f49e9c31d8d13d53190a3e7bc2a0e94daf6c277a432256d2618bd221732"></a>WAIT_METHOD_KEYPRESS&#160;</td><td class="fielddoc"><p>Cycle between capture and pause for times specified. </p>
</td></tr>
<tr><td class="fieldname"><a id="a425be5f49e9c31d8d13d53190a3e7bc2a8aedff18e4b951ccd2b3090777f52631"></a>WAIT_METHOD_SIGNAL&#160;</td><td class="fielddoc"><p>Switch between capture and pause on keypress. </p>
</td></tr>
<tr><td class="fieldname"><a id="a425be5f49e9c31d8d13d53190a3e7bc2aae6da5465c4ffc17440cc06780ef2069"></a>WAIT_METHOD_FOREVER&#160;</td><td class="fielddoc"><p>Switch between capture and pause on signal. </p>
<p>Run/record forever </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00121">121</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2afeb8a192d80d228fe1b0f4b92bb1568f">WAIT_METHOD_NONE</a>,       </div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2abc6602d797df70692570715bd3e30e45">WAIT_METHOD_TIMED</a>,      </div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a0e94daf6c277a432256d2618bd221732">WAIT_METHOD_KEYPRESS</a>,   </div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a8aedff18e4b951ccd2b3090777f52631">WAIT_METHOD_SIGNAL</a>,     </div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2aae6da5465c4ffc17440cc06780ef2069">WAIT_METHOD_FOREVER</a>     </div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;};</div><div class="ttc" id="RaspiVid_8c_html_a425be5f49e9c31d8d13d53190a3e7bc2a8aedff18e4b951ccd2b3090777f52631"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a8aedff18e4b951ccd2b3090777f52631">WAIT_METHOD_SIGNAL</a></div><div class="ttdoc">Switch between capture and pause on keypress. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00126">RaspiVid.c:126</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a425be5f49e9c31d8d13d53190a3e7bc2abc6602d797df70692570715bd3e30e45"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2abc6602d797df70692570715bd3e30e45">WAIT_METHOD_TIMED</a></div><div class="ttdoc">Simply capture for time specified. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00124">RaspiVid.c:124</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a425be5f49e9c31d8d13d53190a3e7bc2afeb8a192d80d228fe1b0f4b92bb1568f"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2afeb8a192d80d228fe1b0f4b92bb1568f">WAIT_METHOD_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00123">RaspiVid.c:123</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a425be5f49e9c31d8d13d53190a3e7bc2a0e94daf6c277a432256d2618bd221732"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a0e94daf6c277a432256d2618bd221732">WAIT_METHOD_KEYPRESS</a></div><div class="ttdoc">Cycle between capture and pause for times specified. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00125">RaspiVid.c:125</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a425be5f49e9c31d8d13d53190a3e7bc2aae6da5465c4ffc17440cc06780ef2069"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2aae6da5465c4ffc17440cc06780ef2069">WAIT_METHOD_FOREVER</a></div><div class="ttdoc">Switch between capture and pause on signal. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00127">RaspiVid.c:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6739788b75165c40c5fa298fbd9c18bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6739788b75165c40c5fa298fbd9c18bd">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command ID's and Structure defining our command line options. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaa6423a07db01e866d25b53fab0e235a5"></a>CommandBitrate&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda66aaf2ee3201f300b4afa248e2a49ba8"></a>CommandTimeout&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdae74c4a46aa039a54621a5b516e6a1aa0"></a>CommandDemoMode&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda4ff1a44e176489cd021363cb11547040"></a>CommandFramerate&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda56389bf6a7ce8b84faf3ee17d18d7ca8"></a>CommandPreviewEnc&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaadf3fe28eec26609a98cefb175774188"></a>CommandIntraPeriod&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaab2e80141fbd2ae11cc23729a386a4e5"></a>CommandProfile&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda2e376163daef1c2166249769412dc307"></a>CommandTimed&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda1faeea6e2150797fb5d079c4a492d44a"></a>CommandSignal&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda6a88bfbfd3a75d0d65845ef9d33e8152"></a>CommandKeypress&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda7078bd4b6e6b4f333b669341e58ea2c2"></a>CommandInitialState&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaee1cd56a56e0e1914e9624fa48746ce7"></a>CommandQP&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdae1b6b92d5278d3efd8b3ad751f8ba923"></a>CommandInlineHeaders&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdabfa1d086ee8836cf8b80d278d75c1995"></a>CommandSegmentFile&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaedaecaf18daae924efa5b5f02d5602d0"></a>CommandSegmentWrap&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda267bee8801394689f76c0edb46f214ee"></a>CommandSegmentStart&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda32ee0bf1e77cb347943aa9617f0eeb6b"></a>CommandSplitWait&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda5ae0715243792ab49b6dba1af1828552"></a>CommandCircular&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaf3cf763ef411b79c926b1360193902c4"></a>CommandIMV&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaa45a1543f5021b8eaa066fbcd1a81645"></a>CommandIntraRefreshType&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda7507ff6424b681891b8d4bf1093c466a"></a>CommandFlush&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda5d6f926a741c6a12c4022cebbcc0427d"></a>CommandSavePTS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdad9549c72a2b2233ee3e3bdc1fb35d741"></a>CommandCodec&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda748b92900285ad42f5bcad9715ebe5e7"></a>CommandLevel&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdadebcfe6cd6fbc870a7d457cdbdfc0352"></a>CommandRaw&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bda61942944f8a99e09082f2d39bbdcc87f"></a>CommandRawFormat&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaa26dd1ec294b9061cb668fdd86f734e9"></a>CommandNetListen&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaf214f7cd0df9713a4c1d7644d00ad798"></a>CommandSPSTimings&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6739788b75165c40c5fa298fbd9c18bdaeb202c1a30ae94db1b757a37c96cabf3"></a>CommandSlices&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00281">281</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaa6423a07db01e866d25b53fab0e235a5">CommandBitrate</a>,</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda66aaf2ee3201f300b4afa248e2a49ba8">CommandTimeout</a>,</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdae74c4a46aa039a54621a5b516e6a1aa0">CommandDemoMode</a>,</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda4ff1a44e176489cd021363cb11547040">CommandFramerate</a>,</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda56389bf6a7ce8b84faf3ee17d18d7ca8">CommandPreviewEnc</a>,</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaadf3fe28eec26609a98cefb175774188">CommandIntraPeriod</a>,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaab2e80141fbd2ae11cc23729a386a4e5">CommandProfile</a>,</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda2e376163daef1c2166249769412dc307">CommandTimed</a>,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda1faeea6e2150797fb5d079c4a492d44a">CommandSignal</a>,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda6a88bfbfd3a75d0d65845ef9d33e8152">CommandKeypress</a>,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda7078bd4b6e6b4f333b669341e58ea2c2">CommandInitialState</a>,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaee1cd56a56e0e1914e9624fa48746ce7">CommandQP</a>,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdae1b6b92d5278d3efd8b3ad751f8ba923">CommandInlineHeaders</a>,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdabfa1d086ee8836cf8b80d278d75c1995">CommandSegmentFile</a>,</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaedaecaf18daae924efa5b5f02d5602d0">CommandSegmentWrap</a>,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda267bee8801394689f76c0edb46f214ee">CommandSegmentStart</a>,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda32ee0bf1e77cb347943aa9617f0eeb6b">CommandSplitWait</a>,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda5ae0715243792ab49b6dba1af1828552">CommandCircular</a>,</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaf3cf763ef411b79c926b1360193902c4">CommandIMV</a>,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaa45a1543f5021b8eaa066fbcd1a81645">CommandIntraRefreshType</a>,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda7507ff6424b681891b8d4bf1093c466a">CommandFlush</a>,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda5d6f926a741c6a12c4022cebbcc0427d">CommandSavePTS</a>,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdad9549c72a2b2233ee3e3bdc1fb35d741">CommandCodec</a>,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda748b92900285ad42f5bcad9715ebe5e7">CommandLevel</a>,</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdadebcfe6cd6fbc870a7d457cdbdfc0352">CommandRaw</a>,</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda61942944f8a99e09082f2d39bbdcc87f">CommandRawFormat</a>,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaa26dd1ec294b9061cb668fdd86f734e9">CommandNetListen</a>,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaf214f7cd0df9713a4c1d7644d00ad798">CommandSPSTimings</a>,</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaeb202c1a30ae94db1b757a37c96cabf3">CommandSlices</a></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;};</div><div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaab2e80141fbd2ae11cc23729a386a4e5"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaab2e80141fbd2ae11cc23729a386a4e5">CommandProfile</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00289">RaspiVid.c:289</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda7507ff6424b681891b8d4bf1093c466a"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda7507ff6424b681891b8d4bf1093c466a">CommandFlush</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00303">RaspiVid.c:303</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda7078bd4b6e6b4f333b669341e58ea2c2"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda7078bd4b6e6b4f333b669341e58ea2c2">CommandInitialState</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00293">RaspiVid.c:293</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda4ff1a44e176489cd021363cb11547040"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda4ff1a44e176489cd021363cb11547040">CommandFramerate</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00286">RaspiVid.c:286</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaa6423a07db01e866d25b53fab0e235a5"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaa6423a07db01e866d25b53fab0e235a5">CommandBitrate</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00283">RaspiVid.c:283</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda2e376163daef1c2166249769412dc307"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda2e376163daef1c2166249769412dc307">CommandTimed</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00290">RaspiVid.c:290</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda748b92900285ad42f5bcad9715ebe5e7"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda748b92900285ad42f5bcad9715ebe5e7">CommandLevel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00306">RaspiVid.c:306</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda5d6f926a741c6a12c4022cebbcc0427d"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda5d6f926a741c6a12c4022cebbcc0427d">CommandSavePTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00304">RaspiVid.c:304</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda56389bf6a7ce8b84faf3ee17d18d7ca8"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda56389bf6a7ce8b84faf3ee17d18d7ca8">CommandPreviewEnc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00287">RaspiVid.c:287</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda5ae0715243792ab49b6dba1af1828552"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda5ae0715243792ab49b6dba1af1828552">CommandCircular</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00300">RaspiVid.c:300</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdabfa1d086ee8836cf8b80d278d75c1995"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdabfa1d086ee8836cf8b80d278d75c1995">CommandSegmentFile</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00296">RaspiVid.c:296</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda6a88bfbfd3a75d0d65845ef9d33e8152"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda6a88bfbfd3a75d0d65845ef9d33e8152">CommandKeypress</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00292">RaspiVid.c:292</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaee1cd56a56e0e1914e9624fa48746ce7"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaee1cd56a56e0e1914e9624fa48746ce7">CommandQP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00294">RaspiVid.c:294</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdad9549c72a2b2233ee3e3bdc1fb35d741"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdad9549c72a2b2233ee3e3bdc1fb35d741">CommandCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00305">RaspiVid.c:305</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaa26dd1ec294b9061cb668fdd86f734e9"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaa26dd1ec294b9061cb668fdd86f734e9">CommandNetListen</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00309">RaspiVid.c:309</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaedaecaf18daae924efa5b5f02d5602d0"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaedaecaf18daae924efa5b5f02d5602d0">CommandSegmentWrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00297">RaspiVid.c:297</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdae1b6b92d5278d3efd8b3ad751f8ba923"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdae1b6b92d5278d3efd8b3ad751f8ba923">CommandInlineHeaders</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00295">RaspiVid.c:295</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda61942944f8a99e09082f2d39bbdcc87f"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda61942944f8a99e09082f2d39bbdcc87f">CommandRawFormat</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00308">RaspiVid.c:308</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaf3cf763ef411b79c926b1360193902c4"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaf3cf763ef411b79c926b1360193902c4">CommandIMV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00301">RaspiVid.c:301</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaeb202c1a30ae94db1b757a37c96cabf3"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaeb202c1a30ae94db1b757a37c96cabf3">CommandSlices</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00311">RaspiVid.c:311</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda66aaf2ee3201f300b4afa248e2a49ba8"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda66aaf2ee3201f300b4afa248e2a49ba8">CommandTimeout</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00284">RaspiVid.c:284</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaa45a1543f5021b8eaa066fbcd1a81645"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaa45a1543f5021b8eaa066fbcd1a81645">CommandIntraRefreshType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00302">RaspiVid.c:302</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda267bee8801394689f76c0edb46f214ee"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda267bee8801394689f76c0edb46f214ee">CommandSegmentStart</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00298">RaspiVid.c:298</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda32ee0bf1e77cb347943aa9617f0eeb6b"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda32ee0bf1e77cb347943aa9617f0eeb6b">CommandSplitWait</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00299">RaspiVid.c:299</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdae74c4a46aa039a54621a5b516e6a1aa0"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdae74c4a46aa039a54621a5b516e6a1aa0">CommandDemoMode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00285">RaspiVid.c:285</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaf214f7cd0df9713a4c1d7644d00ad798"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaf214f7cd0df9713a4c1d7644d00ad798">CommandSPSTimings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00310">RaspiVid.c:310</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdaadf3fe28eec26609a98cefb175774188"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdaadf3fe28eec26609a98cefb175774188">CommandIntraPeriod</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00288">RaspiVid.c:288</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bdadebcfe6cd6fbc870a7d457cdbdfc0352"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bdadebcfe6cd6fbc870a7d457cdbdfc0352">CommandRaw</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00307">RaspiVid.c:307</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6739788b75165c40c5fa298fbd9c18bda1faeea6e2150797fb5d079c4a492d44a"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6739788b75165c40c5fa298fbd9c18bda1faeea6e2150797fb5d079c4a492d44a">CommandSignal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00291">RaspiVid.c:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0585f6d32bfa475cd6096b514b61761f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0585f6d32bfa475cd6096b514b61761f">&#9670;&nbsp;</a></span>RAW_OUTPUT_FMT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761f">RAW_OUTPUT_FMT</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Possible raw output formats </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a0585f6d32bfa475cd6096b514b61761fa2486b528acce8c32cc846d19f24857f8"></a>RAW_OUTPUT_FMT_YUV&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a0585f6d32bfa475cd6096b514b61761fa7a6ba3d42593602ecd7b4d12ac810134"></a>RAW_OUTPUT_FMT_RGB&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a0585f6d32bfa475cd6096b514b61761faaff2121412cd1548a2c380167ee54cc2"></a>RAW_OUTPUT_FMT_GRAY&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00159">159</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761fa2486b528acce8c32cc846d19f24857f8">RAW_OUTPUT_FMT_YUV</a> = 0,</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761fa7a6ba3d42593602ecd7b4d12ac810134">RAW_OUTPUT_FMT_RGB</a>,</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761faaff2121412cd1548a2c380167ee54cc2">RAW_OUTPUT_FMT_GRAY</a>,</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;} <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761f">RAW_OUTPUT_FMT</a>;</div><div class="ttc" id="RaspiVid_8c_html_a0585f6d32bfa475cd6096b514b61761faaff2121412cd1548a2c380167ee54cc2"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761faaff2121412cd1548a2c380167ee54cc2">RAW_OUTPUT_FMT_GRAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00163">RaspiVid.c:163</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a0585f6d32bfa475cd6096b514b61761f"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761f">RAW_OUTPUT_FMT</a></div><div class="ttdeci">RAW_OUTPUT_FMT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00159">RaspiVid.c:159</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a0585f6d32bfa475cd6096b514b61761fa7a6ba3d42593602ecd7b4d12ac810134"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761fa7a6ba3d42593602ecd7b4d12ac810134">RAW_OUTPUT_FMT_RGB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00162">RaspiVid.c:162</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a0585f6d32bfa475cd6096b514b61761fa2486b528acce8c32cc846d19f24857f8"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a0585f6d32bfa475cd6096b514b61761fa2486b528acce8c32cc846d19f24857f8">RAW_OUTPUT_FMT_YUV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00161">RaspiVid.c:161</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a217dbf8b442f20279ea00b898af96f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a217dbf8b442f20279ea00b898af96f52">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>main </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l02394">2394</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;{</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   <span class="comment">// Our main data storage vessel..</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;   <a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html">RASPIVID_STATE</a> state;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;   <span class="keywordtype">int</span> exit_code = EX_OK;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;   <a class="code" href="../../df/d8f/group__MmalTypes.html#ga5ac87230bd615d2b154a9d5899bc37fd">MMAL_STATUS_T</a> <a class="code" href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a> = <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;   <a class="code" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *camera_preview_port = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;   <a class="code" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *camera_video_port = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;   <a class="code" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *camera_still_port = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;   <a class="code" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *preview_input_port = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;   <a class="code" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *encoder_input_port = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   <a class="code" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *encoder_output_port = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   <a class="code" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *splitter_input_port = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;   <a class="code" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *splitter_output_port = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;   <a class="code" href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a> *splitter_preview_port = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;   <a class="code" href="../../d3/d2b/bcm__host_8c.html#a025ab636eab15ab5dd55860ee86e0b5f">bcm_host_init</a>();</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;   <span class="comment">// Register our application with the logging system</span></div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;   <a class="code" href="../../d1/d3a/vcos__logcat_8c.html#a3b1a5dfa854033cd021dac6db2934b9c">vcos_log_register</a>(<span class="stringliteral">&quot;RaspiVid&quot;</span>, <a class="code" href="../../d0/d5e/applog_8h.html#a0c35674425ccbeb9a3b5d5f96e619fb4">VCOS_LOG_CATEGORY</a>);</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;   signal(SIGINT, <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#a0ff0702d8497950dd64bded4dab6adb1">default_signal_handler</a>);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;   <span class="comment">// Disable USR1 for the moment - may be reenabled if go in to signal capture mode</span></div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;   signal(SIGUSR1, SIG_IGN);</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#a64c107e038adf2b50d9a71d89ab96846">set_app_name</a>(argv[0]);</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;   <span class="comment">// Do we have any parameters</span></div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;   <span class="keywordflow">if</span> (argc == 1)</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   {</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#a5fcadb5e7cb367c0828155e537330377">display_valid_parameters</a>(basename(<a class="code" href="../../d4/d88/RaspiHelpers_8c.html#aa87c4615df7c3a098e34fc13bf943e22">get_app_name</a>()), &amp;application_help_message);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      exit(EX_USAGE);</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   }</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   default_status(&amp;state);</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   <span class="comment">// Parse the command line and put options in to our status structure</span></div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;   <span class="keywordflow">if</span> (parse_cmdline(argc, argv, &amp;state))</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;   {</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      status = -1;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      exit(EX_USAGE);</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;   }</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;   <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">timeout</a> == -1)</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">timeout</a> = 5000;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;   <span class="comment">// Setup for sensor specific parameters, only set W/H settings if zero on entry</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#a07cbe15e2ee5ddb50a741bb261030b6c">get_sensor_defaults</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a9b90146346239dc9f7e87d11c7072f7a">cameraNum</a>, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a6b2c90a7e37344a29a6e8b0cd5534613">camera_name</a>,</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                       &amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a41427adc2afddece4f43632067813331">width</a>, &amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a4707532f0c0fc7dcf63df46d1f9fe8a7">height</a>);</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;   <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   {</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#af70a9c53cff9c6a9e183194f6467261b">print_app_details</a>(stderr);</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;      dump_status(&amp;state);</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;   }</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;   check_camera_model(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a9b90146346239dc9f7e87d11c7072f7a">cameraNum</a>);</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a05918625e284f44e2f62d633561c6dd1">gps</a>)</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/RaspiGPS_8c.html#a76aa58352d6931fff1dc1c0e375f774b">raspi_gps_setup</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>))</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;         state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a05918625e284f44e2f62d633561c6dd1">gps</a> = 0;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   <span class="comment">// OK, we have a nice set of parameters. Now set up our components</span></div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;   <span class="comment">// We have three components. Camera, Preview and encoder.</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   <span class="keywordflow">if</span> ((status = create_camera_component(&amp;state)) != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;   {</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;%s: Failed to create camera component&quot;</span>, __func__);</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;      exit_code = EX_SOFTWARE;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   }</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((status = <a class="code" href="../../d2/dc8/RaspiPreview_8c.html#a921c8f8a37bdc5fb441d42df3b8b97bd">raspipreview_create</a>(&amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">preview_parameters</a>)) != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;   {</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;%s: Failed to create preview component&quot;</span>, __func__);</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      destroy_camera_component(&amp;state);</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;      exit_code = EX_SOFTWARE;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;   }</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((status = create_encoder_component(&amp;state)) != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;   {</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;%s: Failed to create encode component&quot;</span>, __func__);</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;      <a class="code" href="../../d2/dc8/RaspiPreview_8c.html#ac016a89aeafc7d2a2c150f274e79e7c7">raspipreview_destroy</a>(&amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">preview_parameters</a>);</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;      destroy_camera_component(&amp;state);</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;      exit_code = EX_SOFTWARE;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   }</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a8595bdfe6cd5994e530daf90e64b65cf">raw_output</a> &amp;&amp; (status = create_splitter_component(&amp;state)) != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;   {</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;%s: Failed to create splitter component&quot;</span>, __func__);</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;      <a class="code" href="../../d2/dc8/RaspiPreview_8c.html#ac016a89aeafc7d2a2c150f274e79e7c7">raspipreview_destroy</a>(&amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">preview_parameters</a>);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      destroy_camera_component(&amp;state);</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;      destroy_encoder_component(&amp;state);</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      exit_code = EX_SOFTWARE;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   }</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   {</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Starting component connection stage\n&quot;</span>);</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;      camera_preview_port = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a66bb2a5d2ff4ea1ffa8b6e0d29630f41">camera_component</a>-&gt;<a class="code" href="../../d3/d4e/structMMAL__COMPONENT__T.html#a43e3adc8e7b262a35c0fd806f9cf8701">output</a>[<a class="code" href="../../d7/d0c/RaspiVid_8c.html#a8cc92011d6ebe2f6c3bd842467181fe0">MMAL_CAMERA_PREVIEW_PORT</a>];</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;      camera_video_port   = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a66bb2a5d2ff4ea1ffa8b6e0d29630f41">camera_component</a>-&gt;<a class="code" href="../../d3/d4e/structMMAL__COMPONENT__T.html#a43e3adc8e7b262a35c0fd806f9cf8701">output</a>[<a class="code" href="../../d7/d0c/RaspiVid_8c.html#ab8b496a6c64a35c25734f640ff2909db">MMAL_CAMERA_VIDEO_PORT</a>];</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      camera_still_port   = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a66bb2a5d2ff4ea1ffa8b6e0d29630f41">camera_component</a>-&gt;<a class="code" href="../../d3/d4e/structMMAL__COMPONENT__T.html#a43e3adc8e7b262a35c0fd806f9cf8701">output</a>[<a class="code" href="../../d7/d0c/RaspiVid_8c.html#a6ea8994f409e4b977b3f49529bd8836e">MMAL_CAMERA_CAPTURE_PORT</a>];</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;      preview_input_port  = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">preview_parameters</a>.<a class="code" href="../../d4/d5d/structRASPIPREVIEW__PARAMETERS.html#a6fadac79ee8fcf052ea5ae14a8904666">preview_component</a>-&gt;<a class="code" href="../../d3/d4e/structMMAL__COMPONENT__T.html#a483ff43ab82509dc9188e01081d96f1b">input</a>[0];</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      encoder_input_port  = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4a93328688c6d39c70f3cbbb6a0a2312">encoder_component</a>-&gt;<a class="code" href="../../d3/d4e/structMMAL__COMPONENT__T.html#a483ff43ab82509dc9188e01081d96f1b">input</a>[0];</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;      encoder_output_port = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4a93328688c6d39c70f3cbbb6a0a2312">encoder_component</a>-&gt;<a class="code" href="../../d3/d4e/structMMAL__COMPONENT__T.html#a43e3adc8e7b262a35c0fd806f9cf8701">output</a>[0];</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a8595bdfe6cd5994e530daf90e64b65cf">raw_output</a>)</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;      {</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;         splitter_input_port = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5823b0e1940b27adab68c3417ec3a39a">splitter_component</a>-&gt;<a class="code" href="../../d3/d4e/structMMAL__COMPONENT__T.html#a483ff43ab82509dc9188e01081d96f1b">input</a>[0];</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;         splitter_output_port = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5823b0e1940b27adab68c3417ec3a39a">splitter_component</a>-&gt;<a class="code" href="../../d3/d4e/structMMAL__COMPONENT__T.html#a43e3adc8e7b262a35c0fd806f9cf8701">output</a>[<a class="code" href="../../d7/d0c/RaspiVid_8c.html#a27ccaddea8f655548d3e9d270009e4ee">SPLITTER_OUTPUT_PORT</a>];</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;         splitter_preview_port = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5823b0e1940b27adab68c3417ec3a39a">splitter_component</a>-&gt;<a class="code" href="../../d3/d4e/structMMAL__COMPONENT__T.html#a43e3adc8e7b262a35c0fd806f9cf8701">output</a>[<a class="code" href="../../d7/d0c/RaspiVid_8c.html#a4f78d92239cee17bbe68927b15bbb61c">SPLITTER_PREVIEW_PORT</a>];</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;      }</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">preview_parameters</a>.<a class="code" href="../../d4/d5d/structRASPIPREVIEW__PARAMETERS.html#aee58de3247e16541613b4605e0c3ff42">wantPreview</a> )</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;      {</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;         <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a8595bdfe6cd5994e530daf90e64b65cf">raw_output</a>)</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;         {</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Connecting camera preview port to splitter input port\n&quot;</span>);</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;            <span class="comment">// Connect camera to splitter</span></div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;            status = <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#acfab552079d093f29033596575fe69ad">connect_ports</a>(camera_preview_port, splitter_input_port, &amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4789a54a9069f1fa56edb116d37ff4a2">splitter_connection</a>);</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;            <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            {</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4789a54a9069f1fa56edb116d37ff4a2">splitter_connection</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;               vcos_log_error(<span class="stringliteral">&quot;%s: Failed to connect camera preview port to splitter input&quot;</span>, __func__);</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;            }</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;            {</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Connecting splitter preview port to preview input port\n&quot;</span>);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Starting video preview\n&quot;</span>);</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;            }</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;            <span class="comment">// Connect splitter to preview</span></div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;            status = <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#acfab552079d093f29033596575fe69ad">connect_ports</a>(splitter_preview_port, preview_input_port, &amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#abc0c80f0ede485200ad604694c70e8c1">preview_connection</a>);</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;         }</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;         {</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;            {</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Connecting camera preview port to preview input port\n&quot;</span>);</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Starting video preview\n&quot;</span>);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            }</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;            <span class="comment">// Connect camera to preview</span></div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;            status = <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#acfab552079d093f29033596575fe69ad">connect_ports</a>(camera_preview_port, preview_input_port, &amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#abc0c80f0ede485200ad604694c70e8c1">preview_connection</a>);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;         }</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;         <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;            state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#abc0c80f0ede485200ad604694c70e8c1">preview_connection</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      }</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      {</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;         <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a8595bdfe6cd5994e530daf90e64b65cf">raw_output</a>)</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;         {</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Connecting camera preview port to splitter input port\n&quot;</span>);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;            <span class="comment">// Connect camera to splitter</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;            status = <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#acfab552079d093f29033596575fe69ad">connect_ports</a>(camera_preview_port, splitter_input_port, &amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4789a54a9069f1fa56edb116d37ff4a2">splitter_connection</a>);</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;            <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;            {</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4789a54a9069f1fa56edb116d37ff4a2">splitter_connection</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;               vcos_log_error(<span class="stringliteral">&quot;%s: Failed to connect camera preview port to splitter input&quot;</span>, __func__);</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;            }</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;         }</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;         {</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;            status = <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;         }</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;      }</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      <span class="keywordflow">if</span> (status == <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;      {</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;         <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;Connecting camera video port to encoder input port\n&quot;</span>);</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;         <span class="comment">// Now connect the camera to the encoder</span></div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;         status = <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#acfab552079d093f29033596575fe69ad">connect_ports</a>(camera_video_port, encoder_input_port, &amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a423deb18cae6d8336a9bb178635c3ea0">encoder_connection</a>);</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;         <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;         {</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;            state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a423deb18cae6d8336a9bb178635c3ea0">encoder_connection</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;            vcos_log_error(<span class="stringliteral">&quot;%s: Failed to connect camera video port to encoder input&quot;</span>, __func__);</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;         }</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      }</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      <span class="keywordflow">if</span> (status == <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;      {</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;         <span class="comment">// Set up our userdata - this is passed though to the callback where we need the information.</span></div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;         state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a9922560bbbcd7b756e83a58c084318b3">pstate</a> = &amp;state;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;         state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a951d97864cb8a321785e5f16e3accac5">abort</a> = 0;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;         <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a8595bdfe6cd5994e530daf90e64b65cf">raw_output</a>)</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;         {</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;            splitter_output_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#ac48ce60dae764525880438aabb058faa">userdata</a> = (<span class="keyword">struct </span>MMAL_PORT_USERDATA_T *)&amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;            if (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Enabling splitter output port\n&quot;</span>);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;            <span class="comment">// Enable the splitter output port and tell it its callback function</span></div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;            status = <a class="code" href="../../d0/d5f/group__MmalPort.html#gaa723c325260a53f553c6ab7ee8038b70">mmal_port_enable</a>(splitter_output_port, splitter_buffer_callback);</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;            <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;            {</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;               vcos_log_error(<span class="stringliteral">&quot;%s: Failed to setup splitter output port&quot;</span>, __func__);</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;            }</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;         }</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;         state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;         <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#ad72cb088c104a965ef0ce3672670f484">filename</a>)</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;         {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#ad72cb088c104a965ef0ce3672670f484">filename</a>[0] == <span class="charliteral">&#39;-&#39;</span>)</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            {</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a> = stdout;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;            }</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;            {</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a> = open_filename(&amp;state, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#ad72cb088c104a965ef0ce3672670f484">filename</a>);</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            }</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;            <span class="keywordflow">if</span> (!state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a>)</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;            {</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;               <span class="comment">// Notify user, carry on but discarding encoded output buffers</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;               vcos_log_error(<span class="stringliteral">&quot;%s: Error opening output file: %s\nNo output file will be generated\n&quot;</span>, __func__, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#ad72cb088c104a965ef0ce3672670f484">filename</a>);</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;            }</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;         }</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;         state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a43928ddded6bffac87d0ea3525671e6d">imv_file_handle</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;         <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a25608e9435be5bae05069181262bb68d">imv_filename</a>)</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;         {</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a25608e9435be5bae05069181262bb68d">imv_filename</a>[0] == <span class="charliteral">&#39;-&#39;</span>)</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;            {</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a43928ddded6bffac87d0ea3525671e6d">imv_file_handle</a> = stdout;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            }</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;            {</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a43928ddded6bffac87d0ea3525671e6d">imv_file_handle</a> = open_filename(&amp;state, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a25608e9435be5bae05069181262bb68d">imv_filename</a>);</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;            }</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;            <span class="keywordflow">if</span> (!state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a43928ddded6bffac87d0ea3525671e6d">imv_file_handle</a>)</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            {</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;               <span class="comment">// Notify user, carry on but discarding encoded output buffers</span></div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Error opening output file: %s\nNo output file will be generated\n&quot;</span>,state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a25608e9435be5bae05069181262bb68d">imv_filename</a>);</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5c2a31dafc22f0d8b58f245461b8f760">inlineMotionVectors</a>=0;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;            }</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;         }</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;         state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">pts_file_handle</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;         <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5d7bf48ed6f5597fe533d7e72ca00c15">pts_filename</a>)</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;         {</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5d7bf48ed6f5597fe533d7e72ca00c15">pts_filename</a>[0] == <span class="charliteral">&#39;-&#39;</span>)</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;            {</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">pts_file_handle</a> = stdout;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;            }</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;            {</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">pts_file_handle</a> = open_filename(&amp;state, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5d7bf48ed6f5597fe533d7e72ca00c15">pts_filename</a>);</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;               <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">pts_file_handle</a>) <span class="comment">/* save header for mkvmerge */</span></div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;                  fprintf(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">pts_file_handle</a>, <span class="stringliteral">&quot;# timecode format v2\n&quot;</span>);</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;            }</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;            <span class="keywordflow">if</span> (!state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">pts_file_handle</a>)</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            {</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;               <span class="comment">// Notify user, carry on but discarding encoded output buffers</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Error opening output file: %s\nNo output file will be generated\n&quot;</span>,state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5d7bf48ed6f5597fe533d7e72ca00c15">pts_filename</a>);</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a6bd31de01efd3b023a580b46aaedd227">save_pts</a>=0;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;            }</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;         }</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;         state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">raw_file_handle</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;         <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ac59cf37c04e39d7082b889020f2613a5">raw_filename</a>)</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;         {</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ac59cf37c04e39d7082b889020f2613a5">raw_filename</a>[0] == <span class="charliteral">&#39;-&#39;</span>)</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;            {</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">raw_file_handle</a> = stdout;</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;            }</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;            {</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">raw_file_handle</a> = open_filename(&amp;state, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ac59cf37c04e39d7082b889020f2613a5">raw_filename</a>);</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;            }</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;            <span class="keywordflow">if</span> (!state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">raw_file_handle</a>)</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;            {</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;               <span class="comment">// Notify user, carry on but discarding encoded output buffers</span></div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Error opening output file: %s\nNo output file will be generated\n&quot;</span>, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ac59cf37c04e39d7082b889020f2613a5">raw_filename</a>);</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a8595bdfe6cd5994e530daf90e64b65cf">raw_output</a> = 0;</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;            }</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;         }</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;         <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a33caed5d2ed7f523798cd116997797b2">bCircularBuffer</a>)</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;         {</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;            <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a41aec3c40ad049caa75a4ce94f968043">bitrate</a> == 0)</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;            {</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;               vcos_log_error(<span class="stringliteral">&quot;%s: Error circular buffer requires constant bitrate and small intra period\n&quot;</span>, __func__);</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;            }</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">timeout</a> == 0)</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;            {</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;               vcos_log_error(<span class="stringliteral">&quot;%s: Error, circular buffer size is based on timeout must be greater than zero\n&quot;</span>, __func__);</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;            }</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4bfd5282af3072a2d19f29a4e6e605d9">waitMethod</a> != <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a0e94daf6c277a432256d2618bd221732">WAIT_METHOD_KEYPRESS</a> &amp;&amp; state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4bfd5282af3072a2d19f29a4e6e605d9">waitMethod</a> != <a class="code" href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a8aedff18e4b951ccd2b3090777f52631">WAIT_METHOD_SIGNAL</a>)</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;            {</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;               vcos_log_error(<span class="stringliteral">&quot;%s: Error, Circular buffer mode requires either keypress (-k) or signal (-s) triggering\n&quot;</span>, __func__);</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;            }</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a>)</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;            {</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;               vcos_log_error(<span class="stringliteral">&quot;%s: Error require output file (or stdout) for Circular buffer mode\n&quot;</span>, __func__);</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;            }</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;            {</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;               <span class="keywordtype">int</span> <a class="code" href="../../dc/dd2/glext_8h.html#a83e2dd3e98558b907ab7fb03cee26bda">count</a> = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a41aec3c40ad049caa75a4ce94f968043">bitrate</a> * (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">timeout</a> / 1000) / 8;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;               state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#ab405df625c946427acd07e03b31d3a78">cb_buff</a> = (<span class="keywordtype">char</span> *) malloc(count);</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;               <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#ab405df625c946427acd07e03b31d3a78">cb_buff</a> == <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;               {</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;                  vcos_log_error(<span class="stringliteral">&quot;%s: Unable to allocate circular buffer for %d seconds at %.1f Mbits\n&quot;</span>, __func__, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">timeout</a> / 1000, (<span class="keywordtype">double</span>)state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a41aec3c40ad049caa75a4ce94f968043">bitrate</a>/1000000.0);</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;                  <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;               }</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;               <span class="keywordflow">else</span></div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;               {</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;                  state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#ab075f7f0821ad288a5a3c03922afcc47">cb_len</a> = <a class="code" href="../../dc/dd2/glext_8h.html#a83e2dd3e98558b907ab7fb03cee26bda">count</a>;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;                  state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a19052bcbf6272ae21267ebaa1907f1a3">cb_wptr</a> = 0;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;                  state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a56a02c7303cc0e17bf0cdf81bcb8ee1b">cb_wrap</a> = 0;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;                  state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#ac7a185c9b48016b6a3eb7c49650f7487">cb_data</a> = 0;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;                  state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#aba026017af34f7a4fd9134418b65ba7d">iframe_buff_wpos</a> = 0;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;                  state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a785784937dac150c340b4282cb42609e">iframe_buff_rpos</a> = 0;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;                  state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a54121f7db27c381e8d8c55c4d88d2b24">header_wptr</a> = 0;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;               }</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;            }</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;         }</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;         <span class="comment">// Set up our userdata - this is passed though to the callback where we need the information.</span></div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;         encoder_output_port-&gt;<a class="code" href="../../df/d68/structMMAL__PORT__T.html#ac48ce60dae764525880438aabb058faa">userdata</a> = (<span class="keyword">struct </span>MMAL_PORT_USERDATA_T *)&amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;         if (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;Enabling encoder output port\n&quot;</span>);</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;         <span class="comment">// Enable the encoder output port and tell it its callback function</span></div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;         status = <a class="code" href="../../d0/d5f/group__MmalPort.html#gaa723c325260a53f553c6ab7ee8038b70">mmal_port_enable</a>(encoder_output_port, encoder_buffer_callback);</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;         <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;         {</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;            vcos_log_error(<span class="stringliteral">&quot;Failed to setup encoder output&quot;</span>);</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;         }</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;         <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ab3a79dc300a9b77bc6cb40cf6f168954">demoMode</a>)</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;         {</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;            <span class="comment">// Run for the user specific time..</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;            <span class="keywordtype">int</span> num_iterations = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">timeout</a> / state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a24ff42b5e60a0f4fe15bfe1eeaee8ca7">demoInterval</a>;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;            <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Running in demo mode\n&quot;</span>);</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;            <span class="keywordflow">for</span> (i=0; state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">timeout</a> == 0 || i&lt;num_iterations; i++)</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;            {</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;               <a class="code" href="../../db/de2/RaspiCamControl_8c.html#a65a8c22cd83559eb1d17d43f9a8f575a">raspicamcontrol_cycle_test</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a66bb2a5d2ff4ea1ffa8b6e0d29630f41">camera_component</a>);</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;               <a class="code" href="../../de/d30/vcos__thread_8h.html#a0a8ff046abbe0114d9bd85c46d642ad4">vcos_sleep</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a24ff42b5e60a0f4fe15bfe1eeaee8ca7">demoInterval</a>);</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;            }</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;         }</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;         {</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;            <span class="comment">// Only encode stuff if we have a filename and it opened</span></div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;            <span class="comment">// Note we use the copy in the callback, as the call back MIGHT change the file handle</span></div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;            <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a> || state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">raw_file_handle</a>)</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;            {</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;               <span class="keywordtype">int</span> running = 1;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;               <span class="comment">// Send all the buffers to the encoder output port</span></div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;               <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a>)</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;               {</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;                  <span class="keywordtype">int</span> num = <a class="code" href="../../d8/d82/group__MmalQueue.html#ga710521f92c381a4ad9cfb620f0117456">mmal_queue_length</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acb353b07629284b63baa10d596ee925c">encoder_pool</a>-&gt;<a class="code" href="../../d2/ddc/structMMAL__POOL__T.html#ae4175dd1f85f1adbe6be2dc4207fb064">queue</a>);</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;                  <span class="keywordtype">int</span> <a class="code" href="../../dc/dd2/glext_8h.html#a5cae8ef70015fb2c8d5355c136e7d760">q</a>;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;                  <span class="keywordflow">for</span> (q=0; q&lt;num; q++)</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;                  {</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;                     <a class="code" href="../../dd/d88/structMMAL__BUFFER__HEADER__T.html">MMAL_BUFFER_HEADER_T</a> *<a class="code" href="../../d3/dda/eglext_8h.html#a769ee876630087de1b07d78b25dcecea">buffer</a> = <a class="code" href="../../d8/d82/group__MmalQueue.html#gae03a53a1cba809a9c42fefe1af835932">mmal_queue_get</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acb353b07629284b63baa10d596ee925c">encoder_pool</a>-&gt;<a class="code" href="../../d2/ddc/structMMAL__POOL__T.html#ae4175dd1f85f1adbe6be2dc4207fb064">queue</a>);</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;                     <span class="keywordflow">if</span> (!buffer)</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;                        vcos_log_error(<span class="stringliteral">&quot;Unable to get a required buffer %d from pool queue&quot;</span>, q);</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;                     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5f/group__MmalPort.html#ga098a7b91bb6fc596aed0e5585aee3253">mmal_port_send_buffer</a>(encoder_output_port, buffer)!= <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;                        vcos_log_error(<span class="stringliteral">&quot;Unable to send a buffer to encoder output port (%d)&quot;</span>, q);</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;                  }</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;               }</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;               <span class="comment">// Send all the buffers to the splitter output port</span></div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;               <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">raw_file_handle</a>)</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;               {</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;                  <span class="keywordtype">int</span> num = <a class="code" href="../../d8/d82/group__MmalQueue.html#ga710521f92c381a4ad9cfb620f0117456">mmal_queue_length</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a10c417acb79e9ea78e26459d359cccb8">splitter_pool</a>-&gt;<a class="code" href="../../d2/ddc/structMMAL__POOL__T.html#ae4175dd1f85f1adbe6be2dc4207fb064">queue</a>);</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;                  <span class="keywordtype">int</span> <a class="code" href="../../dc/dd2/glext_8h.html#a5cae8ef70015fb2c8d5355c136e7d760">q</a>;</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;                  <span class="keywordflow">for</span> (q = 0; q &lt; num; q++)</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;                  {</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;                     <a class="code" href="../../dd/d88/structMMAL__BUFFER__HEADER__T.html">MMAL_BUFFER_HEADER_T</a> *buffer = <a class="code" href="../../d8/d82/group__MmalQueue.html#gae03a53a1cba809a9c42fefe1af835932">mmal_queue_get</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a10c417acb79e9ea78e26459d359cccb8">splitter_pool</a>-&gt;<a class="code" href="../../d2/ddc/structMMAL__POOL__T.html#ae4175dd1f85f1adbe6be2dc4207fb064">queue</a>);</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                     <span class="keywordflow">if</span> (!buffer)</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;                        vcos_log_error(<span class="stringliteral">&quot;Unable to get a required buffer %d from pool queue&quot;</span>, q);</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;                     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5f/group__MmalPort.html#ga098a7b91bb6fc596aed0e5585aee3253">mmal_port_send_buffer</a>(splitter_output_port, buffer)!= <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;                        vcos_log_error(<span class="stringliteral">&quot;Unable to send a buffer to splitter output port (%d)&quot;</span>, q);</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;                  }</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;               }</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;               <span class="keywordtype">int</span> initialCapturing=state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a38a79577d772f488249658e884b4976f">bCapturing</a>;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;               <span class="keywordflow">while</span> (running)</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;               {</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                  <span class="comment">// Change state</span></div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                  state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a38a79577d772f488249658e884b4976f">bCapturing</a> = !state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a38a79577d772f488249658e884b4976f">bCapturing</a>;</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../db/d48/mmal__util__params_8c.html#aba9fe4904a386eaa681c7bdbbcf93023">mmal_port_parameter_set_boolean</a>(camera_video_port, <a class="code" href="../../df/d90/group__MMAL__PARAMETER__IDS.html#gga16db4876b192da08f3ad0cb41afe516fa7d63afa317c4adc763a80fff17d9a6e8">MMAL_PARAMETER_CAPTURE</a>, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a38a79577d772f488249658e884b4976f">bCapturing</a>) != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;                  {</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;                     <span class="comment">// How to handle?</span></div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;                  }</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;                  <span class="comment">// In circular buffer mode, exit and save the buffer (make sure we do this after having paused the capture</span></div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;                  <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a33caed5d2ed7f523798cd116997797b2">bCircularBuffer</a> &amp;&amp; !state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a38a79577d772f488249658e884b4976f">bCapturing</a>)</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;                  {</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;                  }</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;                  <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;                  {</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;                     <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a38a79577d772f488249658e884b4976f">bCapturing</a>)</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;Starting video capture\n&quot;</span>);</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;                     <span class="keywordflow">else</span></div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;Pausing video capture\n&quot;</span>);</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                  }</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;                  <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#aaecb2ce8643ede812673d1dbc4cb7f62">splitWait</a>)</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                  {</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;                     <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a38a79577d772f488249658e884b4976f">bCapturing</a>)</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                     {</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../db/d48/mmal__util__params_8c.html#aba9fe4904a386eaa681c7bdbbcf93023">mmal_port_parameter_set_boolean</a>(encoder_output_port, <a class="code" href="../../df/d90/group__MMAL__PARAMETER__IDS.html#gga173f34c053cf8ba70e5f775cd03196f4acb16f28ca423bad20069218b2e32b1d3">MMAL_PARAMETER_VIDEO_REQUEST_I_FRAME</a>, 1) != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;                        {</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;                           vcos_log_error(<span class="stringliteral">&quot;failed to request I-FRAME&quot;</span>);</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;                        }</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;                     }</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;                     <span class="keywordflow">else</span></div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                     {</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                        <span class="keywordflow">if</span>(!initialCapturing)</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;                           state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acc626f0a23c4e4e01f5156d61f382f0a">splitNow</a>=1;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;                     }</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;                     initialCapturing=0;</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;                  }</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;                  running = wait_for_next_change(&amp;state);</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;               }</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;               <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;                  fprintf(stderr, <span class="stringliteral">&quot;Finished capture\n&quot;</span>);</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;            }</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;            {</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;               <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">timeout</a>)</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;                  <a class="code" href="../../de/d30/vcos__thread_8h.html#a0a8ff046abbe0114d9bd85c46d642ad4">vcos_sleep</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">timeout</a>);</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;               <span class="keywordflow">else</span></div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;               {</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;                  <span class="comment">// timeout = 0 so run forever</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;                  <span class="keywordflow">while</span>(1)</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                     <a class="code" href="../../de/d30/vcos__thread_8h.html#a0a8ff046abbe0114d9bd85c46d642ad4">vcos_sleep</a>(<a class="code" href="../../d7/d0c/RaspiVid_8c.html#a88469a10b5094c869d47b8e7b06f49e5">ABORT_INTERVAL</a>);</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;               }</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;            }</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;         }</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;      }</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      {</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;         <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#ad6cc73ee106e56252e3e10278aa463b7">mmal_status_to_int</a>(status);</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;         vcos_log_error(<span class="stringliteral">&quot;%s: Failed to connect camera to preview&quot;</span>, __func__);</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;      }</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;      <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a33caed5d2ed7f523798cd116997797b2">bCircularBuffer</a>)</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;      {</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;         <span class="keywordtype">int</span> copy_from_end, copy_from_start;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;         copy_from_end = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#ab075f7f0821ad288a5a3c03922afcc47">cb_len</a> - state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92bcc99c8f0ee095e2e945ef4dc5f39f">iframe_buff</a>[state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a785784937dac150c340b4282cb42609e">iframe_buff_rpos</a>];</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;         copy_from_start = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#ab075f7f0821ad288a5a3c03922afcc47">cb_len</a> - copy_from_end;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;         copy_from_start = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a19052bcbf6272ae21267ebaa1907f1a3">cb_wptr</a> &lt; copy_from_start ? state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a19052bcbf6272ae21267ebaa1907f1a3">cb_wptr</a> : copy_from_start;</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;         <span class="keywordflow">if</span>(!state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a56a02c7303cc0e17bf0cdf81bcb8ee1b">cb_wrap</a>)</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;         {</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;            copy_from_start = state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a19052bcbf6272ae21267ebaa1907f1a3">cb_wptr</a>;</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;            copy_from_end = 0;</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;         }</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;         fwrite(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a9c2ddb09973f7be1b3e0d1bab8696b2d">header_bytes</a>, 1, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a54121f7db27c381e8d8c55c4d88d2b24">header_wptr</a>, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a>);</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;         <span class="comment">// Save circular buffer</span></div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;         fwrite(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#ab405df625c946427acd07e03b31d3a78">cb_buff</a> + state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92bcc99c8f0ee095e2e945ef4dc5f39f">iframe_buff</a>[state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a785784937dac150c340b4282cb42609e">iframe_buff_rpos</a>], 1, copy_from_end, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a>);</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;         fwrite(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#ab405df625c946427acd07e03b31d3a78">cb_buff</a>, 1, copy_from_start, state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a>);</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;         <span class="keywordflow">if</span>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a49f8351fef013878349e85618fc1bb78">flush_buffers</a>) fflush(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a>);</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      }</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;<a class="code" href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a>:</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#ad6cc73ee106e56252e3e10278aa463b7">mmal_status_to_int</a>(status);</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Closing down\n&quot;</span>);</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;      <span class="comment">// Disable all our ports that are not handled by connections</span></div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;      <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#a293de76f9ccf60623b116623ef1b4a43">check_disable_port</a>(camera_still_port);</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#a293de76f9ccf60623b116623ef1b4a43">check_disable_port</a>(encoder_output_port);</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <a class="code" href="../../d4/d88/RaspiHelpers_8c.html#a293de76f9ccf60623b116623ef1b4a43">check_disable_port</a>(splitter_output_port);</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">preview_parameters</a>.<a class="code" href="../../d4/d5d/structRASPIPREVIEW__PARAMETERS.html#aee58de3247e16541613b4605e0c3ff42">wantPreview</a> &amp;&amp; state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#abc0c80f0ede485200ad604694c70e8c1">preview_connection</a>)</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;         <a class="code" href="../../d7/dfb/group__MmalConnectionUtility.html#ga0b872de7d96b262486ee4e5c72971513">mmal_connection_destroy</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#abc0c80f0ede485200ad604694c70e8c1">preview_connection</a>);</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a423deb18cae6d8336a9bb178635c3ea0">encoder_connection</a>)</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;         <a class="code" href="../../d7/dfb/group__MmalConnectionUtility.html#ga0b872de7d96b262486ee4e5c72971513">mmal_connection_destroy</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a423deb18cae6d8336a9bb178635c3ea0">encoder_connection</a>);</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4789a54a9069f1fa56edb116d37ff4a2">splitter_connection</a>)</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;         <a class="code" href="../../d7/dfb/group__MmalConnectionUtility.html#ga0b872de7d96b262486ee4e5c72971513">mmal_connection_destroy</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4789a54a9069f1fa56edb116d37ff4a2">splitter_connection</a>);</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      <span class="comment">// Can now close our file. Note disabling ports may flush buffers which causes</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;      <span class="comment">// problems if we have already closed the file!</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a> &amp;&amp; state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a> != stdout)</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;         fclose(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">file_handle</a>);</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a43928ddded6bffac87d0ea3525671e6d">imv_file_handle</a> &amp;&amp; state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a43928ddded6bffac87d0ea3525671e6d">imv_file_handle</a> != stdout)</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;         fclose(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a43928ddded6bffac87d0ea3525671e6d">imv_file_handle</a>);</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">pts_file_handle</a> &amp;&amp; state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">pts_file_handle</a> != stdout)</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;         fclose(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">pts_file_handle</a>);</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">raw_file_handle</a> &amp;&amp; state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">raw_file_handle</a> != stdout)</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;         fclose(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">callback_data</a>.<a class="code" href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">raw_file_handle</a>);</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      <span class="comment">/* Disable components */</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4a93328688c6d39c70f3cbbb6a0a2312">encoder_component</a>)</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;         <a class="code" href="../../df/db6/group__MmalComponent.html#ga9477827891cb5a2a5c77fb23dd4ea7d9">mmal_component_disable</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a4a93328688c6d39c70f3cbbb6a0a2312">encoder_component</a>);</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">preview_parameters</a>.<a class="code" href="../../d4/d5d/structRASPIPREVIEW__PARAMETERS.html#a6fadac79ee8fcf052ea5ae14a8904666">preview_component</a>)</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;         <a class="code" href="../../df/db6/group__MmalComponent.html#ga9477827891cb5a2a5c77fb23dd4ea7d9">mmal_component_disable</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">preview_parameters</a>.<a class="code" href="../../d4/d5d/structRASPIPREVIEW__PARAMETERS.html#a6fadac79ee8fcf052ea5ae14a8904666">preview_component</a>);</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5823b0e1940b27adab68c3417ec3a39a">splitter_component</a>)</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;         <a class="code" href="../../df/db6/group__MmalComponent.html#ga9477827891cb5a2a5c77fb23dd4ea7d9">mmal_component_disable</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a5823b0e1940b27adab68c3417ec3a39a">splitter_component</a>);</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a66bb2a5d2ff4ea1ffa8b6e0d29630f41">camera_component</a>)</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;         <a class="code" href="../../df/db6/group__MmalComponent.html#ga9477827891cb5a2a5c77fb23dd4ea7d9">mmal_component_disable</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#a66bb2a5d2ff4ea1ffa8b6e0d29630f41">camera_component</a>);</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      destroy_encoder_component(&amp;state);</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;      <a class="code" href="../../d2/dc8/RaspiPreview_8c.html#ac016a89aeafc7d2a2c150f274e79e7c7">raspipreview_destroy</a>(&amp;state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">preview_parameters</a>);</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;      destroy_splitter_component(&amp;state);</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;      destroy_camera_component(&amp;state);</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>)</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Close down completed, all components disconnected, disabled and destroyed\n\n&quot;</span>);</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;   }</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;   <span class="keywordflow">if</span> (status != <a class="code" href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a>)</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;      <a class="code" href="../../db/de2/RaspiCamControl_8c.html#a6f2166444b5f3ae0eebddeb252a5d955">raspicamcontrol_check_configuration</a>(128);</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;   <span class="keywordflow">if</span> (state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a05918625e284f44e2f62d633561c6dd1">gps</a>)</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;      <a class="code" href="../../d1/d54/RaspiGPS_8c.html#af511436177b465eb70696dc1d89635fc">raspi_gps_shutdown</a>(state.<a class="code" href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">common_settings</a>.<a class="code" href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">verbose</a>);</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;   <span class="keywordflow">return</span> exit_code;</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;}</div><div class="ttc" id="structRASPIVID__STATE__S_html_a33caed5d2ed7f523798cd116997797b2"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a33caed5d2ed7f523798cd116997797b2">RASPIVID_STATE_S::bCircularBuffer</a></div><div class="ttdeci">int bCircularBuffer</div><div class="ttdoc">State of capture/pause. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00211">RaspiVid.c:211</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_ac7a185c9b48016b6a3eb7c49650f7487"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#ac7a185c9b48016b6a3eb7c49650f7487">PORT_USERDATA::cb_data</a></div><div class="ttdeci">int cb_data</div><div class="ttdoc">Has buffer wrapped at least once? </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00144">RaspiVid.c:144</a></div></div>
<div class="ttc" id="structRASPICOMMONSETTINGS__PARAMETERS_html_a41427adc2afddece4f43632067813331"><div class="ttname"><a href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a41427adc2afddece4f43632067813331">RASPICOMMONSETTINGS_PARAMETERS::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4c/RaspiCommonSettings_8h_source.html#l00044">RaspiCommonSettings.h:44</a></div></div>
<div class="ttc" id="RaspiGPS_8c_html_af511436177b465eb70696dc1d89635fc"><div class="ttname"><a href="../../d1/d54/RaspiGPS_8c.html#af511436177b465eb70696dc1d89635fc">raspi_gps_shutdown</a></div><div class="ttdeci">void raspi_gps_shutdown(int verbose)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d54/RaspiGPS_8c_source.html#l00115">RaspiGPS.c:115</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a425be5f49e9c31d8d13d53190a3e7bc2a8aedff18e4b951ccd2b3090777f52631"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a8aedff18e4b951ccd2b3090777f52631">WAIT_METHOD_SIGNAL</a></div><div class="ttdoc">Switch between capture and pause on keypress. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00126">RaspiVid.c:126</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_acb353b07629284b63baa10d596ee925c"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#acb353b07629284b63baa10d596ee925c">RASPIVID_STATE_S::encoder_pool</a></div><div class="ttdeci">MMAL_POOL_T * encoder_pool</div><div class="ttdoc">Pointer to the pool of buffers used by splitter output port 0. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00206">RaspiVid.c:206</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a43928ddded6bffac87d0ea3525671e6d"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a43928ddded6bffac87d0ea3525671e6d">PORT_USERDATA::imv_file_handle</a></div><div class="ttdeci">FILE * imv_file_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00151">RaspiVid.c:151</a></div></div>
<div class="ttc" id="structRASPIPREVIEW__PARAMETERS_html_a6fadac79ee8fcf052ea5ae14a8904666"><div class="ttname"><a href="../../d4/d5d/structRASPIPREVIEW__PARAMETERS.html#a6fadac79ee8fcf052ea5ae14a8904666">RASPIPREVIEW_PARAMETERS::preview_component</a></div><div class="ttdeci">MMAL_COMPONENT_T * preview_component</div><div class="ttdoc">Destination rectangle for the preview window. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d05/RaspiPreview_8h_source.html#l00057">RaspiPreview.h:57</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_ab8b496a6c64a35c25734f640ff2909db"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#ab8b496a6c64a35c25734f640ff2909db">MMAL_CAMERA_VIDEO_PORT</a></div><div class="ttdeci">#define MMAL_CAMERA_VIDEO_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00095">RaspiVid.c:95</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a27ccaddea8f655548d3e9d270009e4ee"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a27ccaddea8f655548d3e9d270009e4ee">SPLITTER_OUTPUT_PORT</a></div><div class="ttdeci">#define SPLITTER_OUTPUT_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00099">RaspiVid.c:99</a></div></div>
<div class="ttc" id="mmal__util_8c_html_affbc5e7be0de233c0edafa72d894118c"><div class="ttname"><a href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a></div><div class="ttdeci">MMAL_STATUS_T status</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddd/mmal__util_8c_source.html#l00037">mmal_util.c:37</a></div></div>
<div class="ttc" id="structMMAL__COMPONENT__T_html_a483ff43ab82509dc9188e01081d96f1b"><div class="ttname"><a href="../../d3/d4e/structMMAL__COMPONENT__T.html#a483ff43ab82509dc9188e01081d96f1b">MMAL_COMPONENT_T::input</a></div><div class="ttdeci">MMAL_PORT_T ** input</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d65/mmal__component_8h_source.html#l00070">mmal_component.h:70</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a7a19101c978bba32c8f2a01bb7895382"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a7a19101c978bba32c8f2a01bb7895382">RASPIVID_STATE_S::timeout</a></div><div class="ttdeci">int timeout</div><div class="ttdoc">Common settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00171">RaspiVid.c:171</a></div></div>
<div class="ttc" id="group__MmalPort_html_gaa723c325260a53f553c6ab7ee8038b70"><div class="ttname"><a href="../../d0/d5f/group__MmalPort.html#gaa723c325260a53f553c6ab7ee8038b70">mmal_port_enable</a></div><div class="ttdeci">MMAL_STATUS_T mmal_port_enable(MMAL_PORT_T *port, MMAL_PORT_BH_CB_T cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4d/mmal__port_8c_source.html#l00351">mmal_port.c:351</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a5d7bf48ed6f5597fe533d7e72ca00c15"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a5d7bf48ed6f5597fe533d7e72ca00c15">RASPIVID_STATE_S::pts_filename</a></div><div class="ttdeci">char * pts_filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00220">RaspiVid.c:220</a></div></div>
<div class="ttc" id="structRASPICOMMONSETTINGS__PARAMETERS_html_a9b90146346239dc9f7e87d11c7072f7a"><div class="ttname"><a href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a9b90146346239dc9f7e87d11c7072f7a">RASPICOMMONSETTINGS_PARAMETERS::cameraNum</a></div><div class="ttdeci">int cameraNum</div><div class="ttdoc">filename of output file </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4c/RaspiCommonSettings_8h_source.html#l00047">RaspiCommonSettings.h:47</a></div></div>
<div class="ttc" id="RaspiHelpers_8c_html_a0ff0702d8497950dd64bded4dab6adb1"><div class="ttname"><a href="../../d4/d88/RaspiHelpers_8c.html#a0ff0702d8497950dd64bded4dab6adb1">default_signal_handler</a></div><div class="ttdeci">void default_signal_handler(int signal_number)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d88/RaspiHelpers_8c_source.html#l00199">RaspiHelpers.c:199</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a38a79577d772f488249658e884b4976f"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a38a79577d772f488249658e884b4976f">RASPIVID_STATE_S::bCapturing</a></div><div class="ttdeci">int bCapturing</div><div class="ttdoc">Used to move data to the encoder callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00210">RaspiVid.c:210</a></div></div>
<div class="ttc" id="group__MmalConnectionUtility_html_ga0b872de7d96b262486ee4e5c72971513"><div class="ttname"><a href="../../d7/dfb/group__MmalConnectionUtility.html#ga0b872de7d96b262486ee4e5c72971513">mmal_connection_destroy</a></div><div class="ttdeci">MMAL_STATUS_T mmal_connection_destroy(MMAL_CONNECTION_T *connection)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/mmal__connection_8c_source.html#l00140">mmal_connection.c:140</a></div></div>
<div class="ttc" id="RaspiPreview_8c_html_a921c8f8a37bdc5fb441d42df3b8b97bd"><div class="ttname"><a href="../../d2/dc8/RaspiPreview_8c.html#a921c8f8a37bdc5fb441d42df3b8b97bd">raspipreview_create</a></div><div class="ttdeci">MMAL_STATUS_T raspipreview_create(RASPIPREVIEW_PARAMETERS *state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc8/RaspiPreview_8c_source.html#l00075">RaspiPreview.c:75</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a54121f7db27c381e8d8c55c4d88d2b24"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a54121f7db27c381e8d8c55c4d88d2b24">PORT_USERDATA::header_wptr</a></div><div class="ttdeci">int header_wptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00150">RaspiVid.c:150</a></div></div>
<div class="ttc" id="RaspiHelpers_8c_html_a5fcadb5e7cb367c0828155e537330377"><div class="ttname"><a href="../../d4/d88/RaspiHelpers_8c.html#a5fcadb5e7cb367c0828155e537330377">display_valid_parameters</a></div><div class="ttdeci">void display_valid_parameters(char *name, void(*app_help)(char *))</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d88/RaspiHelpers_8c_source.html#l00069">RaspiHelpers.c:69</a></div></div>
<div class="ttc" id="structMMAL__PORT__T_html"><div class="ttname"><a href="../../df/d68/structMMAL__PORT__T.html">MMAL_PORT_T</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcd/mmal__port_8h_source.html#l00079">mmal_port.h:79</a></div></div>
<div class="ttc" id="structMMAL__POOL__T_html_ae4175dd1f85f1adbe6be2dc4207fb064"><div class="ttname"><a href="../../d2/ddc/structMMAL__POOL__T.html#ae4175dd1f85f1adbe6be2dc4207fb064">MMAL_POOL_T::queue</a></div><div class="ttdeci">MMAL_QUEUE_T * queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dee/mmal__pool_8h_source.html#l00045">mmal_pool.h:45</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a6ea8994f409e4b977b3f49529bd8836e"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a6ea8994f409e4b977b3f49529bd8836e">MMAL_CAMERA_CAPTURE_PORT</a></div><div class="ttdeci">#define MMAL_CAMERA_CAPTURE_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00096">RaspiVid.c:96</a></div></div>
<div class="ttc" id="applog_8h_html_a0c35674425ccbeb9a3b5d5f96e619fb4"><div class="ttname"><a href="../../d0/d5e/applog_8h.html#a0c35674425ccbeb9a3b5d5f96e619fb4">VCOS_LOG_CATEGORY</a></div><div class="ttdeci">#define VCOS_LOG_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5e/applog_8h_source.html#l00040">applog.h:40</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_ab075f7f0821ad288a5a3c03922afcc47"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#ab075f7f0821ad288a5a3c03922afcc47">PORT_USERDATA::cb_len</a></div><div class="ttdeci">int cb_len</div><div class="ttdoc">Circular buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00141">RaspiVid.c:141</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a25608e9435be5bae05069181262bb68d"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a25608e9435be5bae05069181262bb68d">RASPIVID_STATE_S::imv_filename</a></div><div class="ttdeci">char * imv_filename</div><div class="ttdoc">Encoder outputs inline Motion Vectors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00214">RaspiVid.c:214</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a92bcc99c8f0ee095e2e945ef4dc5f39f"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a92bcc99c8f0ee095e2e945ef4dc5f39f">PORT_USERDATA::iframe_buff</a></div><div class="ttdeci">int iframe_buff[IFRAME_BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00146">RaspiVid.c:146</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a49f8351fef013878349e85618fc1bb78"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a49f8351fef013878349e85618fc1bb78">PORT_USERDATA::flush_buffers</a></div><div class="ttdeci">int flush_buffers</div><div class="ttdoc">File handle to write raw data to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00153">RaspiVid.c:153</a></div></div>
<div class="ttc" id="utils_8c_html_a31a889e0e0f939aa348887bfc5209b70"><div class="ttname"><a href="../../d3/d91/utils_8c.html#a31a889e0e0f939aa348887bfc5209b70">error</a></div><div class="ttdeci">int error(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d91/utils_8c_source.html#l00443">utils.c:443</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a5cca6cc83b29f05ec450c5ba8625cd00"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a5cca6cc83b29f05ec450c5ba8625cd00">RASPIVID_STATE_S::callback_data</a></div><div class="ttdeci">PORT_USERDATA callback_data</div><div class="ttdoc">Pointer to the pool of buffers used by encoder output port. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00208">RaspiVid.c:208</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a66bb2a5d2ff4ea1ffa8b6e0d29630f41"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a66bb2a5d2ff4ea1ffa8b6e0d29630f41">RASPIVID_STATE_S::camera_component</a></div><div class="ttdeci">MMAL_COMPONENT_T * camera_component</div><div class="ttdoc">Camera setup parameters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00198">RaspiVid.c:198</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a423deb18cae6d8336a9bb178635c3ea0"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a423deb18cae6d8336a9bb178635c3ea0">RASPIVID_STATE_S::encoder_connection</a></div><div class="ttdeci">MMAL_CONNECTION_T * encoder_connection</div><div class="ttdoc">Pointer to the connection from camera to splitter. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00203">RaspiVid.c:203</a></div></div>
<div class="ttc" id="RaspiHelpers_8c_html_af70a9c53cff9c6a9e183194f6467261b"><div class="ttname"><a href="../../d4/d88/RaspiHelpers_8c.html#af70a9c53cff9c6a9e183194f6467261b">print_app_details</a></div><div class="ttdeci">void print_app_details(FILE *fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d88/RaspiHelpers_8c_source.html#l00061">RaspiHelpers.c:61</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_acc626f0a23c4e4e01f5156d61f382f0a"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#acc626f0a23c4e4e01f5156d61f382f0a">RASPIVID_STATE_S::splitNow</a></div><div class="ttdeci">int splitNow</div><div class="ttdoc">Current segment counter. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00192">RaspiVid.c:192</a></div></div>
<div class="ttc" id="structRASPICOMMONSETTINGS__PARAMETERS_html_a6b2c90a7e37344a29a6e8b0cd5534613"><div class="ttname"><a href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a6b2c90a7e37344a29a6e8b0cd5534613">RASPICOMMONSETTINGS_PARAMETERS::camera_name</a></div><div class="ttdeci">char camera_name[MMAL_PARAMETER_CAMERA_INFO_MAX_STR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4c/RaspiCommonSettings_8h_source.html#l00043">RaspiCommonSettings.h:43</a></div></div>
<div class="ttc" id="RaspiHelpers_8c_html_a64c107e038adf2b50d9a71d89ab96846"><div class="ttname"><a href="../../d4/d88/RaspiHelpers_8c.html#a64c107e038adf2b50d9a71d89ab96846">set_app_name</a></div><div class="ttdeci">void set_app_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d88/RaspiHelpers_8c_source.html#l00145">RaspiHelpers.c:145</a></div></div>
<div class="ttc" id="structRASPICOMMONSETTINGS__PARAMETERS_html_a4707532f0c0fc7dcf63df46d1f9fe8a7"><div class="ttname"><a href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a4707532f0c0fc7dcf63df46d1f9fe8a7">RASPICOMMONSETTINGS_PARAMETERS::height</a></div><div class="ttdeci">int height</div><div class="ttdoc">Requested width of image. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4c/RaspiCommonSettings_8h_source.html#l00045">RaspiCommonSettings.h:45</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html">RASPIVID_STATE_S</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00168">RaspiVid.c:168</a></div></div>
<div class="ttc" id="vcos__logcat_8c_html_a3b1a5dfa854033cd021dac6db2934b9c"><div class="ttname"><a href="../../d1/d3a/vcos__logcat_8c.html#a3b1a5dfa854033cd021dac6db2934b9c">vcos_log_register</a></div><div class="ttdeci">void vcos_log_register(const char *name, VCOS_LOG_CAT_T *category)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3a/vcos__logcat_8c_source.html#l00373">vcos_logcat.c:373</a></div></div>
<div class="ttc" id="structRASPICOMMONSETTINGS__PARAMETERS_html_a05918625e284f44e2f62d633561c6dd1"><div class="ttname"><a href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a05918625e284f44e2f62d633561c6dd1">RASPICOMMONSETTINGS_PARAMETERS::gps</a></div><div class="ttdeci">int gps</div><div class="ttdoc">!0 if want detailed run information </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4c/RaspiCommonSettings_8h_source.html#l00050">RaspiCommonSettings.h:50</a></div></div>
<div class="ttc" id="RaspiHelpers_8c_html_a07cbe15e2ee5ddb50a741bb261030b6c"><div class="ttname"><a href="../../d4/d88/RaspiHelpers_8c.html#a07cbe15e2ee5ddb50a741bb261030b6c">get_sensor_defaults</a></div><div class="ttdeci">void get_sensor_defaults(int camera_num, char *camera_name, int *width, int *height)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d88/RaspiHelpers_8c_source.html#l00090">RaspiHelpers.c:90</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a5823b0e1940b27adab68c3417ec3a39a"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a5823b0e1940b27adab68c3417ec3a39a">RASPIVID_STATE_S::splitter_component</a></div><div class="ttdeci">MMAL_COMPONENT_T * splitter_component</div><div class="ttdoc">Pointer to the camera component. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00199">RaspiVid.c:199</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a1bfce0b5a01a318ce476d14047a3e1a4"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a1bfce0b5a01a318ce476d14047a3e1a4">PORT_USERDATA::raw_file_handle</a></div><div class="ttdeci">FILE * raw_file_handle</div><div class="ttdoc">File handle to write inline motion vectors to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00152">RaspiVid.c:152</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_ad8cbdb349d752a9a12c00efaa1e5a31a"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#ad8cbdb349d752a9a12c00efaa1e5a31a">RASPIVID_STATE_S::common_settings</a></div><div class="ttdeci">RASPICOMMONSETTINGS_PARAMETERS common_settings</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00170">RaspiVid.c:170</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a4bfd5282af3072a2d19f29a4e6e605d9"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a4bfd5282af3072a2d19f29a4e6e605d9">RASPIVID_STATE_S::waitMethod</a></div><div class="ttdeci">int waitMethod</div><div class="ttdoc">H264 level to use for encoding. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00184">RaspiVid.c:184</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a9c2ddb09973f7be1b3e0d1bab8696b2d"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a9c2ddb09973f7be1b3e0d1bab8696b2d">PORT_USERDATA::header_bytes</a></div><div class="ttdeci">char header_bytes[29]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00149">RaspiVid.c:149</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a5c2a31dafc22f0d8b58f245461b8f760"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a5c2a31dafc22f0d8b58f245461b8f760">RASPIVID_STATE_S::inlineMotionVectors</a></div><div class="ttdeci">int inlineMotionVectors</div><div class="ttdoc">Whether we are writing to a circular buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00213">RaspiVid.c:213</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a4f78d92239cee17bbe68927b15bbb61c"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a4f78d92239cee17bbe68927b15bbb61c">SPLITTER_PREVIEW_PORT</a></div><div class="ttdeci">#define SPLITTER_PREVIEW_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00100">RaspiVid.c:100</a></div></div>
<div class="ttc" id="glext_8h_html_a83e2dd3e98558b907ab7fb03cee26bda"><div class="ttname"><a href="../../dc/dd2/glext_8h.html#a83e2dd3e98558b907ab7fb03cee26bda">count</a></div><div class="ttdeci">GLint GLsizei * count</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd2/glext_8h_source.html#l00963">glext.h:963</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a8cc92011d6ebe2f6c3bd842467181fe0"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a8cc92011d6ebe2f6c3bd842467181fe0">MMAL_CAMERA_PREVIEW_PORT</a></div><div class="ttdeci">#define MMAL_CAMERA_PREVIEW_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00094">RaspiVid.c:94</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a4a93328688c6d39c70f3cbbb6a0a2312"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a4a93328688c6d39c70f3cbbb6a0a2312">RASPIVID_STATE_S::encoder_component</a></div><div class="ttdeci">MMAL_COMPONENT_T * encoder_component</div><div class="ttdoc">Pointer to the splitter component. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00200">RaspiVid.c:200</a></div></div>
<div class="ttc" id="group__MmalPort_html_ga098a7b91bb6fc596aed0e5585aee3253"><div class="ttname"><a href="../../d0/d5f/group__MmalPort.html#ga098a7b91bb6fc596aed0e5585aee3253">mmal_port_send_buffer</a></div><div class="ttdeci">MMAL_STATUS_T mmal_port_send_buffer(MMAL_PORT_T *port, MMAL_BUFFER_HEADER_T *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4d/mmal__port_8c_source.html#l00709">mmal_port.c:709</a></div></div>
<div class="ttc" id="structRASPICOMMONSETTINGS__PARAMETERS_html_ad72cb088c104a965ef0ce3672670f484"><div class="ttname"><a href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#ad72cb088c104a965ef0ce3672670f484">RASPICOMMONSETTINGS_PARAMETERS::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">requested height of image </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4c/RaspiCommonSettings_8h_source.html#l00046">RaspiCommonSettings.h:46</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_ab405df625c946427acd07e03b31d3a78"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#ab405df625c946427acd07e03b31d3a78">PORT_USERDATA::cb_buff</a></div><div class="ttdeci">char * cb_buff</div><div class="ttdoc">Set to 1 in callback if an error occurs to attempt to abort the capture. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00140">RaspiVid.c:140</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a4789a54a9069f1fa56edb116d37ff4a2"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a4789a54a9069f1fa56edb116d37ff4a2">RASPIVID_STATE_S::splitter_connection</a></div><div class="ttdeci">MMAL_CONNECTION_T * splitter_connection</div><div class="ttdoc">Pointer to the connection from camera or splitter to preview. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00202">RaspiVid.c:202</a></div></div>
<div class="ttc" id="structMMAL__PORT__T_html_ac48ce60dae764525880438aabb058faa"><div class="ttname"><a href="../../df/d68/structMMAL__PORT__T.html#ac48ce60dae764525880438aabb058faa">MMAL_PORT_T::userdata</a></div><div class="ttdeci">struct MMAL_PORT_USERDATA_T * userdata</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcd/mmal__port_8h_source.html#l00110">mmal_port.h:110</a></div></div>
<div class="ttc" id="group__MmalTypes_html_ga5ac87230bd615d2b154a9d5899bc37fd"><div class="ttname"><a href="../../df/d8f/group__MmalTypes.html#ga5ac87230bd615d2b154a9d5899bc37fd">MMAL_STATUS_T</a></div><div class="ttdeci">MMAL_STATUS_T</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df3/mmal__types_8h_source.html#l00046">mmal_types.h:46</a></div></div>
<div class="ttc" id="RaspiHelpers_8c_html_ad6cc73ee106e56252e3e10278aa463b7"><div class="ttname"><a href="../../d4/d88/RaspiHelpers_8c.html#ad6cc73ee106e56252e3e10278aa463b7">mmal_status_to_int</a></div><div class="ttdeci">int mmal_status_to_int(MMAL_STATUS_T status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d88/RaspiHelpers_8c_source.html#l00222">RaspiHelpers.c:222</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a10c417acb79e9ea78e26459d359cccb8"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a10c417acb79e9ea78e26459d359cccb8">RASPIVID_STATE_S::splitter_pool</a></div><div class="ttdeci">MMAL_POOL_T * splitter_pool</div><div class="ttdoc">Pointer to the connection from camera to encoder. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00205">RaspiVid.c:205</a></div></div>
<div class="ttc" id="RaspiPreview_8c_html_ac016a89aeafc7d2a2c150f274e79e7c7"><div class="ttname"><a href="../../d2/dc8/RaspiPreview_8c.html#ac016a89aeafc7d2a2c150f274e79e7c7">raspipreview_destroy</a></div><div class="ttdeci">void raspipreview_destroy(RASPIPREVIEW_PARAMETERS *state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc8/RaspiPreview_8c_source.html#l00177">RaspiPreview.c:177</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a951d97864cb8a321785e5f16e3accac5"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a951d97864cb8a321785e5f16e3accac5">PORT_USERDATA::abort</a></div><div class="ttdeci">int abort</div><div class="ttdoc">pointer to our state in case required in callback </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00139">RaspiVid.c:139</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a88469a10b5094c869d47b8e7b06f49e5"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a88469a10b5094c869d47b8e7b06f49e5">ABORT_INTERVAL</a></div><div class="ttdeci">const int ABORT_INTERVAL</div><div class="ttdoc">Interval at which we check for an failure abort during capture. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00116">RaspiVid.c:116</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a9922560bbbcd7b756e83a58c084318b3"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a9922560bbbcd7b756e83a58c084318b3">PORT_USERDATA::pstate</a></div><div class="ttdeci">RASPISTILL_STATE * pstate</div><div class="ttdoc">semaphore which is posted when we reach end of frame (indicates end of capture or fault) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d37/RaspiStill_8c_source.html#l00170">RaspiStill.c:170</a></div></div>
<div class="ttc" id="RaspiGPS_8c_html_a76aa58352d6931fff1dc1c0e375f774b"><div class="ttname"><a href="../../d1/d54/RaspiGPS_8c.html#a76aa58352d6931fff1dc1c0e375f774b">raspi_gps_setup</a></div><div class="ttdeci">int raspi_gps_setup(int verbose)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d54/RaspiGPS_8c_source.html#l00136">RaspiGPS.c:136</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a8595bdfe6cd5994e530daf90e64b65cf"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a8595bdfe6cd5994e530daf90e64b65cf">RASPIVID_STATE_S::raw_output</a></div><div class="ttdeci">int raw_output</div><div class="ttdoc">filename of inline Motion Vectors output </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00215">RaspiVid.c:215</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_acf7e629206ab7e747722cc37215acd23"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#acf7e629206ab7e747722cc37215acd23">RASPIVID_STATE_S::preview_parameters</a></div><div class="ttdeci">RASPIPREVIEW_PARAMETERS preview_parameters</div><div class="ttdoc">Switch if user wants splited files. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00195">RaspiVid.c:195</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_ac59cf37c04e39d7082b889020f2613a5"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#ac59cf37c04e39d7082b889020f2613a5">RASPIVID_STATE_S::raw_filename</a></div><div class="ttdeci">char * raw_filename</div><div class="ttdoc">The raw video format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00217">RaspiVid.c:217</a></div></div>
<div class="ttc" id="RaspiCamControl_8c_html_a65a8c22cd83559eb1d17d43f9a8f575a"><div class="ttname"><a href="../../db/de2/RaspiCamControl_8c.html#a65a8c22cd83559eb1d17d43f9a8f575a">raspicamcontrol_cycle_test</a></div><div class="ttdeci">int raspicamcontrol_cycle_test(MMAL_COMPONENT_T *camera)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/RaspiCamControl_8c_source.html#l00267">RaspiCamControl.c:267</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a92548058431dd263c21965f6777ccc81"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a92548058431dd263c21965f6777ccc81">PORT_USERDATA::file_handle</a></div><div class="ttdeci">FILE * file_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d37/RaspiStill_8c_source.html#l00168">RaspiStill.c:168</a></div></div>
<div class="ttc" id="vcos__thread_8h_html_a0a8ff046abbe0114d9bd85c46d642ad4"><div class="ttname"><a href="../../de/d30/vcos__thread_8h.html#a0a8ff046abbe0114d9bd85c46d642ad4">vcos_sleep</a></div><div class="ttdeci">VCOS_INLINE_DECL void vcos_sleep(uint32_t ms)</div><div class="ttdoc">Sleep a while. </div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_ab3a79dc300a9b77bc6cb40cf6f168954"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#ab3a79dc300a9b77bc6cb40cf6f168954">RASPIVID_STATE_S::demoMode</a></div><div class="ttdeci">int demoMode</div><div class="ttdoc">Insert inline headers to stream (SPS, PPS) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00178">RaspiVid.c:178</a></div></div>
<div class="ttc" id="structMMAL__BUFFER__HEADER__T_html"><div class="ttname"><a href="../../dd/d88/structMMAL__BUFFER__HEADER__T.html">MMAL_BUFFER_HEADER_T</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/mmal__buffer_8h_source.html#l00069">mmal_buffer.h:69</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_aba026017af34f7a4fd9134418b65ba7d"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#aba026017af34f7a4fd9134418b65ba7d">PORT_USERDATA::iframe_buff_wpos</a></div><div class="ttdeci">int iframe_buff_wpos</div><div class="ttdoc">buffer of iframe pointers </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00147">RaspiVid.c:147</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_aaecb2ce8643ede812673d1dbc4cb7f62"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#aaecb2ce8643ede812673d1dbc4cb7f62">RASPIVID_STATE_S::splitWait</a></div><div class="ttdeci">int splitWait</div><div class="ttdoc">Split at next possible i-frame if set to 1. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00193">RaspiVid.c:193</a></div></div>
<div class="ttc" id="group__MmalQueue_html_ga710521f92c381a4ad9cfb620f0117456"><div class="ttname"><a href="../../d8/d82/group__MmalQueue.html#ga710521f92c381a4ad9cfb620f0117456">mmal_queue_length</a></div><div class="ttdeci">unsigned int mmal_queue_length(MMAL_QUEUE_T *queue)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd6/mmal__queue_8c_source.html#l00184">mmal_queue.c:184</a></div></div>
<div class="ttc" id="group__MmalTypes_html_gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01"><div class="ttname"><a href="../../df/d8f/group__MmalTypes.html#gga5ac87230bd615d2b154a9d5899bc37fda7153bc059a7a5311344972b566400c01">MMAL_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df3/mmal__types_8h_source.html#l00048">mmal_types.h:48</a></div></div>
<div class="ttc" id="RaspiHelpers_8c_html_a293de76f9ccf60623b116623ef1b4a43"><div class="ttname"><a href="../../d4/d88/RaspiHelpers_8c.html#a293de76f9ccf60623b116623ef1b4a43">check_disable_port</a></div><div class="ttdeci">void check_disable_port(MMAL_PORT_T *port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d88/RaspiHelpers_8c_source.html#l00187">RaspiHelpers.c:187</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a6bd31de01efd3b023a580b46aaedd227"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a6bd31de01efd3b023a580b46aaedd227">RASPIVID_STATE_S::save_pts</a></div><div class="ttdeci">int save_pts</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00221">RaspiVid.c:221</a></div></div>
<div class="ttc" id="group__MmalComponent_html_ga9477827891cb5a2a5c77fb23dd4ea7d9"><div class="ttname"><a href="../../df/db6/group__MmalComponent.html#ga9477827891cb5a2a5c77fb23dd4ea7d9">mmal_component_disable</a></div><div class="ttdeci">MMAL_STATUS_T mmal_component_disable(MMAL_COMPONENT_T *component)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db8/mmal__component_8c_source.html#l00406">mmal_component.c:406</a></div></div>
<div class="ttc" id="RaspiVid_8c_html_a425be5f49e9c31d8d13d53190a3e7bc2a0e94daf6c277a432256d2618bd221732"><div class="ttname"><a href="../../d7/d0c/RaspiVid_8c.html#a425be5f49e9c31d8d13d53190a3e7bc2a0e94daf6c277a432256d2618bd221732">WAIT_METHOD_KEYPRESS</a></div><div class="ttdoc">Cycle between capture and pause for times specified. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00125">RaspiVid.c:125</a></div></div>
<div class="ttc" id="RaspiHelpers_8c_html_aa87c4615df7c3a098e34fc13bf943e22"><div class="ttname"><a href="../../d4/d88/RaspiHelpers_8c.html#aa87c4615df7c3a098e34fc13bf943e22">get_app_name</a></div><div class="ttdeci">const char * get_app_name()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d88/RaspiHelpers_8c_source.html#l00150">RaspiHelpers.c:150</a></div></div>
<div class="ttc" id="structMMAL__COMPONENT__T_html_a43e3adc8e7b262a35c0fd806f9cf8701"><div class="ttname"><a href="../../d3/d4e/structMMAL__COMPONENT__T.html#a43e3adc8e7b262a35c0fd806f9cf8701">MMAL_COMPONENT_T::output</a></div><div class="ttdeci">MMAL_PORT_T ** output</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d65/mmal__component_8h_source.html#l00073">mmal_component.h:73</a></div></div>
<div class="ttc" id="glext_8h_html_a5cae8ef70015fb2c8d5355c136e7d760"><div class="ttname"><a href="../../dc/dd2/glext_8h.html#a5cae8ef70015fb2c8d5355c136e7d760">q</a></div><div class="ttdeci">GLfixed GLfixed GLfixed GLfixed q</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd2/glext_8h_source.html#l00677">glext.h:677</a></div></div>
<div class="ttc" id="structRASPICOMMONSETTINGS__PARAMETERS_html_a842681e910892f6f7324ec8b52c63357"><div class="ttname"><a href="../../d1/d90/structRASPICOMMONSETTINGS__PARAMETERS.html#a842681e910892f6f7324ec8b52c63357">RASPICOMMONSETTINGS_PARAMETERS::verbose</a></div><div class="ttdeci">int verbose</div><div class="ttdoc">Sensor mode. 0=auto. Check docs/forum for modes selected by other values. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4c/RaspiCommonSettings_8h_source.html#l00049">RaspiCommonSettings.h:49</a></div></div>
<div class="ttc" id="bcm__host_8c_html_a025ab636eab15ab5dd55860ee86e0b5f"><div class="ttname"><a href="../../d3/d2b/bcm__host_8c.html#a025ab636eab15ab5dd55860ee86e0b5f">bcm_host_init</a></div><div class="ttdeci">void bcm_host_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2b/bcm__host_8c_source.html#l00084">bcm_host.c:84</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_abc0c80f0ede485200ad604694c70e8c1"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#abc0c80f0ede485200ad604694c70e8c1">RASPIVID_STATE_S::preview_connection</a></div><div class="ttdeci">MMAL_CONNECTION_T * preview_connection</div><div class="ttdoc">Pointer to the encoder component. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00201">RaspiVid.c:201</a></div></div>
<div class="ttc" id="structRASPIPREVIEW__PARAMETERS_html_aee58de3247e16541613b4605e0c3ff42"><div class="ttname"><a href="../../d4/d5d/structRASPIPREVIEW__PARAMETERS.html#aee58de3247e16541613b4605e0c3ff42">RASPIPREVIEW_PARAMETERS::wantPreview</a></div><div class="ttdeci">int wantPreview</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d05/RaspiPreview_8h_source.html#l00053">RaspiPreview.h:53</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a24ff42b5e60a0f4fe15bfe1eeaee8ca7"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a24ff42b5e60a0f4fe15bfe1eeaee8ca7">RASPIVID_STATE_S::demoInterval</a></div><div class="ttdeci">int demoInterval</div><div class="ttdoc">Run app in demo mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00179">RaspiVid.c:179</a></div></div>
<div class="ttc" id="mmal__util__params_8c_html_aba9fe4904a386eaa681c7bdbbcf93023"><div class="ttname"><a href="../../db/d48/mmal__util__params_8c.html#aba9fe4904a386eaa681c7bdbbcf93023">mmal_port_parameter_set_boolean</a></div><div class="ttdeci">MMAL_STATUS_T mmal_port_parameter_set_boolean(MMAL_PORT_T *port, uint32_t id, MMAL_BOOL_T value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d48/mmal__util__params_8c_source.html#l00031">mmal_util_params.c:31</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a785784937dac150c340b4282cb42609e"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a785784937dac150c340b4282cb42609e">PORT_USERDATA::iframe_buff_rpos</a></div><div class="ttdeci">int iframe_buff_rpos</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00148">RaspiVid.c:148</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a19052bcbf6272ae21267ebaa1907f1a3"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a19052bcbf6272ae21267ebaa1907f1a3">PORT_USERDATA::cb_wptr</a></div><div class="ttdeci">int cb_wptr</div><div class="ttdoc">Length of buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00142">RaspiVid.c:142</a></div></div>
<div class="ttc" id="group__MMAL__PARAMETER__IDS_html_gga173f34c053cf8ba70e5f775cd03196f4acb16f28ca423bad20069218b2e32b1d3"><div class="ttname"><a href="../../df/d90/group__MMAL__PARAMETER__IDS.html#gga173f34c053cf8ba70e5f775cd03196f4acb16f28ca423bad20069218b2e32b1d3">MMAL_PARAMETER_VIDEO_REQUEST_I_FRAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d76/mmal__parameters__video_8h_source.html#l00054">mmal_parameters_video.h:54</a></div></div>
<div class="ttc" id="structRASPIVID__STATE__S_html_a41aec3c40ad049caa75a4ce94f968043"><div class="ttname"><a href="../../d1/d90/structRASPIVID__STATE__S.html#a41aec3c40ad049caa75a4ce94f968043">RASPIVID_STATE_S::bitrate</a></div><div class="ttdeci">int bitrate</div><div class="ttdoc">Requested codec video encoding (MJPEG or H264) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00173">RaspiVid.c:173</a></div></div>
<div class="ttc" id="group__MmalQueue_html_gae03a53a1cba809a9c42fefe1af835932"><div class="ttname"><a href="../../d8/d82/group__MmalQueue.html#gae03a53a1cba809a9c42fefe1af835932">mmal_queue_get</a></div><div class="ttdeci">MMAL_BUFFER_HEADER_T * mmal_queue_get(MMAL_QUEUE_T *queue)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd6/mmal__queue_8c_source.html#l00150">mmal_queue.c:150</a></div></div>
<div class="ttc" id="group__MMAL__PARAMETER__IDS_html_gga16db4876b192da08f3ad0cb41afe516fa7d63afa317c4adc763a80fff17d9a6e8"><div class="ttname"><a href="../../df/d90/group__MMAL__PARAMETER__IDS.html#gga16db4876b192da08f3ad0cb41afe516fa7d63afa317c4adc763a80fff17d9a6e8">MMAL_PARAMETER_CAPTURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/mmal__parameters__camera_8h_source.html#l00070">mmal_parameters_camera.h:70</a></div></div>
<div class="ttc" id="eglext_8h_html_a769ee876630087de1b07d78b25dcecea"><div class="ttname"><a href="../../d3/dda/eglext_8h.html#a769ee876630087de1b07d78b25dcecea">buffer</a></div><div class="ttdeci">EGLContext EGLenum EGLClientBuffer buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/eglext_8h_source.html#l00092">eglext.h:92</a></div></div>
<div class="ttc" id="RaspiCamControl_8c_html_a6f2166444b5f3ae0eebddeb252a5d955"><div class="ttname"><a href="../../db/de2/RaspiCamControl_8c.html#a6f2166444b5f3ae0eebddeb252a5d955">raspicamcontrol_check_configuration</a></div><div class="ttdeci">void raspicamcontrol_check_configuration(int min_gpu_mem)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/RaspiCamControl_8c_source.html#l01773">RaspiCamControl.c:1773</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a0ec8bbbe585bf6956c2632745ab44a3d"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a0ec8bbbe585bf6956c2632745ab44a3d">PORT_USERDATA::pts_file_handle</a></div><div class="ttdeci">FILE * pts_file_handle</div><div class="ttdoc">Set to 1 in callback if an error occurs to attempt to abort the capture. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00154">RaspiVid.c:154</a></div></div>
<div class="ttc" id="structPORT__USERDATA_html_a56a02c7303cc0e17bf0cdf81bcb8ee1b"><div class="ttname"><a href="../../d2/dbc/structPORT__USERDATA.html#a56a02c7303cc0e17bf0cdf81bcb8ee1b">PORT_USERDATA::cb_wrap</a></div><div class="ttdeci">int cb_wrap</div><div class="ttdoc">Current write pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0c/RaspiVid_8c_source.html#l00143">RaspiVid.c:143</a></div></div>
<div class="ttc" id="RaspiHelpers_8c_html_acfab552079d093f29033596575fe69ad"><div class="ttname"><a href="../../d4/d88/RaspiHelpers_8c.html#acfab552079d093f29033596575fe69ad">connect_ports</a></div><div class="ttdeci">MMAL_STATUS_T connect_ports(MMAL_PORT_T *output_port, MMAL_PORT_T *input_port, MMAL_CONNECTION_T **connection)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d88/RaspiHelpers_8c_source.html#l00165">RaspiHelpers.c:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a88469a10b5094c869d47b8e7b06f49e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88469a10b5094c869d47b8e7b06f49e5">&#9670;&nbsp;</a></span>ABORT_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int ABORT_INTERVAL = 100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interval at which we check for an failure abort during capture. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00116">116</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a8444d6e0dfe2bbab0b5e7b24308f1559"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8444d6e0dfe2bbab0b5e7b24308f1559">&#9670;&nbsp;</a></span>description</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* description</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00352">352</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a389a009f43533b11405c4a018daa835f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a389a009f43533b11405c4a018daa835f">&#9670;&nbsp;</a></span>MAX_BITRATE_LEVEL4</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int MAX_BITRATE_LEVEL4 = 25000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00112">112</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a3bdf7f8527d7b753933ed1d1a8bdb795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bdf7f8527d7b753933ed1d1a8bdb795">&#9670;&nbsp;</a></span>MAX_BITRATE_LEVEL42</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int MAX_BITRATE_LEVEL42 = 62500000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00113">113</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="a1b19283dd3e4c79e378ec15ebe507acb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b19283dd3e4c79e378ec15ebe507acb">&#9670;&nbsp;</a></span>MAX_BITRATE_MJPEG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int MAX_BITRATE_MJPEG = 25000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00111">111</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
<a id="af1bdd26d41acc2c86525f5b60c5fda5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1bdd26d41acc2c86525f5b60c5fda5c">&#9670;&nbsp;</a></span>nextWaitMethod</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nextWaitMethod</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html#l00353">353</a> of file <a class="el" href="../../d7/d0c/RaspiVid_8c_source.html">RaspiVid.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
