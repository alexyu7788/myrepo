<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VideoCore Library: interface/vmcs_host/linux/vcfilesys.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VideoCore Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b31d54d5631803016a26f28213a41162.html">interface</a></li><li class="navelem"><a class="el" href="../../dir_20740d89f0edeac1052148d2d39864ca.html">vmcs_host</a></li><li class="navelem"><a class="el" href="../../dir_a594d1b0c042b06982dea68ea212f77b.html">linux</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">vcfilesys.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/statfs.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d4/de3/vcos_8h_source.html">interface/vcos/vcos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d54/vcfilesys__defs_8h_source.html">vcfilesys_defs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d5e/vchost_8h_source.html">vchost.h</a>&quot;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d1d/vc__fileservice__defs_8h_source.html">vc_fileservice_defs.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for vcfilesys.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/dd7/vcfilesys_8c__incl.png" border="0" usemap="#interface_2vmcs__host_2linux_2vcfilesys_8c" alt=""/></div>
<map name="interface_2vmcs__host_2linux_2vcfilesys_8c" id="interface_2vmcs__host_2linux_2vcfilesys_8c">
<area shape="rect" id="node14" href="../../d4/de3/vcos_8h.html" title="interface/vcos/vcos.h" alt="" coords="1357,259,1504,285"/>
<area shape="rect" id="node45" href="../../d6/d54/vcfilesys__defs_8h.html" title="vcfilesys_defs.h" alt="" coords="2379,177,2496,203"/>
<area shape="rect" id="node46" href="../../d2/d5e/vchost_8h.html" title="vchost.h" alt="" coords="2319,95,2391,121"/>
<area shape="rect" id="node48" href="../../d1/d1d/vc__fileservice__defs_8h.html" title="interface/vmcs_host\l/vc_fileservice_defs.h" alt="" coords="2520,169,2669,211"/>
<area shape="rect" id="node15" href="../../d6/db4/vcos__assert_8h.html" title="interface/vcos/vcos\l_assert.h" alt="" coords="403,333,539,375"/>
<area shape="rect" id="node16" href="../../da/df3/vcos__types_8h.html" title="interface/vcos/vcos\l_types.h" alt="" coords="1112,512,1248,553"/>
<area shape="rect" id="node20" href="../../db/db8/vcos__platform_8h.html" title="vcos_platform.h" alt="" coords="2344,341,2459,367"/>
<area shape="rect" id="node32" href="../../d0/d84/vcos__init_8h.html" title="interface/vcos/vcos\l_init.h" alt="" coords="563,333,699,375"/>
<area shape="rect" id="node33" href="../../d2/dc2/vcos__semaphore_8h.html" title="interface/vcos/vcos\l_semaphore.h" alt="" coords="723,333,859,375"/>
<area shape="rect" id="node34" href="../../de/d30/vcos__thread_8h.html" title="interface/vcos/vcos\l_thread.h" alt="" coords="883,333,1019,375"/>
<area shape="rect" id="node35" href="../../da/d1b/vcos__mutex_8h.html" title="interface/vcos/vcos\l_mutex.h" alt="" coords="1043,333,1179,375"/>
<area shape="rect" id="node36" href="../../d8/db9/vcos__mem_8h.html" title="interface/vcos/vcos\l_mem.h" alt="" coords="1203,333,1339,375"/>
<area shape="rect" id="node37" href="../../d0/d85/vcos__logging_8h.html" title="interface/vcos/vcos\l_logging.h" alt="" coords="1363,333,1499,375"/>
<area shape="rect" id="node38" href="../../d1/d77/vcos__string_8h.html" title="interface/vcos/vcos\l_string.h" alt="" coords="192,333,328,375"/>
<area shape="rect" id="node39" href="../../dc/dd7/vcos__event_8h.html" title="interface/vcos/vcos\l_event.h" alt="" coords="1523,333,1659,375"/>
<area shape="rect" id="node40" href="../../d1/d6d/vcos__thread__attr_8h.html" title="interface/vcos/vcos\l_thread_attr.h" alt="" coords="2483,333,2619,375"/>
<area shape="rect" id="node41" href="../../dc/d07/vcos__tls_8h.html" title="interface/vcos/vcos\l_tls.h" alt="" coords="1683,333,1819,375"/>
<area shape="rect" id="node42" href="../../d6/da9/vcos__reentrant__mutex_8h.html" title="interface/vcos/vcos\l_reentrant_mutex.h" alt="" coords="1843,333,1979,375"/>
<area shape="rect" id="node43" href="../../d6/d00/vcos__named__semaphore_8h.html" title="interface/vcos/vcos\l_named_semaphore.h" alt="" coords="2003,333,2154,375"/>
<area shape="rect" id="node44" href="../../dd/dc6/vcos__quickslow__mutex_8h.html" title="interface/vcos/vcos\l_quickslow_mutex.h" alt="" coords="2179,333,2320,375"/>
<area shape="rect" id="node18" href="../../d2/d69/vcos__platform__types_8h.html" title="vcos_platform_types.h" alt="" coords="1019,609,1173,635"/>
<area shape="rect" id="node19" href="../../df/d5a/vcos__attr_8h.html" title="interface/vcos/vcos\l_attr.h" alt="" coords="1197,601,1333,643"/>
<area shape="rect" id="node28" href="../../d9/d48/dlfcn_8h.html" title="dlfcn.h" alt="" coords="2552,430,2613,457"/>
<area shape="rect" id="node29" href="../../d2/d73/vcos__generic__event__flags_8h.html" title="interface/vcos/generic\l/vcos_generic_event_flags.h" alt="" coords="1471,423,1659,464"/>
<area shape="rect" id="node30" href="../../d3/d22/vcos__generic__blockpool_8h.html" title="interface/vcos/generic\l/vcos_generic_blockpool.h" alt="" coords="1684,423,1860,464"/>
<area shape="rect" id="node31" href="../../d1/d7f/vcos__mem__from__malloc_8h.html" title="interface/vcos/generic\l/vcos_mem_from_malloc.h" alt="" coords="2637,423,2816,464"/>
<area shape="rect" id="node47" href="../../dc/d2e/vchost__platform__config_8h.html" title="vchost_platform_config.h" alt="" coords="2187,177,2355,203"/>
<area shape="rect" id="node49" href="../../d7/dcd/vchi_8h.html" title="interface/vchi/vchi.h" alt="" coords="1884,177,2023,203"/>
</map>
</div>
</div>
<p><a href="../../d3/d1e/vcfilesys_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dd8/structfs__dir.html">fs_dir</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d57/structfile__info__t.html">file_info_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0c35674425ccbeb9a3b5d5f96e619fb4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a0c35674425ccbeb9a3b5d5f96e619fb4">VCOS_LOG_CATEGORY</a>&#160;&#160;&#160;(&amp;<a class="el" href="../../d3/d1e/vcfilesys_8c.html#acf7010bd882e246e4a8f5965751806a9">hostfs_log_cat</a>)</td></tr>
<tr class="separator:a0c35674425ccbeb9a3b5d5f96e619fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cdbd4d0545340d33dfe595811475ccd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a0cdbd4d0545340d33dfe595811475ccd">_LARGEFILE_SOURCE</a></td></tr>
<tr class="separator:a0cdbd4d0545340d33dfe595811475ccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e6d20c5075b52b0f0bc4858d51c8591"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a0e6d20c5075b52b0f0bc4858d51c8591">_LARGEFILE64_SOURCE</a></td></tr>
<tr class="separator:a0e6d20c5075b52b0f0bc4858d51c8591"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d01ba0a136b8e27ad362f5a823d14e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a44d01ba0a136b8e27ad362f5a823d14e">_FILE_OFFSET_BITS</a>&#160;&#160;&#160;64    /* So we get lseek and lseek64 */</td></tr>
<tr class="separator:a44d01ba0a136b8e27ad362f5a823d14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89957e9be80ef12a50eb4eca72ecd888"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a89957e9be80ef12a50eb4eca72ecd888">dirent</a>&#160;&#160;&#160;fs_dirent</td></tr>
<tr class="separator:a89957e9be80ef12a50eb4eca72ecd888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7210d3e4f1de67fc1405d2f9fb06b61"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(...)&#160;&#160;&#160;vcos_log_info(__VA_ARGS__)</td></tr>
<tr class="separator:af7210d3e4f1de67fc1405d2f9fb06b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d77a1c7dd2d2b94f0cbb3a8256d31c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#ae8d77a1c7dd2d2b94f0cbb3a8256d31c">DEBUG_MAJOR</a>(...)&#160;&#160;&#160;vcos_log_warn(__VA_ARGS__)</td></tr>
<tr class="separator:ae8d77a1c7dd2d2b94f0cbb3a8256d31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a844bb537de020cf38d7ad043527bd876"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a844bb537de020cf38d7ad043527bd876">FILE_INFO_TABLE_CHUNK_LEN</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:a844bb537de020cf38d7ad043527bd876"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adee37db2c4a7fe7cb517d855cbcfc2fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#adee37db2c4a7fe7cb517d855cbcfc2fd">vc_hostfs_init</a> (<a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>)</td></tr>
<tr class="separator:adee37db2c4a7fe7cb517d855cbcfc2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20eccb20f5b38de44db4471f424beb7d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a20eccb20f5b38de44db4471f424beb7d">vc_hostfs_exit</a> (<a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>)</td></tr>
<tr class="separator:a20eccb20f5b38de44db4471f424beb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabddb465ea7a2de83305a8fdc34b6f50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#aabddb465ea7a2de83305a8fdc34b6f50">vc_hostfs_close</a> (int fildes)</td></tr>
<tr class="separator:aabddb465ea7a2de83305a8fdc34b6f50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae88fc5cf88e48968337fc0968b7a92dd"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#ae88fc5cf88e48968337fc0968b7a92dd">vc_hostfs_lseek</a> (int fildes, long <a class="el" href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a>, int whence)</td></tr>
<tr class="separator:ae88fc5cf88e48968337fc0968b7a92dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae50d9deccc1c180763ddd887f68e05ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#ae50d9deccc1c180763ddd887f68e05ec">vc_hostfs_lseek64</a> (int fildes, <a class="el" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> <a class="el" href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a>, int whence)</td></tr>
<tr class="separator:ae50d9deccc1c180763ddd887f68e05ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66aa8ab3684364253345daddcd5a9919"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a66aa8ab3684364253345daddcd5a9919">vc_hostfs_open</a> (const char *inPath, int vc_oflag)</td></tr>
<tr class="separator:a66aa8ab3684364253345daddcd5a9919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34c5e04cddbd316291a28fcfe90f0fee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a34c5e04cddbd316291a28fcfe90f0fee">vc_hostfs_read</a> (int fildes, <a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *buf, unsigned int nbyte)</td></tr>
<tr class="separator:a34c5e04cddbd316291a28fcfe90f0fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12480f61de59a8d5047f7ecbbc64cbcd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a12480f61de59a8d5047f7ecbbc64cbcd">vc_hostfs_write</a> (int fildes, const <a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *buf, unsigned int nbyte)</td></tr>
<tr class="separator:a12480f61de59a8d5047f7ecbbc64cbcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bf4c9fc66bff20c4d0f51a8c5f25060"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a1bf4c9fc66bff20c4d0f51a8c5f25060">vc_hostfs_closedir</a> (<a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *dhandle)</td></tr>
<tr class="separator:a1bf4c9fc66bff20c4d0f51a8c5f25060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee7f5db0217035cb1762bba15267f0a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a2ee7f5db0217035cb1762bba15267f0a">vc_hostfs_format</a> (const char *path)</td></tr>
<tr class="separator:a2ee7f5db0217035cb1762bba15267f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae782e71ffa4c70ebfeef853b02e19313"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#ae782e71ffa4c70ebfeef853b02e19313">vc_hostfs_freespace</a> (const char *inPath)</td></tr>
<tr class="separator:ae782e71ffa4c70ebfeef853b02e19313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c351387bd7a756343ab4e441c3a1367"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a4c351387bd7a756343ab4e441c3a1367">vc_hostfs_freespace64</a> (const char *inPath)</td></tr>
<tr class="separator:a4c351387bd7a756343ab4e441c3a1367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00416ad45efd91101cb937f447248285"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a00416ad45efd91101cb937f447248285">vc_hostfs_get_attr</a> (const char *path, <a class="el" href="../../d6/d54/vcfilesys__defs_8h.html#af6013c06a60b4d2ff82417ca0d582dae">fattributes_t</a> *attr)</td></tr>
<tr class="separator:a00416ad45efd91101cb937f447248285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab91c9e3ba59ce582898ff922939390f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#ab91c9e3ba59ce582898ff922939390f0">vc_hostfs_mkdir</a> (const char *path)</td></tr>
<tr class="separator:ab91c9e3ba59ce582898ff922939390f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5700d8df395f468ab235e5ca81d8ba3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a5700d8df395f468ab235e5ca81d8ba3a">vc_hostfs_opendir</a> (const char *dirname)</td></tr>
<tr class="separator:a5700d8df395f468ab235e5ca81d8ba3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adec3f56e032355daa0b3072dcca1c57b"><td class="memItemLeft" align="right" valign="top">struct fs_dirent *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#adec3f56e032355daa0b3072dcca1c57b">vc_hostfs_readdir_r</a> (<a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *dhandle, struct fs_dirent *result)</td></tr>
<tr class="separator:adec3f56e032355daa0b3072dcca1c57b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1878763bc93e39679d819a25922ec5b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a1878763bc93e39679d819a25922ec5b8">vc_hostfs_remove</a> (const char *path)</td></tr>
<tr class="separator:a1878763bc93e39679d819a25922ec5b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19c2201655bee7c398da6a2f2bedf6d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a19c2201655bee7c398da6a2f2bedf6d8">vc_hostfs_rename</a> (const char *old, const char *new)</td></tr>
<tr class="separator:a19c2201655bee7c398da6a2f2bedf6d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08022a67cfdb0536766fd775695ce203"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a08022a67cfdb0536766fd775695ce203">vc_hostfs_set_attr</a> (const char *path, <a class="el" href="../../d6/d54/vcfilesys__defs_8h.html#af6013c06a60b4d2ff82417ca0d582dae">fattributes_t</a> attr)</td></tr>
<tr class="separator:a08022a67cfdb0536766fd775695ce203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76ca1fd7f17f5f0fb1a42e01ee8dca30"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a76ca1fd7f17f5f0fb1a42e01ee8dca30">vc_hostfs_setend</a> (int filedes)</td></tr>
<tr class="separator:a76ca1fd7f17f5f0fb1a42e01ee8dca30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4906631c1f244994ed0a6dd0161fcb6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#aa4906631c1f244994ed0a6dd0161fcb6">vc_hostfs_totalspace64</a> (const char *inPath)</td></tr>
<tr class="separator:aa4906631c1f244994ed0a6dd0161fcb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3bd2b20f3971061a354c3ae27c0df96"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#ab3bd2b20f3971061a354c3ae27c0df96">vc_hostfs_totalspace</a> (const char *inPath)</td></tr>
<tr class="separator:ab3bd2b20f3971061a354c3ae27c0df96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44d0ddd66bc12da8463acbdad81d0f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#ae44d0ddd66bc12da8463acbdad81d0f0">vc_hostfs_scandisk</a> (const char *path)</td></tr>
<tr class="separator:ae44d0ddd66bc12da8463acbdad81d0f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d468fddcc048d83eb509ac5941fe107"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#a9d468fddcc048d83eb509ac5941fe107">vc_hostfs_chkdsk</a> (const char *path, int fix_errors)</td></tr>
<tr class="separator:a9d468fddcc048d83eb509ac5941fe107"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acf7010bd882e246e4a8f5965751806a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d05/structVCOS__LOG__CAT__T.html">VCOS_LOG_CAT_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/vcfilesys_8c.html#acf7010bd882e246e4a8f5965751806a9">hostfs_log_cat</a></td></tr>
<tr class="separator:acf7010bd882e246e4a8f5965751806a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a44d01ba0a136b8e27ad362f5a823d14e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44d01ba0a136b8e27ad362f5a823d14e">&#9670;&nbsp;</a></span>_FILE_OFFSET_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _FILE_OFFSET_BITS&#160;&#160;&#160;64    /* So we get lseek and lseek64 */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00036">36</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

</div>
</div>
<a id="a0e6d20c5075b52b0f0bc4858d51c8591"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e6d20c5075b52b0f0bc4858d51c8591">&#9670;&nbsp;</a></span>_LARGEFILE64_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _LARGEFILE64_SOURCE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00034">34</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

</div>
</div>
<a id="a0cdbd4d0545340d33dfe595811475ccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cdbd4d0545340d33dfe595811475ccd">&#9670;&nbsp;</a></span>_LARGEFILE_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _LARGEFILE_SOURCE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00031">31</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

</div>
</div>
<a id="ae8d77a1c7dd2d2b94f0cbb3a8256d31c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8d77a1c7dd2d2b94f0cbb3a8256d31c">&#9670;&nbsp;</a></span>DEBUG_MAJOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_MAJOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td>&#160;&#160;&#160;vcos_log_warn(__VA_ARGS__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00080">80</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

</div>
</div>
<a id="af7210d3e4f1de67fc1405d2f9fb06b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7210d3e4f1de67fc1405d2f9fb06b61">&#9670;&nbsp;</a></span>DEBUG_MINOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_MINOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td>&#160;&#160;&#160;vcos_log_info(__VA_ARGS__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">79</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00194">vc_hostfs_close()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00501">vc_hostfs_closedir()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00534">vc_hostfs_format()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00636">vc_hostfs_get_attr()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00139">vc_hostfs_init()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00244">vc_hostfs_lseek64()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00677">vc_hostfs_mkdir()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00702">vc_hostfs_opendir()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00765">vc_hostfs_readdir_r()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00833">vc_hostfs_remove()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00869">vc_hostfs_rename()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00910">vc_hostfs_set_attr()</a>, and <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00479">vc_hostfs_write()</a>.</p>

</div>
</div>
<a id="a89957e9be80ef12a50eb4eca72ecd888"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89957e9be80ef12a50eb4eca72ecd888">&#9670;&nbsp;</a></span>dirent</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="../../d5/de2/structdirent.html">dirent</a>&#160;&#160;&#160;fs_dirent</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00059">59</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

</div>
</div>
<a id="a844bb537de020cf38d7ad043527bd876"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a844bb537de020cf38d7ad043527bd876">&#9670;&nbsp;</a></span>FILE_INFO_TABLE_CHUNK_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILE_INFO_TABLE_CHUNK_LEN&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00106">106</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00139">vc_hostfs_init()</a>.</p>

</div>
</div>
<a id="a0c35674425ccbeb9a3b5d5f96e619fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c35674425ccbeb9a3b5d5f96e619fb4">&#9670;&nbsp;</a></span>VCOS_LOG_CATEGORY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VCOS_LOG_CATEGORY&#160;&#160;&#160;(&amp;<a class="el" href="../../d3/d1e/vcfilesys_8c.html#acf7010bd882e246e4a8f5965751806a9">hostfs_log_cat</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00028">28</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9d468fddcc048d83eb509ac5941fe107"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d468fddcc048d83eb509ac5941fe107">&#9670;&nbsp;</a></span>vc_hostfs_chkdsk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_chkdsk </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fix_errors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l01125">1125</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void()</a>.</p>
<div class="fragment"><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;{</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   (<a class="code" href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void</a>)path;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   (<a class="code" href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void</a>)fix_errors;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div><div class="ttc" id="eglext__brcm_8h_html_a945373f4c12ae7542efba318e07a2c45"><div class="ttname"><a href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void</a></div><div class="ttdeci">typedef void(EGLAPIENTRYP PFNEGLCREATEGLOBALIMAGEBRCMPROC)(EGLint width</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aabddb465ea7a2de83305a8fdc34b6f50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabddb465ea7a2de83305a8fdc34b6f50">&#9670;&nbsp;</a></span>vc_hostfs_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fildes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00194">194</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_close(%d)&quot;</span>, fildes);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordflow">return</span> close(fildes);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1bf4c9fc66bff20c4d0f51a8c5f25060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bf4c9fc66bff20c4d0f51a8c5f25060">&#9670;&nbsp;</a></span>vc_hostfs_closedir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_closedir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *&#160;</td>
          <td class="paramname"><em>dhandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00501">501</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00088">fs_dir::dhandle</a>, <a class="el" href="../../d5/d5f/khrn__misc_8h_source.html#l00133">NULL</a>, and <a class="el" href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void()</a>.</p>
<div class="fragment"><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;{</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dd8/structfs__dir.html">fs_dir</a> *fsdir = (<span class="keyword">struct </span><a class="code" href="../../d8/dd8/structfs__dir.html">fs_dir</a> *)<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <span class="keywordtype">int</span> ret = -1;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_closedir(%p)&quot;</span>, <a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a> );</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a> &amp;&amp; fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a>)</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      (<a class="code" href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void</a>)closedir(fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a>);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a> = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      free(fsdir);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      ret = 0;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div><div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structfs__dir_html_ad61ae9d4ad30844f410685a9c1295b8b"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">fs_dir::dhandle</a></div><div class="ttdeci">DIR * dhandle</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00088">vcfilesys.c:88</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="eglext__brcm_8h_html_a945373f4c12ae7542efba318e07a2c45"><div class="ttname"><a href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void</a></div><div class="ttdeci">typedef void(EGLAPIENTRYP PFNEGLCREATEGLOBALIMAGEBRCMPROC)(EGLint width</div></div>
<div class="ttc" id="structfs__dir_html"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html">fs_dir</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00086">vcfilesys.c:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20eccb20f5b38de44db4471f424beb7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20eccb20f5b38de44db4471f424beb7d">&#9670;&nbsp;</a></span>vc_hostfs_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> vc_hostfs_exit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Terminate this library. Clean up resources. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00169">169</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d5f/khrn__misc_8h_source.html#l00133">NULL</a>, and <a class="el" href="../../d1/d3a/vcos__logcat_8c_source.html#l00449">vcos_log_unregister()</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;{</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <a class="code" href="../../d1/d3a/vcos__logcat_8c.html#af63ce8b4a11e51a8f5919251ece2e4cb">vcos_log_unregister</a>(&amp;<a class="code" href="../../d3/d1e/vcfilesys_8c.html#acf7010bd882e246e4a8f5965751806a9">hostfs_log_cat</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keywordflow">if</span> (p_file_info_table)</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      free(p_file_info_table);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      p_file_info_table = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_acf7010bd882e246e4a8f5965751806a9"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#acf7010bd882e246e4a8f5965751806a9">hostfs_log_cat</a></div><div class="ttdeci">VCOS_LOG_CAT_T hostfs_log_cat</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00068">vcfilesys.c:68</a></div></div>
<div class="ttc" id="vcos__logcat_8c_html_af63ce8b4a11e51a8f5919251ece2e4cb"><div class="ttname"><a href="../../d1/d3a/vcos__logcat_8c.html#af63ce8b4a11e51a8f5919251ece2e4cb">vcos_log_unregister</a></div><div class="ttdeci">void vcos_log_unregister(VCOS_LOG_CAT_T *category)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3a/vcos__logcat_8c_source.html#l00449">vcos_logcat.c:449</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ee7f5db0217035cb1762bba15267f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ee7f5db0217035cb1762bba15267f0a">&#9670;&nbsp;</a></span>vc_hostfs_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_format </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00534">534</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>.</p>
<div class="fragment"><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;{</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_format: &#39;%s&#39; not implemented&quot;</span>, path);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae782e71ffa4c70ebfeef853b02e19313"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae782e71ffa4c70ebfeef853b02e19313">&#9670;&nbsp;</a></span>vc_hostfs_freespace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_freespace </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>inPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00556">556</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00594">vc_hostfs_freespace64()</a>.</p>
<div class="fragment"><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;{</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> freeSpace =  <a class="code" href="../../d3/d1e/vcfilesys_8c.html#a4c351387bd7a756343ab4e441c3a1367">vc_hostfs_freespace64</a>( inPath );</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <span class="comment">// Saturate return value (need this in case we have a large file system)</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <span class="keywordflow">if</span> (freeSpace &gt; (<a class="code" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>) INT_MAX)</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      ret = INT_MAX;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      ret = (int) freeSpace;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_a4c351387bd7a756343ab4e441c3a1367"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#a4c351387bd7a756343ab4e441c3a1367">vc_hostfs_freespace64</a></div><div class="ttdeci">int64_t vc_hostfs_freespace64(const char *inPath)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00594">vcfilesys.c:594</a></div></div>
<div class="ttc" id="containers__types_8h_html_adec1df1b8b51cb32b77e5b86fff46471"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a></div><div class="ttdeci">signed long long int64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00074">containers_types.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c351387bd7a756343ab4e441c3a1367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c351387bd7a756343ab4e441c3a1367">&#9670;&nbsp;</a></span>vc_hostfs_freespace64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> vc_hostfs_freespace64 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>inPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00594">594</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00556">vc_hostfs_freespace()</a>.</p>
<div class="fragment"><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;{</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   <span class="keywordtype">char</span> *path = strdup( inPath );</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> ret;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   <span class="keyword">struct </span>statfs fsStat;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <span class="comment">// Replace all &#39;\&#39; with &#39;/&#39;</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   backslash_to_slash( path );</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   ret = (<a class="code" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>) statfs( path, &amp;fsStat );</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="keywordflow">if</span> (ret == 0)</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      ret = fsStat.f_bsize * fsStat.f_bavail;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      ret = -1;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_freespace64 for &#39;%s&#39; returning %&quot;</span> PRId64 <span class="stringliteral">&quot;&quot;</span>, path, ret );</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   free( path );</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="containers__types_8h_html_adec1df1b8b51cb32b77e5b86fff46471"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a></div><div class="ttdeci">signed long long int64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00074">containers_types.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a00416ad45efd91101cb937f447248285"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00416ad45efd91101cb937f447248285">&#9670;&nbsp;</a></span>vc_hostfs_get_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_get_attr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d54/vcfilesys__defs_8h.html#af6013c06a60b4d2ff82417ca0d582dae">fattributes_t</a> *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00636">636</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d54/vcfilesys__defs_8h_source.html#l00043">ATTR_DIRENT</a>, <a class="el" href="../../d6/d54/vcfilesys__defs_8h_source.html#l00039">ATTR_RDONLY</a>, and <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>.</p>
<div class="fragment"><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;{</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keyword">struct </span>stat sb;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_get_attr: &#39;%s&#39;&quot;</span>, path );</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    *attr = 0;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> ( stat( path, &amp;sb ) == 0 )</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">if</span> ( S_ISDIR( sb.st_mode ))</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            *attr |= <a class="code" href="../../d6/d54/vcfilesys__defs_8h.html#a7bbf715a5f27011a737e51697f76d1ba">ATTR_DIRENT</a>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">if</span> (( sb.st_mode &amp; S_IWUSR  ) == 0 )</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            *attr |= <a class="code" href="../../d6/d54/vcfilesys__defs_8h.html#ac0b782fc56ee2f463c1c7fb5eadb17be">ATTR_RDONLY</a>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div><div class="ttc" id="vcfilesys__defs_8h_html_ac0b782fc56ee2f463c1c7fb5eadb17be"><div class="ttname"><a href="../../d6/d54/vcfilesys__defs_8h.html#ac0b782fc56ee2f463c1c7fb5eadb17be">ATTR_RDONLY</a></div><div class="ttdeci">#define ATTR_RDONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/vcfilesys__defs_8h_source.html#l00039">vcfilesys_defs.h:39</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="vcfilesys__defs_8h_html_a7bbf715a5f27011a737e51697f76d1ba"><div class="ttname"><a href="../../d6/d54/vcfilesys__defs_8h.html#a7bbf715a5f27011a737e51697f76d1ba">ATTR_DIRENT</a></div><div class="ttdeci">#define ATTR_DIRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/vcfilesys__defs_8h_source.html#l00043">vcfilesys_defs.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adee37db2c4a7fe7cb517d855cbcfc2fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adee37db2c4a7fe7cb517d855cbcfc2fd">&#9670;&nbsp;</a></span>vc_hostfs_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> vc_hostfs_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00139">139</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/da6/user__nodefs_8h.html#a0c872e5d736084d0f89b2078cb49fdc6">assert()</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00106">FILE_INFO_TABLE_CHUNK_LEN</a>, <a class="el" href="../../d5/d5f/khrn__misc_8h_source.html#l00133">NULL</a>, <a class="el" href="../../d1/d3a/vcos__logcat_8c_source.html#l00373">vcos_log_register()</a>, <a class="el" href="../../de/d30/vcos__thread_8h.html#af36c379cd97722cf79c47da4bb4d0abd">vcos_thread_current()</a>, and <a class="el" href="../../dd/d29/vcos__pthreads_8c_source.html#l00537">vcos_thread_get_name()</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="comment">// This hostfs module is not thread safe - it allocaes a block</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="comment">// of memory and uses it without any kind of locking. </span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="comment">// It offers no advantage of stdio, and so most clients should</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   <span class="comment">// not use it. Arguably FILESYS should use it in order to get</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   <span class="comment">// the FIFO support.</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *thread_name = <a class="code" href="../../dd/d29/vcos__pthreads_8c.html#a2a13266538ca79516998206bbe6ac21d">vcos_thread_get_name</a>(<a class="code" href="../../de/d30/vcos__thread_8h.html#af36c379cd97722cf79c47da4bb4d0abd">vcos_thread_current</a>());</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <span class="keywordflow">if</span> (strcmp(thread_name, <span class="stringliteral">&quot;FILESYS&quot;</span>) != 0 &amp;&amp; strcmp(thread_name, <span class="stringliteral">&quot;HFilesys&quot;</span>) != 0)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;%s: vc_hostfs is deprecated. Please use stdio\n&quot;</span>,</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;              <a class="code" href="../../dd/d29/vcos__pthreads_8c.html#a2a13266538ca79516998206bbe6ac21d">vcos_thread_get_name</a>(<a class="code" href="../../de/d30/vcos__thread_8h.html#af36c379cd97722cf79c47da4bb4d0abd">vcos_thread_current</a>()));</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   <a class="code" href="../../d1/d3a/vcos__logcat_8c.html#a3b1a5dfa854033cd021dac6db2934b9c">vcos_log_register</a>(<span class="stringliteral">&quot;hostfs&quot;</span>, &amp;<a class="code" href="../../d3/d1e/vcfilesys_8c.html#acf7010bd882e246e4a8f5965751806a9">hostfs_log_cat</a>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;init&quot;</span>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <span class="comment">// Allocate memory for the file info table</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   p_file_info_table = (<a class="code" href="../../d5/d57/structfile__info__t.html">file_info_t</a> *)calloc( <a class="code" href="../../d3/d1e/vcfilesys_8c.html#a844bb537de020cf38d7ad043527bd876">FILE_INFO_TABLE_CHUNK_LEN</a>, <span class="keyword">sizeof</span>( <a class="code" href="../../d5/d57/structfile__info__t.html">file_info_t</a> ) );</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <a class="code" href="../../df/da6/user__nodefs_8h.html#a0c872e5d736084d0f89b2078cb49fdc6">assert</a>( p_file_info_table != <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> );</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   <span class="keywordflow">if</span> (p_file_info_table)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      file_info_table_len = <a class="code" href="../../d3/d1e/vcfilesys_8c.html#a844bb537de020cf38d7ad043527bd876">FILE_INFO_TABLE_CHUNK_LEN</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="ttc" id="vcos__pthreads_8c_html_a2a13266538ca79516998206bbe6ac21d"><div class="ttname"><a href="../../dd/d29/vcos__pthreads_8c.html#a2a13266538ca79516998206bbe6ac21d">vcos_thread_get_name</a></div><div class="ttdeci">const char * vcos_thread_get_name(const VCOS_THREAD_T *thread)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d29/vcos__pthreads_8c_source.html#l00537">vcos_pthreads.c:537</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structfile__info__t_html"><div class="ttname"><a href="../../d5/d57/structfile__info__t.html">file_info_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00100">vcfilesys.c:100</a></div></div>
<div class="ttc" id="vcos__logcat_8c_html_a3b1a5dfa854033cd021dac6db2934b9c"><div class="ttname"><a href="../../d1/d3a/vcos__logcat_8c.html#a3b1a5dfa854033cd021dac6db2934b9c">vcos_log_register</a></div><div class="ttdeci">void vcos_log_register(const char *name, VCOS_LOG_CAT_T *category)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3a/vcos__logcat_8c_source.html#l00373">vcos_logcat.c:373</a></div></div>
<div class="ttc" id="vcos__thread_8h_html_af36c379cd97722cf79c47da4bb4d0abd"><div class="ttname"><a href="../../de/d30/vcos__thread_8h.html#af36c379cd97722cf79c47da4bb4d0abd">vcos_thread_current</a></div><div class="ttdeci">VCOS_INLINE_DECL VCOS_THREAD_T * vcos_thread_current(void)</div><div class="ttdoc">Return the currently executing thread. </div></div>
<div class="ttc" id="vcfilesys_8c_html_acf7010bd882e246e4a8f5965751806a9"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#acf7010bd882e246e4a8f5965751806a9">hostfs_log_cat</a></div><div class="ttdeci">VCOS_LOG_CAT_T hostfs_log_cat</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00068">vcfilesys.c:68</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_a844bb537de020cf38d7ad043527bd876"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#a844bb537de020cf38d7ad043527bd876">FILE_INFO_TABLE_CHUNK_LEN</a></div><div class="ttdeci">#define FILE_INFO_TABLE_CHUNK_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00106">vcfilesys.c:106</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="user__nodefs_8h_html_a0c872e5d736084d0f89b2078cb49fdc6"><div class="ttname"><a href="../../df/da6/user__nodefs_8h.html#a0c872e5d736084d0f89b2078cb49fdc6">assert</a></div><div class="ttdeci">void assert(int cond)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae88fc5cf88e48968337fc0968b7a92dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae88fc5cf88e48968337fc0968b7a92dd">&#9670;&nbsp;</a></span>vc_hostfs_lseek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long vc_hostfs_lseek </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fildes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>whence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00219">219</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00244">vc_hostfs_lseek64()</a>.</p>
<div class="fragment"><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">long</span>) <a class="code" href="../../d3/d1e/vcfilesys_8c.html#ae50d9deccc1c180763ddd887f68e05ec">vc_hostfs_lseek64</a>( fildes, (<a class="code" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>) <a class="code" href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a>, whence);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="ttc" id="mmal__vc__diag_8c_html_a168f35d517cfce69f73ba48cfb43dbe4"><div class="ttname"><a href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a></div><div class="ttdeci">unsigned offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d96/mmal__vc__diag_8c_source.html#l00186">mmal_vc_diag.c:186</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_ae50d9deccc1c180763ddd887f68e05ec"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#ae50d9deccc1c180763ddd887f68e05ec">vc_hostfs_lseek64</a></div><div class="ttdeci">int64_t vc_hostfs_lseek64(int fildes, int64_t offset, int whence)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00244">vcfilesys.c:244</a></div></div>
<div class="ttc" id="containers__types_8h_html_adec1df1b8b51cb32b77e5b86fff46471"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a></div><div class="ttdeci">signed long long int64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00074">containers_types.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae50d9deccc1c180763ddd887f68e05ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae50d9deccc1c180763ddd887f68e05ec">&#9670;&nbsp;</a></span>vc_hostfs_lseek64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> vc_hostfs_lseek64 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fildes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>whence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00244">244</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00219">vc_hostfs_lseek()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_lseek(%d,%&quot;</span> PRId64 <span class="stringliteral">&quot;,%d)&quot;</span>, fildes, <a class="code" href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a>, whence);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">if</span> (fildes &gt;= file_info_table_len)</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="comment">// File descriptor not in table, so this is an error</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <a class="code" href="../../d3/d1e/vcfilesys_8c.html#ae8d77a1c7dd2d2b94f0cbb3a8256d31c">DEBUG_MAJOR</a>(<span class="stringliteral">&quot;vc_hostfs_lseek: invalid fildes %d&quot;</span>, fildes);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="comment">// There is entry in the file info table for this file descriptor, so go</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="comment">// ahead and handle the seek</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <a class="code" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> read_offset = p_file_info_table[fildes].<a class="code" href="../../d5/d57/structfile__info__t.html#a16b6a8cdfd736b0abdf11a694ea9bbd8">read_offset</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">if</span> (p_file_info_table[fildes].is_fifo)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;         <span class="comment">// The Videocore is attempting to seek on a FIFO.  FIFOs don&#39;t support seeking</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;         <span class="comment">// but, for the benefit of certain Videocore &quot;streaming&quot; file handlers, we</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         <span class="comment">// will fake limited FIFO seek functionality by computing where a seek</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;         <span class="comment">// would take us to</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         <span class="keywordflow">if</span> (whence == SEEK_SET)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;         {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            read_offset = <a class="code" href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (whence == SEEK_CUR)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;         {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            read_offset += <a class="code" href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;         }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;         {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="comment">// seeking to the end of FIFO makes no sense, so this is an error</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <a class="code" href="../../d3/d1e/vcfilesys_8c.html#ae8d77a1c7dd2d2b94f0cbb3a8256d31c">DEBUG_MAJOR</a>(<span class="stringliteral">&quot;vc_hostfs_lseek(%d,%lld,%d): SEEK_END not supported on FIFO&quot;</span>, fildes, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>)<a class="code" href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a>, whence);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;         }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;         <span class="comment">// File is not a FIFO, so do the seek</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;         read_offset = lseek64(fildes, <a class="code" href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a>, whence);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      p_file_info_table[fildes].<a class="code" href="../../d5/d57/structfile__info__t.html#a16b6a8cdfd736b0abdf11a694ea9bbd8">read_offset</a> = read_offset;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_lseek returning %&quot;</span> PRId64 <span class="stringliteral">&quot;)&quot;</span>, read_offset);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">return</span> read_offset;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="ttc" id="structfile__info__t_html_a16b6a8cdfd736b0abdf11a694ea9bbd8"><div class="ttname"><a href="../../d5/d57/structfile__info__t.html#a16b6a8cdfd736b0abdf11a694ea9bbd8">file_info_t::read_offset</a></div><div class="ttdeci">uint64_t read_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00103">vcfilesys.c:103</a></div></div>
<div class="ttc" id="mmal__vc__diag_8c_html_a168f35d517cfce69f73ba48cfb43dbe4"><div class="ttname"><a href="../../d8/d96/mmal__vc__diag_8c.html#a168f35d517cfce69f73ba48cfb43dbe4">offset</a></div><div class="ttdeci">unsigned offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d96/mmal__vc__diag_8c_source.html#l00186">mmal_vc_diag.c:186</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_ae8d77a1c7dd2d2b94f0cbb3a8256d31c"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#ae8d77a1c7dd2d2b94f0cbb3a8256d31c">DEBUG_MAJOR</a></div><div class="ttdeci">#define DEBUG_MAJOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00080">vcfilesys.c:80</a></div></div>
<div class="ttc" id="containers__types_8h_html_adec1df1b8b51cb32b77e5b86fff46471"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a></div><div class="ttdeci">signed long long int64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00074">containers_types.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab91c9e3ba59ce582898ff922939390f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab91c9e3ba59ce582898ff922939390f0">&#9670;&nbsp;</a></span>vc_hostfs_mkdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_mkdir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00677">677</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>.</p>
<div class="fragment"><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;{</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_mkdir: &#39;%s&#39;&quot;</span>,  path );</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">if</span> ( mkdir( path, 0777 ) == 0 )</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a66aa8ab3684364253345daddcd5a9919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66aa8ab3684364253345daddcd5a9919">&#9670;&nbsp;</a></span>vc_hostfs_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>inPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vc_oflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00312">312</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;{</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordtype">char</span> *path = strdup( inPath );</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <span class="comment">//char *s;</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a> = 0, ret=errno;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keyword">struct </span>stat fileStat;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="comment">// Replace all &#39;\&#39; with &#39;/&#39;</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   backslash_to_slash( path );</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <a class="code" href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a> = path + strlen( path );</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordflow">if</span> (( <a class="code" href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a> - path ) &gt;= 4 )</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">if</span> ( strcasecmp( &amp;<a class="code" href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a>[ -4 ], <span class="stringliteral">&quot;.vll&quot;</span> ) == 0 )</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;         <span class="comment">// The Videocore is asking for a .vll file. Since it isn&#39;t consistent with</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;         <span class="comment">// the case, we convert .vll files to all lowercase.</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          <span class="stringliteral">&quot;vc_hostfs_open: &#39;%s&#39;&quot;</span>, path ;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;         <a class="code" href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a>--;    <span class="comment">// backup to the last character (*s is on the &#39;\0&#39;)</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;         <span class="keywordflow">while</span> (( <a class="code" href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a> &gt;= path ) &amp;&amp; ( *<a class="code" href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a> != <span class="charliteral">&#39;/&#39;</span> ))</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;         {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            *<a class="code" href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a> = tolower( *<a class="code" href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a> );</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <a class="code" href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a>--;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;         }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_open: &#39;%s&#39;&quot;</span>, path);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   flags = O_RDONLY;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="keywordflow">if</span> (vc_oflag &amp; <a class="code" href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4cac16e3d1297e2baf6cc1671b187da2692">VC_O_WRONLY</a>)  flags =  O_WRONLY;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordflow">if</span> (vc_oflag &amp; <a class="code" href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4ca999736091413c8d6dd2a1c8b4f499e9e">VC_O_RDWR</a>)    flags =  O_RDWR;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keywordflow">if</span> (vc_oflag &amp; <a class="code" href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4ca22c58a718ed090e43ed5146806be431c">VC_O_APPEND</a>)  flags |= O_APPEND;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keywordflow">if</span> (vc_oflag &amp; <a class="code" href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4ca784f96183dc660591d44ad8ea10340b1">VC_O_CREAT</a>)   flags |= O_CREAT;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <span class="keywordflow">if</span> (vc_oflag &amp; <a class="code" href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4ca6ce8ab85568a022d1fcb6445573c9247">VC_O_TRUNC</a>)   flags |= O_TRUNC;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="keywordflow">if</span> (vc_oflag &amp; <a class="code" href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4cabe4f632f48312b7b53524433f0b79992">VC_O_EXCL</a>)    flags |= O_EXCL;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <span class="comment">//while (*path == &#39;\\&#39;) path++; // do not want initial &#39;\&#39;</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keywordflow">if</span> (flags &amp; O_CREAT)</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      ret = open(path, flags, S_IRUSR | S_IWUSR );</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      ret = open(path, flags );</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keywordflow">if</span> (ret &lt; 0 )</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_open(%s,%d) = %d&quot;</span>, path, vc_oflag, ret);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_open(%s,%d) = %d&quot;</span>, path, vc_oflag, ret);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <span class="comment">// If the file was successfully open then initialize its entry in</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="comment">// the file info table.  If necessary, we expand the size of the table</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   <span class="keywordflow">if</span> (ret &gt;= 0)</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="comment">// File was successfully opened</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">if</span> (ret &gt;= file_info_table_len)</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;         <a class="code" href="../../d5/d57/structfile__info__t.html">file_info_t</a> *p_new_file_info_table = p_file_info_table;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         <span class="keywordtype">int</span> new_file_info_table_len = file_info_table_len;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;         <span class="comment">// try and allocate a bigger buffer for the file info table</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;         new_file_info_table_len += <a class="code" href="../../d3/d1e/vcfilesys_8c.html#a844bb537de020cf38d7ad043527bd876">FILE_INFO_TABLE_CHUNK_LEN</a>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;         p_new_file_info_table = calloc( (<span class="keywordtype">size_t</span>)new_file_info_table_len, <span class="keyword">sizeof</span>( <a class="code" href="../../d5/d57/structfile__info__t.html">file_info_t</a> ) );</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;         <span class="keywordflow">if</span> (p_new_file_info_table == <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="comment">// calloc failed</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <a class="code" href="../../d3/d1e/vcfilesys_8c.html#ae8d77a1c7dd2d2b94f0cbb3a8256d31c">DEBUG_MAJOR</a>(<span class="stringliteral">&quot;vc_hostfs_open: file_info_table calloc failed&quot;</span>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <a class="code" href="../../df/da6/user__nodefs_8h.html#a0c872e5d736084d0f89b2078cb49fdc6">assert</a>( 0 );</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;         }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;         {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="comment">// calloc successful, so copy data from previous buffer to new buffer,</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="comment">// free previous buffer and update ptr and len info</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            memcpy( p_new_file_info_table, p_file_info_table, <span class="keyword">sizeof</span>( <a class="code" href="../../d5/d57/structfile__info__t.html">file_info_t</a> ) * file_info_table_len );</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            free( p_file_info_table );</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            p_file_info_table = p_new_file_info_table;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            file_info_table_len = new_file_info_table_len;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;         }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <a class="code" href="../../df/da6/user__nodefs_8h.html#a0c872e5d736084d0f89b2078cb49fdc6">assert</a>( ret &lt; file_info_table_len );</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;         <span class="comment">// initialize this file&#39;s entry in the file info table</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;         p_file_info_table[ret].<a class="code" href="../../d5/d57/structfile__info__t.html#a63fdbb34c1edf9480b2283beb01c9409">is_fifo</a> = 0;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;         p_file_info_table[ret].<a class="code" href="../../d5/d57/structfile__info__t.html#a16b6a8cdfd736b0abdf11a694ea9bbd8">read_offset</a> = 0;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="comment">// Check whether the file is a FIFO.  A FIFO does not support seeking</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="comment">// but we will fake, to the extent supported by the buffered file system</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="comment">// on the Videocore, limited FIFO seek functionality.  This is for the benefit</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="comment">// of certain Videocore &quot;streaming&quot; file handlers.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">if</span> (fstat( ret, &amp;fileStat ) != 0)</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;         <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_open: fstat failed: %s&quot;</span>, strerror(errno));</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISFIFO( fileStat.st_mode ))</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;         <span class="comment">// file is a FIFO, so note its fildes for future reference</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;         p_file_info_table[ret].<a class="code" href="../../d5/d57/structfile__info__t.html#a63fdbb34c1edf9480b2283beb01c9409">is_fifo</a> = 1;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;         <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_open: file with fildes %d is a FIFO&quot;</span>, ret);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   }</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   free( path );</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="ttc" id="vc__fileservice__defs_8h_html_ab79db5277fcbe695243c6d68332cbf4ca22c58a718ed090e43ed5146806be431c"><div class="ttname"><a href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4ca22c58a718ed090e43ed5146806be431c">VC_O_APPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1d/vc__fileservice__defs_8h_source.html#l00044">vc_fileservice_defs.h:44</a></div></div>
<div class="ttc" id="vc__fileservice__defs_8h_html_ab79db5277fcbe695243c6d68332cbf4cac16e3d1297e2baf6cc1671b187da2692"><div class="ttname"><a href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4cac16e3d1297e2baf6cc1671b187da2692">VC_O_WRONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1d/vc__fileservice__defs_8h_source.html#l00042">vc_fileservice_defs.h:42</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="eglext_8h_html_a0f1b4b29f7a4e4106eec81bb30f16a01"><div class="ttname"><a href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a></div><div class="ttdeci">EGLSyncKHR EGLint flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/eglext_8h_source.html#l00188">eglext.h:188</a></div></div>
<div class="ttc" id="structfile__info__t_html"><div class="ttname"><a href="../../d5/d57/structfile__info__t.html">file_info_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00100">vcfilesys.c:100</a></div></div>
<div class="ttc" id="vc__fileservice__defs_8h_html_ab79db5277fcbe695243c6d68332cbf4ca6ce8ab85568a022d1fcb6445573c9247"><div class="ttname"><a href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4ca6ce8ab85568a022d1fcb6445573c9247">VC_O_TRUNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1d/vc__fileservice__defs_8h_source.html#l00046">vc_fileservice_defs.h:46</a></div></div>
<div class="ttc" id="structfile__info__t_html_a16b6a8cdfd736b0abdf11a694ea9bbd8"><div class="ttname"><a href="../../d5/d57/structfile__info__t.html#a16b6a8cdfd736b0abdf11a694ea9bbd8">file_info_t::read_offset</a></div><div class="ttdeci">uint64_t read_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00103">vcfilesys.c:103</a></div></div>
<div class="ttc" id="vc__fileservice__defs_8h_html_ab79db5277fcbe695243c6d68332cbf4ca784f96183dc660591d44ad8ea10340b1"><div class="ttname"><a href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4ca784f96183dc660591d44ad8ea10340b1">VC_O_CREAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1d/vc__fileservice__defs_8h_source.html#l00045">vc_fileservice_defs.h:45</a></div></div>
<div class="ttc" id="structfile__info__t_html_a63fdbb34c1edf9480b2283beb01c9409"><div class="ttname"><a href="../../d5/d57/structfile__info__t.html#a63fdbb34c1edf9480b2283beb01c9409">file_info_t::is_fifo</a></div><div class="ttdeci">int is_fifo</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00102">vcfilesys.c:102</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_a844bb537de020cf38d7ad043527bd876"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#a844bb537de020cf38d7ad043527bd876">FILE_INFO_TABLE_CHUNK_LEN</a></div><div class="ttdeci">#define FILE_INFO_TABLE_CHUNK_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00106">vcfilesys.c:106</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="glext_8h_html_ad009b4972eead1c93a3d11f2721af19d"><div class="ttname"><a href="../../dc/dd2/glext_8h.html#ad009b4972eead1c93a3d11f2721af19d">s</a></div><div class="ttdeci">GLfixed s</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd2/glext_8h_source.html#l00677">glext.h:677</a></div></div>
<div class="ttc" id="user__nodefs_8h_html_a0c872e5d736084d0f89b2078cb49fdc6"><div class="ttname"><a href="../../df/da6/user__nodefs_8h.html#a0c872e5d736084d0f89b2078cb49fdc6">assert</a></div><div class="ttdeci">void assert(int cond)</div></div>
<div class="ttc" id="vc__fileservice__defs_8h_html_ab79db5277fcbe695243c6d68332cbf4ca999736091413c8d6dd2a1c8b4f499e9e"><div class="ttname"><a href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4ca999736091413c8d6dd2a1c8b4f499e9e">VC_O_RDWR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1d/vc__fileservice__defs_8h_source.html#l00043">vc_fileservice_defs.h:43</a></div></div>
<div class="ttc" id="vc__fileservice__defs_8h_html_ab79db5277fcbe695243c6d68332cbf4cabe4f632f48312b7b53524433f0b79992"><div class="ttname"><a href="../../d1/d1d/vc__fileservice__defs_8h.html#ab79db5277fcbe695243c6d68332cbf4cabe4f632f48312b7b53524433f0b79992">VC_O_EXCL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1d/vc__fileservice__defs_8h_source.html#l00047">vc_fileservice_defs.h:47</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_ae8d77a1c7dd2d2b94f0cbb3a8256d31c"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#ae8d77a1c7dd2d2b94f0cbb3a8256d31c">DEBUG_MAJOR</a></div><div class="ttdeci">#define DEBUG_MAJOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00080">vcfilesys.c:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5700d8df395f468ab235e5ca81d8ba3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5700d8df395f468ab235e5ca81d8ba3a">&#9670;&nbsp;</a></span>vc_hostfs_opendir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>* vc_hostfs_opendir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dirname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00702">702</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00088">fs_dir::dhandle</a>, <a class="el" href="../../da/d8c/font_8c_source.html#l00067">len</a>, <a class="el" href="../../d5/d5f/khrn__misc_8h_source.html#l00133">NULL</a>, and <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00090">fs_dir::pathbuf</a>.</p>
<div class="fragment"><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;{</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dd8/structfs__dir.html">fs_dir</a> *fsdir = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_opendir: &#39;%s&#39;&quot;</span>, dirname );</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="keywordflow">if</span> (dirname &amp;&amp; dirname[0])</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      fsdir = (<span class="keyword">struct </span><a class="code" href="../../d8/dd8/structfs__dir.html">fs_dir</a> *)malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/dd8/structfs__dir.html">fs_dir</a>));</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">if</span> (fsdir)</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;         <a class="code" href="../../d6/d77/vc__vchi__filesys_8h.html#a13d97082cdefa97f65e3696725bd87c9">DIR</a> *<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;         <span class="keywordtype">int</span> <a class="code" href="../../da/d8c/font_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = strlen(dirname);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;         memcpy(fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>, dirname, len);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;         backslash_to_slash(fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;         <span class="comment">/* Remove any trailing slashes */</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;         <span class="keywordflow">while</span> (fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>[len - 1] == <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            len--;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;         fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>[<a class="code" href="../../da/d8c/font_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;         dhandle = opendir(fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;         <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;opendir: &#39;%s&#39; = %p&quot;</span>, fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>, dhandle );</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;         <span class="keywordflow">if</span> (dhandle)</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;         {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#a67850263784112555044b5bb0f31db00">pathlen</a> = <a class="code" href="../../da/d8c/font_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a> = <a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;         }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;         {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            free(fsdir);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            fsdir = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;         }</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="keywordflow">return</span> fsdir;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div><div class="ttc" id="structfs__dir_html_a67850263784112555044b5bb0f31db00"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html#a67850263784112555044b5bb0f31db00">fs_dir::pathlen</a></div><div class="ttdeci">int pathlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00089">vcfilesys.c:89</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structfs__dir_html_ac4e4f8c0f51ea131037e2437a2b8779a"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">fs_dir::pathbuf</a></div><div class="ttdeci">char pathbuf[PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00090">vcfilesys.c:90</a></div></div>
<div class="ttc" id="vc__vchi__filesys_8h_html_a13d97082cdefa97f65e3696725bd87c9"><div class="ttname"><a href="../../d6/d77/vc__vchi__filesys_8h.html#a13d97082cdefa97f65e3696725bd87c9">DIR</a></div><div class="ttdeci">struct DIR_tag DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d77/vc__vchi__filesys_8h_source.html#l00037">vc_vchi_filesys.h:37</a></div></div>
<div class="ttc" id="font_8c_html_a7360b55975153b822efc5217b7734e6a"><div class="ttname"><a href="../../da/d8c/font_8c.html#a7360b55975153b822efc5217b7734e6a">len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8c/font_8c_source.html#l00067">font.c:67</a></div></div>
<div class="ttc" id="structfs__dir_html_ad61ae9d4ad30844f410685a9c1295b8b"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">fs_dir::dhandle</a></div><div class="ttdeci">DIR * dhandle</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00088">vcfilesys.c:88</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="structfs__dir_html"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html">fs_dir</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00086">vcfilesys.c:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a34c5e04cddbd316291a28fcfe90f0fee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34c5e04cddbd316291a28fcfe90f0fee">&#9670;&nbsp;</a></span>vc_hostfs_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fildes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nbyte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00441">441</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;{</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="keywordflow">if</span> (fildes &gt;= file_info_table_len)</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="comment">// File descriptor not in table, so this is an error</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <a class="code" href="../../d3/d1e/vcfilesys_8c.html#ae8d77a1c7dd2d2b94f0cbb3a8256d31c">DEBUG_MAJOR</a>(<span class="stringliteral">&quot;vc_hostfs_read(%d,%p,%u): invalid fildes&quot;</span>, fildes, buf, nbyte);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   {</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="comment">// There is entry in the file info table for this file descriptor, so go</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="comment">// ahead and handle the read</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordtype">int</span> ret = (int) read(fildes, buf, nbyte);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_read(%d,%p,%u) = %d&quot;</span>, fildes, buf, nbyte, ret);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">if</span> (ret &gt; 0)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;         p_file_info_table[fildes].<a class="code" href="../../d5/d57/structfile__info__t.html#a16b6a8cdfd736b0abdf11a694ea9bbd8">read_offset</a> += (long) ret;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div><div class="ttc" id="structfile__info__t_html_a16b6a8cdfd736b0abdf11a694ea9bbd8"><div class="ttname"><a href="../../d5/d57/structfile__info__t.html#a16b6a8cdfd736b0abdf11a694ea9bbd8">file_info_t::read_offset</a></div><div class="ttdeci">uint64_t read_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00103">vcfilesys.c:103</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_ae8d77a1c7dd2d2b94f0cbb3a8256d31c"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#ae8d77a1c7dd2d2b94f0cbb3a8256d31c">DEBUG_MAJOR</a></div><div class="ttdeci">#define DEBUG_MAJOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00080">vcfilesys.c:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adec3f56e032355daa0b3072dcca1c57b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adec3f56e032355daa0b3072dcca1c57b">&#9670;&nbsp;</a></span>vc_hostfs_readdir_r()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct fs_dirent* vc_hostfs_readdir_r </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *&#160;</td>
          <td class="paramname"><em>dhandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fs_dirent *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00765">765</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d54/vcfilesys__defs_8h_source.html#l00043">ATTR_DIRENT</a>, <a class="el" href="../../d6/d54/vcfilesys__defs_8h_source.html#l00045">ATTR_NORMAL</a>, <a class="el" href="../../d6/d54/vcfilesys__defs_8h_source.html#l00039">ATTR_RDONLY</a>, <a class="el" href="../../d6/d54/vcfilesys__defs_8h_source.html#l00052">dirent::d_name</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00088">fs_dir::dhandle</a>, <a class="el" href="../../d5/d5f/khrn__misc_8h_source.html#l00133">NULL</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00090">fs_dir::pathbuf</a>, <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00089">fs_dir::pathlen</a>, and <a class="el" href="../../d2/d39/vcos__generic__safe__string_8c_source.html#l00076">vcos_safe_strcpy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;{</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dd8/structfs__dir.html">fs_dir</a> *fsdir = (<span class="keyword">struct </span><a class="code" href="../../d8/dd8/structfs__dir.html">fs_dir</a> *)<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_readdir_r(%p)&quot;</span>, fsdir );</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="keywordflow">if</span> (fsdir &amp;&amp; result)</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/de2/structdirent.html">dirent</a> *dent;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">while</span> ((dent = readdir(fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a>)) != <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;         <span class="keyword">struct </span>stat statbuf;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;         <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;         <span class="comment">/* Append the filename, and stat the resulting path */</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;         fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>[fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#a67850263784112555044b5bb0f31db00">pathlen</a>] = <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;         <a class="code" href="../../d2/d39/vcos__generic__safe__string_8c.html#a5be6fb5f25d8bb5c4b7b4c951ec9b959">vcos_safe_strcpy</a>(fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>, dent-&gt;<a class="code" href="../../d5/de2/structdirent.html#a8fb16e09f0ebb607973bb0265660bad7">d_name</a>, <span class="keyword">sizeof</span>(fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>), fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#a67850263784112555044b5bb0f31db00">pathlen</a> + 1);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;         ret = stat(fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>, &amp;statbuf);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;         fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">pathbuf</a>[fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#a67850263784112555044b5bb0f31db00">pathlen</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;         <span class="keywordflow">if</span> (ret == 0)</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;         {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <a class="code" href="../../d2/d39/vcos__generic__safe__string_8c.html#a5be6fb5f25d8bb5c4b7b4c951ec9b959">vcos_safe_strcpy</a>(result-&gt;d_name, dent-&gt;<a class="code" href="../../d5/de2/structdirent.html#a8fb16e09f0ebb607973bb0265660bad7">d_name</a>, <span class="keyword">sizeof</span>(result-&gt;d_name), 0);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            result-&gt;d_size = (statbuf.st_size &lt;= 0xffffffff) ? (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)statbuf.st_size : 0xffffffff;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            result-&gt;d_attrib = <a class="code" href="../../d6/d54/vcfilesys__defs_8h.html#a142597e2f2f369f7e1052009742f13c5">ATTR_NORMAL</a>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="keywordflow">if</span> ((statbuf.st_mode &amp; S_IWUSR) == 0)</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;               result-&gt;d_attrib |= <a class="code" href="../../d6/d54/vcfilesys__defs_8h.html#ac0b782fc56ee2f463c1c7fb5eadb17be">ATTR_RDONLY</a>;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            if (statbuf.st_mode &amp; S_IFDIR)</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;               result-&gt;d_attrib |= <a class="code" href="../../d6/d54/vcfilesys__defs_8h.html#a7bbf715a5f27011a737e51697f76d1ba">ATTR_DIRENT</a>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            result-&gt;d_creatime = statbuf.st_ctime;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            result-&gt;d_modtime = statbuf.st_mtime;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_readdir_r() = &#39;%s&#39;, %x, %x&quot;</span>, result-&gt;d_name, result-&gt;d_size, result-&gt;d_attrib );</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;         }</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="keywordflow">if</span> (!dent)</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;         <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_readdir_r() = NULL&quot;</span> );</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;         rewinddir(fsdir-&gt;<a class="code" href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">dhandle</a>);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;         result = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      }</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      result = <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div><div class="ttc" id="structfs__dir_html_a67850263784112555044b5bb0f31db00"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html#a67850263784112555044b5bb0f31db00">fs_dir::pathlen</a></div><div class="ttdeci">int pathlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00089">vcfilesys.c:89</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structfs__dir_html_ac4e4f8c0f51ea131037e2437a2b8779a"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html#ac4e4f8c0f51ea131037e2437a2b8779a">fs_dir::pathbuf</a></div><div class="ttdeci">char pathbuf[PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00090">vcfilesys.c:90</a></div></div>
<div class="ttc" id="vcos__generic__safe__string_8c_html_a5be6fb5f25d8bb5c4b7b4c951ec9b959"><div class="ttname"><a href="../../d2/d39/vcos__generic__safe__string_8c.html#a5be6fb5f25d8bb5c4b7b4c951ec9b959">vcos_safe_strcpy</a></div><div class="ttdeci">size_t vcos_safe_strcpy(char *dst, const char *src, size_t dstlen, size_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d39/vcos__generic__safe__string_8c_source.html#l00076">vcos_generic_safe_string.c:76</a></div></div>
<div class="ttc" id="structdirent_html"><div class="ttname"><a href="../../d5/de2/structdirent.html">dirent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/vcfilesys__defs_8h_source.html#l00050">vcfilesys_defs.h:50</a></div></div>
<div class="ttc" id="structdirent_html_a8fb16e09f0ebb607973bb0265660bad7"><div class="ttname"><a href="../../d5/de2/structdirent.html#a8fb16e09f0ebb607973bb0265660bad7">dirent::d_name</a></div><div class="ttdeci">char d_name[D_NAME_MAX_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/vcfilesys__defs_8h_source.html#l00052">vcfilesys_defs.h:52</a></div></div>
<div class="ttc" id="vcfilesys__defs_8h_html_ac0b782fc56ee2f463c1c7fb5eadb17be"><div class="ttname"><a href="../../d6/d54/vcfilesys__defs_8h.html#ac0b782fc56ee2f463c1c7fb5eadb17be">ATTR_RDONLY</a></div><div class="ttdeci">#define ATTR_RDONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/vcfilesys__defs_8h_source.html#l00039">vcfilesys_defs.h:39</a></div></div>
<div class="ttc" id="structfs__dir_html_ad61ae9d4ad30844f410685a9c1295b8b"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html#ad61ae9d4ad30844f410685a9c1295b8b">fs_dir::dhandle</a></div><div class="ttdeci">DIR * dhandle</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00088">vcfilesys.c:88</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="vcfilesys__defs_8h_html_a142597e2f2f369f7e1052009742f13c5"><div class="ttname"><a href="../../d6/d54/vcfilesys__defs_8h.html#a142597e2f2f369f7e1052009742f13c5">ATTR_NORMAL</a></div><div class="ttdeci">#define ATTR_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/vcfilesys__defs_8h_source.html#l00045">vcfilesys_defs.h:45</a></div></div>
<div class="ttc" id="vcfilesys__defs_8h_html_a7bbf715a5f27011a737e51697f76d1ba"><div class="ttname"><a href="../../d6/d54/vcfilesys__defs_8h.html#a7bbf715a5f27011a737e51697f76d1ba">ATTR_DIRENT</a></div><div class="ttdeci">#define ATTR_DIRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/vcfilesys__defs_8h_source.html#l00043">vcfilesys_defs.h:43</a></div></div>
<div class="ttc" id="structfs__dir_html"><div class="ttname"><a href="../../d8/dd8/structfs__dir.html">fs_dir</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00086">vcfilesys.c:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1878763bc93e39679d819a25922ec5b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1878763bc93e39679d819a25922ec5b8">&#9670;&nbsp;</a></span>vc_hostfs_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_remove </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00833">833</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>, and <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00090">fs_dir::pathbuf</a>.</p>
<div class="fragment"><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;{</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordtype">char</span> *pathbuf = strdup(path);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordtype">int</span> ret = -1;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_remove: &#39;%s&#39;&quot;</span>, path );</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">if</span> (pathbuf)</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;       backslash_to_slash(pathbuf);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;       <span class="keywordflow">if</span> ( unlink( pathbuf ) == 0 )</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;          ret = 0;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    free(pathbuf);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19c2201655bee7c398da6a2f2bedf6d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19c2201655bee7c398da6a2f2bedf6d8">&#9670;&nbsp;</a></span>vc_hostfs_rename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_rename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00869">869</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>.</p>
<div class="fragment"><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;{</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordtype">char</span> *oldbuf = strdup(old);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordtype">char</span> *newbuf = strdup(<span class="keyword">new</span>);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordtype">int</span> ret = -1;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_rename: &#39;%s&#39; to &#39;%s&#39;&quot;</span>, old, <span class="keyword">new</span> );</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (oldbuf &amp;&amp; newbuf)</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;       backslash_to_slash(oldbuf);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;       backslash_to_slash(newbuf);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;       <span class="keywordflow">if</span> ( rename( oldbuf, newbuf ) == 0 )</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;          ret = 0;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">if</span> (oldbuf)</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;       free(oldbuf);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> (newbuf)</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;       free(newbuf);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae44d0ddd66bc12da8463acbdad81d0f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae44d0ddd66bc12da8463acbdad81d0f0">&#9670;&nbsp;</a></span>vc_hostfs_scandisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> vc_hostfs_scandisk </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l01101">1101</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void()</a>.</p>
<div class="fragment"><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;{</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   (<a class="code" href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void</a>)path;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   <span class="comment">// not yet implemented</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;}</div><div class="ttc" id="eglext__brcm_8h_html_a945373f4c12ae7542efba318e07a2c45"><div class="ttname"><a href="../../d1/d3f/eglext__brcm_8h.html#a945373f4c12ae7542efba318e07a2c45">void</a></div><div class="ttdeci">typedef void(EGLAPIENTRYP PFNEGLCREATEGLOBALIMAGEBRCMPROC)(EGLint width</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a08022a67cfdb0536766fd775695ce203"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08022a67cfdb0536766fd775695ce203">&#9670;&nbsp;</a></span>vc_hostfs_set_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_set_attr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d54/vcfilesys__defs_8h.html#af6013c06a60b4d2ff82417ca0d582dae">fattributes_t</a>&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00910">910</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>, and <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00090">fs_dir::pathbuf</a>.</p>
<div class="fragment"><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;{</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <span class="keywordtype">char</span> *pathbuf = strdup(path);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   <span class="keywordtype">int</span> ret = -1;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_set_attr: &#39;%s&#39;, %x&quot;</span>, path, attr );</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   <span class="keywordflow">if</span> (pathbuf)</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      mode_t <a class="code" href="../../d3/dda/eglext_8h.html#ac702b51660d902fe48eac43f81f6ee2c">mode</a> = 0;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="keyword">struct </span>stat sb;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      backslash_to_slash(pathbuf);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="keywordflow">if</span> ( stat( path, &amp;sb ) == 0 )</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;         mode = sb.st_mode;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;         <span class="keywordflow">if</span> ( attr &amp; <a class="code" href="../../d6/d54/vcfilesys__defs_8h.html#ac0b782fc56ee2f463c1c7fb5eadb17be">ATTR_RDONLY</a> )</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;         {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            mode &amp;= ~S_IWUSR;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;         {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            mode |= S_IWUSR;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;         }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;         <span class="comment">/* coverity[toctou] Not doing anything security-relevant here,</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">          * so the race condition is harmless */</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;         <span class="keywordflow">if</span> ( chmod( path, mode ) == 0 )</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            ret = 0;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   <span class="keywordflow">if</span> (pathbuf)</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      free(pathbuf);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;}</div><div class="ttc" id="eglext_8h_html_ac702b51660d902fe48eac43f81f6ee2c"><div class="ttname"><a href="../../d3/dda/eglext_8h.html#ac702b51660d902fe48eac43f81f6ee2c">mode</a></div><div class="ttdeci">EGLSyncKHR EGLenum mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/eglext_8h_source.html#l00189">eglext.h:189</a></div></div>
<div class="ttc" id="vcfilesys__defs_8h_html_ac0b782fc56ee2f463c1c7fb5eadb17be"><div class="ttname"><a href="../../d6/d54/vcfilesys__defs_8h.html#ac0b782fc56ee2f463c1c7fb5eadb17be">ATTR_RDONLY</a></div><div class="ttdeci">#define ATTR_RDONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/vcfilesys__defs_8h_source.html#l00039">vcfilesys_defs.h:39</a></div></div>
<div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76ca1fd7f17f5f0fb1a42e01ee8dca30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76ca1fd7f17f5f0fb1a42e01ee8dca30">&#9670;&nbsp;</a></span>vc_hostfs_setend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_setend </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>filedes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00965">965</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;{</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    off_t   currPosn;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">if</span> (( currPosn = lseek( filedes, 0, SEEK_CUR )) != (off_t)-1 )</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">if</span> ( ftruncate( filedes, currPosn ) == 0 )</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        }</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ab3bd2b20f3971061a354c3ae27c0df96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3bd2b20f3971061a354c3ae27c0df96">&#9670;&nbsp;</a></span>vc_hostfs_totalspace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_totalspace </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>inPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l01043">1043</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00996">vc_hostfs_totalspace64()</a>.</p>
<div class="fragment"><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;{</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> totalSpace = <a class="code" href="../../d3/d1e/vcfilesys_8c.html#aa4906631c1f244994ed0a6dd0161fcb6">vc_hostfs_totalspace64</a>(inPath);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <span class="comment">// Saturate return value (need this in case we have a large file system)</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;   <span class="keywordflow">if</span> (totalSpace &gt; (<a class="code" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>) INT_MAX)</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      ret = INT_MAX;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   }</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   {</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      ret = (int) totalSpace;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   }</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_aa4906631c1f244994ed0a6dd0161fcb6"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#aa4906631c1f244994ed0a6dd0161fcb6">vc_hostfs_totalspace64</a></div><div class="ttdeci">int64_t vc_hostfs_totalspace64(const char *inPath)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00996">vcfilesys.c:996</a></div></div>
<div class="ttc" id="containers__types_8h_html_adec1df1b8b51cb32b77e5b86fff46471"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a></div><div class="ttdeci">signed long long int64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00074">containers_types.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4906631c1f244994ed0a6dd0161fcb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4906631c1f244994ed0a6dd0161fcb6">&#9670;&nbsp;</a></span>vc_hostfs_totalspace64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> vc_hostfs_totalspace64 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>inPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00996">996</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l01043">vc_hostfs_totalspace()</a>.</p>
<div class="fragment"><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;{</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keywordtype">char</span> *path = strdup( inPath );</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> ret = -1;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   <span class="keyword">struct </span>statfs fsStat;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   <span class="comment">// Replace all &#39;\&#39; with &#39;/&#39;</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;   <span class="keywordflow">if</span> (path)</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      backslash_to_slash( path );</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      ret = statfs( path, &amp;fsStat );</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">if</span> (ret == 0)</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;         ret = fsStat.f_bsize * fsStat.f_blocks;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      {</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;         ret = -1;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      }</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>( <span class="stringliteral">&quot;vc_hostfs_totalspace for &#39;%s&#39; returning %&quot;</span> PRId64 <span class="stringliteral">&quot;&quot;</span>, path, ret );</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <span class="keywordflow">if</span> (path)</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      free( path );</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
<div class="ttc" id="containers__types_8h_html_adec1df1b8b51cb32b77e5b86fff46471"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a></div><div class="ttdeci">signed long long int64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00074">containers_types.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a12480f61de59a8d5047f7ecbbc64cbcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12480f61de59a8d5047f7ecbbc64cbcd">&#9670;&nbsp;</a></span>vc_hostfs_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vc_hostfs_write </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fildes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nbyte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00479">479</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00079">DEBUG_MINOR</a>.</p>
<div class="fragment"><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <span class="keywordtype">int</span> ret = (int) write(fildes, buf, nbyte);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <a class="code" href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a>(<span class="stringliteral">&quot;vc_hostfs_write(%d,%p,%u) = %d&quot;</span>, fildes, buf, nbyte, ret);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div><div class="ttc" id="vcfilesys_8c_html_af7210d3e4f1de67fc1405d2f9fb06b61"><div class="ttname"><a href="../../d3/d1e/vcfilesys_8c.html#af7210d3e4f1de67fc1405d2f9fb06b61">DEBUG_MINOR</a></div><div class="ttdeci">#define DEBUG_MINOR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/vcfilesys_8c_source.html#l00079">vcfilesys.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="acf7010bd882e246e4a8f5965751806a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf7010bd882e246e4a8f5965751806a9">&#9670;&nbsp;</a></span>hostfs_log_cat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d05/structVCOS__LOG__CAT__T.html">VCOS_LOG_CAT_T</a> hostfs_log_cat</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html#l00068">68</a> of file <a class="el" href="../../d3/d1e/vcfilesys_8c_source.html">vcfilesys.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
