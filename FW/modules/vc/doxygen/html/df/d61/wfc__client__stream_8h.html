<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VideoCore Library: interface/khronos/wf/wfc_client_stream.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VideoCore Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b31d54d5631803016a26f28213a41162.html">interface</a></li><li class="navelem"><a class="el" href="../../dir_604e3c98d460a87e3e2345f6a2a71970.html">khronos</a></li><li class="navelem"><a class="el" href="../../dir_3ad5cbe1c92e87c222a25888eab0e376.html">wf</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">wfc_client_stream.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../da/d23/interface_2vctypes_2vc__image__types_8h_source.html">interface/vctypes/vc_image_types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d05/khrn__int__common_8h_source.html">interface/khronos/common/khrn_int_common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/dea/wfc_8h_source.html">interface/khronos/include/WF/wfc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d50/wfc__int_8h_source.html">interface/khronos/wf/wfc_int.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/dda/eglext_8h_source.html">interface/khronos/include/EGL/eglext.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for wfc_client_stream.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/db8/wfc__client__stream_8h__incl.png" border="0" usemap="#interface_2khronos_2wf_2wfc__client__stream_8h" alt=""/></div>
<map name="interface_2khronos_2wf_2wfc__client__stream_8h" id="interface_2khronos_2wf_2wfc__client__stream_8h">
<area shape="rect" id="node2" href="../../da/d23/interface_2vctypes_2vc__image__types_8h.html" title="interface/vctypes/vc\l_image_types.h" alt="" coords="983,676,1123,717"/>
<area shape="rect" id="node5" href="../../da/d05/khrn__int__common_8h.html" title="interface/khronos/common\l/khrn_int_common.h" alt="" coords="2331,765,2507,807"/>
<area shape="rect" id="node16" href="../../d1/dea/wfc_8h.html" title="Standard OpenWF&#45;C header file. Available from the Khronos OpenWF API Registry. " alt="" coords="840,184,1007,225"/>
<area shape="rect" id="node48" href="../../de/d50/wfc__int_8h.html" title="interface/khronos/wf\l/wfc_int.h" alt="" coords="853,95,993,136"/>
<area shape="rect" id="node49" href="../../d3/dda/eglext_8h.html" title="interface/khronos/include\l/EGL/eglext.h" alt="" coords="1069,95,1236,136"/>
<area shape="rect" id="node3" href="../../de/dc4/vcos__stdint_8h.html" title="interface/vcos/vcos\l_stdint.h" alt="" coords="830,765,966,807"/>
<area shape="rect" id="node6" href="../../d2/d98/v3d__ver_8h.html" title="helpers/v3d/v3d_ver.h" alt="" coords="2756,862,2907,889"/>
<area shape="rect" id="node7" href="../../d6/db4/vcos__assert_8h.html" title="interface/vcos/vcos\l_assert.h" alt="" coords="2246,855,2382,896"/>
<area shape="rect" id="node15" href="../../d9/d0a/vcos__stdbool_8h.html" title="interface/vcos/vcos\l_stdbool.h" alt="" coords="2595,855,2731,896"/>
<area shape="rect" id="node8" href="../../da/df3/vcos__types_8h.html" title="interface/vcos/vcos\l_types.h" alt="" coords="1286,944,1422,985"/>
<area shape="rect" id="node10" href="../../d2/d69/vcos__platform__types_8h.html" title="vcos_platform_types.h" alt="" coords="1362,1041,1517,1067"/>
<area shape="rect" id="node13" href="../../df/d5a/vcos__attr_8h.html" title="interface/vcos/vcos\l_attr.h" alt="" coords="1202,1033,1338,1075"/>
<area shape="rect" id="node11" href="../../d2/d4b/vcos__inttypes_8h.html" title="interface/vcos/vcos\l_inttypes.h" alt="" coords="1371,1123,1507,1164"/>
<area shape="rect" id="node17" href="../../de/d4e/wfcplatform_8h.html" title="wfcplatform.h" alt="" coords="873,273,974,300"/>
<area shape="rect" id="node18" href="../../d7/d3a/khrplatform_8h.html" title="../KHR/khrplatform.h" alt="" coords="808,505,951,531"/>
<area shape="rect" id="node19" href="../../da/de2/egl_8h.html" title="../EGL/egl.h" alt="" coords="939,348,1031,375"/>
<area shape="rect" id="node20" href="../../d4/d35/eglplatform_8h.html" title="eglplatform.h" alt="" coords="976,423,1073,449"/>
<area shape="rect" id="node21" href="../../db/d61/vc__dispmanx_8h.html" title="interface/vmcs_host\l/vc_dispmanx.h" alt="" coords="975,497,1115,539"/>
<area shape="rect" id="node22" href="../../d4/de3/vcos_8h.html" title="interface/vcos/vcos.h" alt="" coords="1121,773,1267,799"/>
<area shape="rect" id="node40" href="../../db/dbc/vc__dispservice__x__defs_8h.html" title="vc_dispservice_x_defs.h" alt="" coords="840,594,1007,621"/>
<area shape="rect" id="node41" href="../../d3/da6/vc__dispmanx__types_8h.html" title="interface/vmcs_host\l/vc_dispmanx_types.h" alt="" coords="1083,587,1236,628"/>
<area shape="rect" id="node43" href="../../d7/dcd/vchi_8h.html" title="interface/vchi/vchi.h" alt="" coords="659,594,798,621"/>
<area shape="rect" id="node23" href="../../db/db8/vcos__platform_8h.html" title="vcos_platform.h" alt="" coords="2457,862,2571,889"/>
<area shape="rect" id="node27" href="../../d0/d84/vcos__init_8h.html" title="interface/vcos/vcos\l_init.h" alt="" coords="646,855,782,896"/>
<area shape="rect" id="node28" href="../../d2/dc2/vcos__semaphore_8h.html" title="interface/vcos/vcos\l_semaphore.h" alt="" coords="1126,855,1262,896"/>
<area shape="rect" id="node29" href="../../de/d30/vcos__thread_8h.html" title="interface/vcos/vcos\l_thread.h" alt="" coords="1286,855,1422,896"/>
<area shape="rect" id="node30" href="../../da/d1b/vcos__mutex_8h.html" title="interface/vcos/vcos\l_mutex.h" alt="" coords="1446,855,1582,896"/>
<area shape="rect" id="node31" href="../../d8/db9/vcos__mem_8h.html" title="interface/vcos/vcos\l_mem.h" alt="" coords="806,855,942,896"/>
<area shape="rect" id="node32" href="../../d0/d85/vcos__logging_8h.html" title="interface/vcos/vcos\l_logging.h" alt="" coords="966,855,1102,896"/>
<area shape="rect" id="node33" href="../../d1/d77/vcos__string_8h.html" title="interface/vcos/vcos\l_string.h" alt="" coords="2086,855,2222,896"/>
<area shape="rect" id="node34" href="../../dc/dd7/vcos__event_8h.html" title="interface/vcos/vcos\l_event.h" alt="" coords="1606,855,1742,896"/>
<area shape="rect" id="node35" href="../../d1/d6d/vcos__thread__attr_8h.html" title="interface/vcos/vcos\l_thread_attr.h" alt="" coords="435,855,571,896"/>
<area shape="rect" id="node36" href="../../dc/d07/vcos__tls_8h.html" title="interface/vcos/vcos\l_tls.h" alt="" coords="1766,855,1902,896"/>
<area shape="rect" id="node37" href="../../d6/da9/vcos__reentrant__mutex_8h.html" title="interface/vcos/vcos\l_reentrant_mutex.h" alt="" coords="1926,855,2062,896"/>
<area shape="rect" id="node38" href="../../d6/d00/vcos__named__semaphore_8h.html" title="interface/vcos/vcos\l_named_semaphore.h" alt="" coords="95,855,245,896"/>
<area shape="rect" id="node39" href="../../dd/dc6/vcos__quickslow__mutex_8h.html" title="interface/vcos/vcos\l_quickslow_mutex.h" alt="" coords="270,855,411,896"/>
<area shape="rect" id="node42" href="../../d8/ddd/vc__display__types_8h.html" title="interface/vctypes/vc\l_display_types.h" alt="" coords="1147,676,1287,717"/>
<area shape="rect" id="node44" href="../../d9/d77/vchi__cfg_8h.html" title="interface/vchi/vchi\l_cfg.h" alt="" coords="422,676,550,717"/>
<area shape="rect" id="node45" href="../../d8/d56/vchi__common_8h.html" title="interface/vchi/vchi\l_common.h" alt="" coords="586,765,714,807"/>
<area shape="rect" id="node46" href="../../d4/d67/connection_8h.html" title="interface/vchi/connections\l/connection.h" alt="" coords="625,676,800,717"/>
<area shape="rect" id="node47" href="../../d1/dff/vchi__mh_8h.html" title="vchi_mh.h" alt="" coords="825,683,907,710"/>
<area shape="rect" id="node50" href="../../d1/d3f/eglext__brcm_8h.html" title="eglext_brcm.h" alt="" coords="1031,191,1135,218"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d50/wfc__client__stream_8h__dep__incl.png" border="0" usemap="#interface_2khronos_2wf_2wfc__client__stream_8hdep" alt=""/></div>
<map name="interface_2khronos_2wf_2wfc__client__stream_8hdep" id="interface_2khronos_2wf_2wfc__client__stream_8hdep">
<area shape="rect" id="node2" href="../../d1/dab/wfc__client_8c.html" title="interface/khronos/wf\l/wfc_client.c" alt="" coords="5,95,145,136"/>
<area shape="rect" id="node3" href="../../d4/d62/wfc__client__stream_8c.html" title="interface/khronos/wf\l/wfc_client_stream.c" alt="" coords="169,95,312,136"/>
</map>
</div>
</div>
<p><a href="../../df/d61/wfc__client__stream_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Flags</div></td></tr>
<tr class="memitem:af435f87668002f9486ce1d59a98a8cd8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#af435f87668002f9486ce1d59a98a8cd8">WFC_STREAM_FLAGS_NONE</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:af435f87668002f9486ce1d59a98a8cd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40716321d51d9ce4fa51a83884f616a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a40716321d51d9ce4fa51a83884f616a5">WFC_STREAM_FLAGS_BUF_AVAIL</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="memdesc:a40716321d51d9ce4fa51a83884f616a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow the server to indicate to the host when a buffer is available; for use with <a class="el" href="../../df/d61/wfc__client__stream_8h.html#a97cbabc43d8da209c8406c515e131944" title="Suspend until buffer is available on the server (requires WFC_STREAM_FLAGS_ASYNC_SEM to have been spe...">wfc_stream_await_buffer()</a>.  <a href="#a40716321d51d9ce4fa51a83884f616a5">More...</a><br /></td></tr>
<tr class="separator:a40716321d51d9ce4fa51a83884f616a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7986c5e7861145ce81275aaa58c9ae0f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a7986c5e7861145ce81275aaa58c9ae0f">WFC_STREAM_FLAGS_ANDROID_GL_STREAM</a>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr class="memdesc:a7986c5e7861145ce81275aaa58c9ae0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNL - Hack up a new semaphore thing to make Android rendering wait.  <a href="#a7986c5e7861145ce81275aaa58c9ae0f">More...</a><br /></td></tr>
<tr class="separator:a7986c5e7861145ce81275aaa58c9ae0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba9d53df05c2530c33bb7db8917ca3f1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#aba9d53df05c2530c33bb7db8917ca3f1">WFC_STREAM_FLAGS_ANDROID_MM_STREAM</a>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr class="memdesc:aba9d53df05c2530c33bb7db8917ca3f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">So the reference to the vc image in the pool can be released.  <a href="#aba9d53df05c2530c33bb7db8917ca3f1">More...</a><br /></td></tr>
<tr class="separator:aba9d53df05c2530c33bb7db8917ca3f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ee2cc2a9a9b3a0f8fff1ad3de684b1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#ad0ee2cc2a9a9b3a0f8fff1ad3de684b1">WFC_STREAM_FLAGS_EGL</a>&#160;&#160;&#160;(<a class="el" href="../../df/d61/wfc__client__stream_8h.html#a40716321d51d9ce4fa51a83884f616a5">WFC_STREAM_FLAGS_BUF_AVAIL</a>)</td></tr>
<tr class="memdesc:ad0ee2cc2a9a9b3a0f8fff1ad3de684b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags needed to work with EGL.  <a href="#ad0ee2cc2a9a9b3a0f8fff1ad3de684b1">More...</a><br /></td></tr>
<tr class="separator:ad0ee2cc2a9a9b3a0f8fff1ad3de684b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Internal flags; do not use directly.</div></td></tr>
<tr class="memitem:a2a504aea63fff9e57f6b3430ede1fabe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a2a504aea63fff9e57f6b3430ede1fabe">WFC_STREAM_FLAGS_REQ_RECT</a>&#160;&#160;&#160;(1 &lt;&lt; 31)</td></tr>
<tr class="memdesc:a2a504aea63fff9e57f6b3430ede1fabe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow the server to indicate to the host that a change to the source and/or destination rectangles has been requested by the server.  <a href="#a2a504aea63fff9e57f6b3430ede1fabe">More...</a><br /></td></tr>
<tr class="separator:a2a504aea63fff9e57f6b3430ede1fabe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae71b204939f659ab1a7840cf042cfa67"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#ae71b204939f659ab1a7840cf042cfa67">WFC_STREAM_REQ_RECT_CALLBACK_T</a>) (<a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *args, const <a class="el" href="../../de/d4e/wfcplatform_8h.html#a94f749028f2555b97683c6eadd516ec9">WFCint</a> dest_rect[<a class="el" href="../../de/d50/wfc__int_8h.html#adac6f0c2bb5f96011aa4ac7ce14c977e">WFC_RECT_SIZE</a>], const <a class="el" href="../../de/d4e/wfcplatform_8h.html#ac36dd8c408197c86f61203ad3ba0e13d">WFCfloat</a> src_rect[<a class="el" href="../../de/d50/wfc__int_8h.html#adac6f0c2bb5f96011aa4ac7ce14c977e">WFC_RECT_SIZE</a>])</td></tr>
<tr class="memdesc:ae71b204939f659ab1a7840cf042cfa67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for callback from <a class="el" href="../../df/d61/wfc__client__stream_8h.html#a9aba47bf0a63cf24a6dadd31a5d2e160" title="Create a stream, using the given stream handle, which will notify the calling module when the server ...">wfc_stream_create_req_rect()</a>.  <a href="#ae71b204939f659ab1a7840cf042cfa67">More...</a><br /></td></tr>
<tr class="separator:ae71b204939f659ab1a7840cf042cfa67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9a0ddda34b2df016e7912857c2909eda"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a9a0ddda34b2df016e7912857c2909eda">wfc_stream_get_next</a> (<a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>)</td></tr>
<tr class="memdesc:a9a0ddda34b2df016e7912857c2909eda"><td class="mdescLeft">&#160;</td><td class="mdescRight">In cases where the caller doesn't want to assign a stream number, provide one for it.  <a href="#a9a0ddda34b2df016e7912857c2909eda">More...</a><br /></td></tr>
<tr class="separator:a9a0ddda34b2df016e7912857c2909eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80dfd842d8f0f70e42787b900f82f2e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a80dfd842d8f0f70e42787b900f82f2e5">wfc_stream_create</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a>)</td></tr>
<tr class="memdesc:a80dfd842d8f0f70e42787b900f82f2e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a stream, using the given stream handle (typically assigned by the window manager). Return zero if OK.  <a href="#a80dfd842d8f0f70e42787b900f82f2e5">More...</a><br /></td></tr>
<tr class="separator:a80dfd842d8f0f70e42787b900f82f2e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f257846f3fb02fe150d07a89163045c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a2f257846f3fb02fe150d07a89163045c">wfc_stream_create_assign_id</a> (<a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a>)</td></tr>
<tr class="memdesc:a2f257846f3fb02fe150d07a89163045c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a stream, and automatically assign it a new stream number, which is returned.  <a href="#a2f257846f3fb02fe150d07a89163045c">More...</a><br /></td></tr>
<tr class="separator:a2f257846f3fb02fe150d07a89163045c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aba47bf0a63cf24a6dadd31a5d2e160"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a9aba47bf0a63cf24a6dadd31a5d2e160">wfc_stream_create_req_rect</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a>, <a class="el" href="../../df/d61/wfc__client__stream_8h.html#ae71b204939f659ab1a7840cf042cfa67">WFC_STREAM_REQ_RECT_CALLBACK_T</a> callback, <a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *cb_args)</td></tr>
<tr class="memdesc:a9aba47bf0a63cf24a6dadd31a5d2e160"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a stream, using the given stream handle, which will notify the calling module when the server requests a change in source and/or destination rectangle, using the supplied callback. Return zero if OK.  <a href="#a9aba47bf0a63cf24a6dadd31a5d2e160">More...</a><br /></td></tr>
<tr class="separator:a9aba47bf0a63cf24a6dadd31a5d2e160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e3fa8fbaef1916622f697509714549d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0a/vcos__stdbool_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a0e3fa8fbaef1916622f697509714549d">wfc_stream_register_source_or_mask</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d9/d0a/vcos__stdbool_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> add_source_or_mask)</td></tr>
<tr class="memdesc:a0e3fa8fbaef1916622f697509714549d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate that a source or mask is now associated with this stream, or should now be removed from such an association.  <a href="#a0e3fa8fbaef1916622f697509714549d">More...</a><br /></td></tr>
<tr class="separator:a0e3fa8fbaef1916622f697509714549d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97cbabc43d8da209c8406c515e131944"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a97cbabc43d8da209c8406c515e131944">wfc_stream_await_buffer</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream)</td></tr>
<tr class="memdesc:a97cbabc43d8da209c8406c515e131944"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspend until buffer is available on the server (requires WFC_STREAM_FLAGS_ASYNC_SEM to have been specified on creation).  <a href="#a97cbabc43d8da209c8406c515e131944">More...</a><br /></td></tr>
<tr class="separator:a97cbabc43d8da209c8406c515e131944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81542b5339b577cd1570c91d6a2a5087"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a81542b5339b577cd1570c91d6a2a5087">wfc_stream_destroy</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream)</td></tr>
<tr class="memdesc:a81542b5339b577cd1570c91d6a2a5087"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a stream.  <a href="#a81542b5339b577cd1570c91d6a2a5087">More...</a><br /></td></tr>
<tr class="separator:a81542b5339b577cd1570c91d6a2a5087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93b46d0a190edd97c145539e64dcec24"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a93b46d0a190edd97c145539e64dcec24">wfc_stream_signal_eglimage_data</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d3/dda/eglext_8h.html#ac56f71530c81ade3ddaab91f45696909">EGLImageKHR</a> im)</td></tr>
<tr class="separator:a93b46d0a190edd97c145539e64dcec24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a43374c66c00f54ed03bc49eca5a7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#ad2a43374c66c00f54ed03bc49eca5a7a">wfc_stream_signal_eglimage_data_protected</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d3/dda/eglext_8h.html#ac56f71530c81ade3ddaab91f45696909">EGLImageKHR</a> im, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> is_protected)</td></tr>
<tr class="separator:ad2a43374c66c00f54ed03bc49eca5a7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e67eb097d2f0ebe24fdb65e042062d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#af5e67eb097d2f0ebe24fdb65e042062d">wfc_stream_release_eglimage_data</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d3/dda/eglext_8h.html#ac56f71530c81ade3ddaab91f45696909">EGLImageKHR</a> im)</td></tr>
<tr class="separator:af5e67eb097d2f0ebe24fdb65e042062d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04c149c2fcb465279127e2e376a578c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a04c149c2fcb465279127e2e376a578c4">wfc_stream_signal_mm_image_data</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> im)</td></tr>
<tr class="separator:a04c149c2fcb465279127e2e376a578c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33c89bdfca725712a71b8293f85e6504"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a33c89bdfca725712a71b8293f85e6504">wfc_stream_signal_raw_pixels</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> handle, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="../../dc/dd2/glext_8h.html#a71a65ffd977afe9c3fef116a5bc9ee27">format</a>, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> w, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> h, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> pitch, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> vpitch)</td></tr>
<tr class="separator:a33c89bdfca725712a71b8293f85e6504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a482b39cd40cfc925ed6f5525525751c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a482b39cd40cfc925ed6f5525525751c5">wfc_stream_signal_image</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, const <a class="el" href="../../de/d87/structWFC__STREAM__IMAGE__T.html">WFC_STREAM_IMAGE_T</a> *<a class="el" href="../../d3/dda/eglext_8h.html#a0a221b005894579fea3b9eb7bfc2ee71">image</a>)</td></tr>
<tr class="separator:a482b39cd40cfc925ed6f5525525751c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4164be3dbfb6f9b15bd4231b7b358f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#aed4164be3dbfb6f9b15bd4231b7b358f">wfc_stream_register</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream)</td></tr>
<tr class="separator:aed4164be3dbfb6f9b15bd4231b7b358f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af401f62ca22b7b2cba5b86a855bdad03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#af401f62ca22b7b2cba5b86a855bdad03">wfc_stream_unregister</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream)</td></tr>
<tr class="separator:af401f62ca22b7b2cba5b86a855bdad03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Off-screen composition functions</div></td></tr>
<tr class="memitem:a27ce5930cf6d0bf5f766f9e275ac8a33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a27ce5930cf6d0bf5f766f9e275ac8a33">wfc_stream_create_for_context</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="../../dc/dd2/glext_8h.html#a9a82cf3caff84cabc4598e2619faac17">width</a>, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="../../d1/d3f/eglext__brcm_8h.html#aa352f2804b9902ac30769c00dde75d5f">height</a>)</td></tr>
<tr class="memdesc:a27ce5930cf6d0bf5f766f9e275ac8a33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a stream for an off-screen context to output to, with the default number of buffers.  <a href="#a27ce5930cf6d0bf5f766f9e275ac8a33">More...</a><br /></td></tr>
<tr class="separator:a27ce5930cf6d0bf5f766f9e275ac8a33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf610e8f24538a265c4f508ccd2b741e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#acf610e8f24538a265c4f508ccd2b741e">wfc_stream_create_for_context_nbufs</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="../../dc/dd2/glext_8h.html#a9a82cf3caff84cabc4598e2619faac17">width</a>, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="el" href="../../d1/d3f/eglext__brcm_8h.html#aa352f2804b9902ac30769c00dde75d5f">height</a>, <a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> nbufs)</td></tr>
<tr class="memdesc:acf610e8f24538a265c4f508ccd2b741e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a stream for an off-screen context to output to, with a specific number of buffers.  <a href="#acf610e8f24538a265c4f508ccd2b741e">More...</a><br /></td></tr>
<tr class="separator:acf610e8f24538a265c4f508ccd2b741e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ec06ef4ba897c3e5a8d412b4d48e9d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0a/vcos__stdbool_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#a2ec06ef4ba897c3e5a8d412b4d48e9d0">wfc_stream_used_for_off_screen</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream)</td></tr>
<tr class="memdesc:a2ec06ef4ba897c3e5a8d412b4d48e9d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this stream exists, and is in use as the output of an off-screen context.  <a href="#a2ec06ef4ba897c3e5a8d412b4d48e9d0">More...</a><br /></td></tr>
<tr class="separator:a2ec06ef4ba897c3e5a8d412b4d48e9d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa18d4b166f2e220d1c152cee1bb61be7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#aa18d4b166f2e220d1c152cee1bb61be7">wfc_stream_register_off_screen</a> (<a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream, <a class="el" href="../../d9/d0a/vcos__stdbool_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> used_for_off_screen)</td></tr>
<tr class="memdesc:aa18d4b166f2e220d1c152cee1bb61be7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called on behalf of an off-screen context, to either set or clear the stream's flag indicating that it's being used as output for that context.  <a href="#aa18d4b166f2e220d1c152cee1bb61be7">More...</a><br /></td></tr>
<tr class="separator:aa18d4b166f2e220d1c152cee1bb61be7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7986c5e7861145ce81275aaa58c9ae0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7986c5e7861145ce81275aaa58c9ae0f">&#9670;&nbsp;</a></span>WFC_STREAM_FLAGS_ANDROID_GL_STREAM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WFC_STREAM_FLAGS_ANDROID_GL_STREAM&#160;&#160;&#160;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GNL - Hack up a new semaphore thing to make Android rendering wait. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html#l00046">46</a> of file <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html">wfc_client_stream.h</a>.</p>

</div>
</div>
<a id="aba9d53df05c2530c33bb7db8917ca3f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba9d53df05c2530c33bb7db8917ca3f1">&#9670;&nbsp;</a></span>WFC_STREAM_FLAGS_ANDROID_MM_STREAM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WFC_STREAM_FLAGS_ANDROID_MM_STREAM&#160;&#160;&#160;(1 &lt;&lt; 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>So the reference to the vc image in the pool can be released. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html#l00048">48</a> of file <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html">wfc_client_stream.h</a>.</p>

</div>
</div>
<a id="a40716321d51d9ce4fa51a83884f616a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40716321d51d9ce4fa51a83884f616a5">&#9670;&nbsp;</a></span>WFC_STREAM_FLAGS_BUF_AVAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WFC_STREAM_FLAGS_BUF_AVAIL&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow the server to indicate to the host when a buffer is available; for use with <a class="el" href="../../df/d61/wfc__client__stream_8h.html#a97cbabc43d8da209c8406c515e131944" title="Suspend until buffer is available on the server (requires WFC_STREAM_FLAGS_ASYNC_SEM to have been spe...">wfc_stream_await_buffer()</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html#l00044">44</a> of file <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html">wfc_client_stream.h</a>.</p>

</div>
</div>
<a id="ad0ee2cc2a9a9b3a0f8fff1ad3de684b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0ee2cc2a9a9b3a0f8fff1ad3de684b1">&#9670;&nbsp;</a></span>WFC_STREAM_FLAGS_EGL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WFC_STREAM_FLAGS_EGL&#160;&#160;&#160;(<a class="el" href="../../df/d61/wfc__client__stream_8h.html#a40716321d51d9ce4fa51a83884f616a5">WFC_STREAM_FLAGS_BUF_AVAIL</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags needed to work with EGL. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html#l00051">51</a> of file <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html">wfc_client_stream.h</a>.</p>

</div>
</div>
<a id="af435f87668002f9486ce1d59a98a8cd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af435f87668002f9486ce1d59a98a8cd8">&#9670;&nbsp;</a></span>WFC_STREAM_FLAGS_NONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WFC_STREAM_FLAGS_NONE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html#l00041">41</a> of file <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html">wfc_client_stream.h</a>.</p>

</div>
</div>
<a id="a2a504aea63fff9e57f6b3430ede1fabe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a504aea63fff9e57f6b3430ede1fabe">&#9670;&nbsp;</a></span>WFC_STREAM_FLAGS_REQ_RECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WFC_STREAM_FLAGS_REQ_RECT&#160;&#160;&#160;(1 &lt;&lt; 31)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow the server to indicate to the host that a change to the source and/or destination rectangles has been requested by the server. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html#l00059">59</a> of file <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html">wfc_client_stream.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ae71b204939f659ab1a7840cf042cfa67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae71b204939f659ab1a7840cf042cfa67">&#9670;&nbsp;</a></span>WFC_STREAM_REQ_RECT_CALLBACK_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>(* WFC_STREAM_REQ_RECT_CALLBACK_T) (<a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *args, const <a class="el" href="../../de/d4e/wfcplatform_8h.html#a94f749028f2555b97683c6eadd516ec9">WFCint</a> dest_rect[<a class="el" href="../../de/d50/wfc__int_8h.html#adac6f0c2bb5f96011aa4ac7ce14c977e">WFC_RECT_SIZE</a>], const <a class="el" href="../../de/d4e/wfcplatform_8h.html#ac36dd8c408197c86f61203ad3ba0e13d">WFCfloat</a> src_rect[<a class="el" href="../../de/d50/wfc__int_8h.html#adac6f0c2bb5f96011aa4ac7ce14c977e">WFC_RECT_SIZE</a>])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type for callback from <a class="el" href="../../df/d61/wfc__client__stream_8h.html#a9aba47bf0a63cf24a6dadd31a5d2e160" title="Create a stream, using the given stream handle, which will notify the calling module when the server ...">wfc_stream_create_req_rect()</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html#l00066">66</a> of file <a class="el" href="../../df/d61/wfc__client__stream_8h_source.html">wfc_client_stream.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a97cbabc43d8da209c8406c515e131944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97cbabc43d8da209c8406c515e131944">&#9670;&nbsp;</a></span>wfc_stream_await_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_await_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suspend until buffer is available on the server (requires WFC_STREAM_FLAGS_ASYNC_SEM to have been specified on creation). </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00314">314</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>.</p>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;%s: stream 0x%x&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr = wfc_stream_find_stream_ptr(stream);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">if</span> (!stream_ptr)</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#aabc5314eba790d654e1d1873091c5890">vcos_verify</a>(stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#af02a2613ecef71cc0131fcb07158e129">info</a>.<a class="code" href="../../d2/d49/structWFC__STREAM__INFO__T.html#a9ba27ccba5b0cd1010294d2ec0a71933">flags</a> &amp; <a class="code" href="../../df/d61/wfc__client__stream_8h.html#a40716321d51d9ce4fa51a83884f616a5">WFC_STREAM_FLAGS_BUF_AVAIL</a>))</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <a class="code" href="../../db/db8/vcos__platform_8h.html#a787f12699e3f69e4975d5c2c721c8b71">VCOS_SEMAPHORE_T</a> image_available_sem;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8">VCOS_STATUS_T</a> <a class="code" href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="comment">// Long running operation, so keep VC alive until it completes.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#ab3f9e062565c466c1784292e5649259b">wfc_server_use_keep_alive</a>();</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      status = <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#aec46d55c9e9b7f8a4beab46601744b56">vcos_semaphore_create</a>(&amp;image_available_sem, <span class="stringliteral">&quot;WFC image available&quot;</span>, 0);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a2413d74a65e1859d1fbc9bc098053f50">vcos_assert</a>(status == <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a>);      <span class="comment">// For all relevant platforms</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a6960c85c99ae44c85dff765dfc5bc7d9">vcos_unused</a>(status);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#ac530fd3eaabcd8f3dfdd6a5f8d34130d">wfc_server_stream_on_image_available</a>(stream, wfc_client_stream_post_sem, &amp;image_available_sem);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      vcos_log_trace(<span class="stringliteral">&quot;%s: pre async sem wait: stream: %X&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#a1478647a6bc7e82569361d72c04dceb0">vcos_semaphore_wait</a>(&amp;image_available_sem);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      vcos_log_trace(<span class="stringliteral">&quot;%s: post async sem wait: stream: %X&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <a class="code" href="../../d2/dc2/vcos__semaphore_8h.html#a4dd7165fc2dd9873731b11ec07202c91">vcos_semaphore_delete</a>(&amp;image_available_sem);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#a4b396b97a6a8371246dc004c9389e73a">wfc_server_release_keep_alive</a>();</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a>(stream_ptr);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div><div class="ttc" id="egl__client__get__proc_8c_html_a2413d74a65e1859d1fbc9bc098053f50"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a2413d74a65e1859d1fbc9bc098053f50">vcos_assert</a></div><div class="ttdeci">#define vcos_assert(cond)</div></div>
<div class="ttc" id="structWFC__STREAM__INFO__T_html_a9ba27ccba5b0cd1010294d2ec0a71933"><div class="ttname"><a href="../../d2/d49/structWFC__STREAM__INFO__T.html#a9ba27ccba5b0cd1010294d2ec0a71933">WFC_STREAM_INFO_T::flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8c/wfc__server__api_8h_source.html#l00054">wfc_server_api.h:54</a></div></div>
<div class="ttc" id="mmal__util_8c_html_affbc5e7be0de233c0edafa72d894118c"><div class="ttname"><a href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a></div><div class="ttdeci">MMAL_STATUS_T status</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddd/mmal__util_8c_source.html#l00037">mmal_util.c:37</a></div></div>
<div class="ttc" id="vcos__semaphore_8h_html_a1478647a6bc7e82569361d72c04dceb0"><div class="ttname"><a href="../../d2/dc2/vcos__semaphore_8h.html#a1478647a6bc7e82569361d72c04dceb0">vcos_semaphore_wait</a></div><div class="ttdeci">VCOS_INLINE_DECL VCOS_STATUS_T vcos_semaphore_wait(VCOS_SEMAPHORE_T *sem)</div><div class="ttdoc">Wait on a semaphore. </div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8">VCOS_STATUS_T</a></div><div class="ttdeci">VCOS_STATUS_T</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00073">vcos_types.h:73</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a6960c85c99ae44c85dff765dfc5bc7d9"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a6960c85c99ae44c85dff765dfc5bc7d9">vcos_unused</a></div><div class="ttdeci">#define vcos_unused(x)</div></div>
<div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_a4b396b97a6a8371246dc004c9389e73a"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#a4b396b97a6a8371246dc004c9389e73a">wfc_server_release_keep_alive</a></div><div class="ttdeci">void wfc_server_release_keep_alive(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00125">wfc_client_server_api.c:125</a></div></div>
<div class="ttc" id="vcos__semaphore_8h_html_a4dd7165fc2dd9873731b11ec07202c91"><div class="ttname"><a href="../../d2/dc2/vcos__semaphore_8h.html#a4dd7165fc2dd9873731b11ec07202c91">vcos_semaphore_delete</a></div><div class="ttdeci">VCOS_INLINE_DECL void vcos_semaphore_delete(VCOS_SEMAPHORE_T *sem)</div><div class="ttdoc">Delete a semaphore, releasing any resources consumed by it. </div></div>
<div class="ttc" id="wfc__client__stream_8c_html_acd28ae372e040d3f461f38324bea1976"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a></div><div class="ttdeci">#define STREAM_UNLOCK(stream_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00067">wfc_client_stream.c:67</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_af02a2613ecef71cc0131fcb07158e129"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#af02a2613ecef71cc0131fcb07158e129">WFC_STREAM_tag::info</a></div><div class="ttdeci">WFC_STREAM_INFO_T info</div><div class="ttdoc">Configuration info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00094">wfc_client_stream.c:94</a></div></div>
<div class="ttc" id="wfc__client__stream_8h_html_a40716321d51d9ce4fa51a83884f616a5"><div class="ttname"><a href="../../df/d61/wfc__client__stream_8h.html#a40716321d51d9ce4fa51a83884f616a5">WFC_STREAM_FLAGS_BUF_AVAIL</a></div><div class="ttdeci">#define WFC_STREAM_FLAGS_BUF_AVAIL</div><div class="ttdoc">Allow the server to indicate to the host when a buffer is available; for use with wfc_stream_await_bu...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d61/wfc__client__stream_8h_source.html#l00044">wfc_client_stream.h:44</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_aabc5314eba790d654e1d1873091c5890"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#aabc5314eba790d654e1d1873091c5890">vcos_verify</a></div><div class="ttdeci">#define vcos_verify(cond)</div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00075">vcos_types.h:75</a></div></div>
<div class="ttc" id="vcos__semaphore_8h_html_aec46d55c9e9b7f8a4beab46601744b56"><div class="ttname"><a href="../../d2/dc2/vcos__semaphore_8h.html#aec46d55c9e9b7f8a4beab46601744b56">vcos_semaphore_create</a></div><div class="ttdeci">VCOS_INLINE_DECL VCOS_STATUS_T vcos_semaphore_create(VCOS_SEMAPHORE_T *sem, const char *name, VCOS_UNSIGNED count)</div><div class="ttdoc">Create a semaphore. </div></div>
<div class="ttc" id="vcos__platform_8h_html_a787f12699e3f69e4975d5c2c721c8b71"><div class="ttname"><a href="../../db/db8/vcos__platform_8h.html#a787f12699e3f69e4975d5c2c721c8b71">VCOS_SEMAPHORE_T</a></div><div class="ttdeci">sem_t VCOS_SEMAPHORE_T</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db8/vcos__platform_8h_source.html#l00096">vcos_platform.h:96</a></div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_ab3f9e062565c466c1784292e5649259b"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#ab3f9e062565c466c1784292e5649259b">wfc_server_use_keep_alive</a></div><div class="ttdeci">void wfc_server_use_keep_alive(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00118">wfc_client_server_api.c:118</a></div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_ac530fd3eaabcd8f3dfdd6a5f8d34130d"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#ac530fd3eaabcd8f3dfdd6a5f8d34130d">wfc_server_stream_on_image_available</a></div><div class="ttdeci">void wfc_server_stream_on_image_available(WFCNativeStreamType stream, WFC_CALLBACK_T image_available_cb, void *image_available_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00655">wfc_client_server_api.c:655</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80dfd842d8f0f70e42787b900f82f2e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80dfd842d8f0f70e42787b900f82f2e5">&#9670;&nbsp;</a></span>wfc_stream_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> wfc_stream_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a stream, using the given stream handle (typically assigned by the window manager). Return zero if OK. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00164">164</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00224">wfc_stream_create_assign_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> result = 0;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   vcos_log_info(<span class="stringliteral">&quot;%s: stream 0x%x flags 0x%x&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream, <a class="code" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   <span class="comment">// Create stream</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   stream_ptr = wfc_stream_create_stream_ptr(stream, <span class="keyword">false</span>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="keywordflow">if</span>(stream_ptr == <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;%s: unable to create data block for stream 0x%x&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8acdc4bb6fa0cab99955b64136f1bb7926">VCOS_ENOMEM</a>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> pid = <a class="code" href="../../de/d30/vcos__thread_8h.html#a4a7a1b694dcb3cdf222cdda8f9ee7439">vcos_process_id_current</a>();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> pid_lo = (<a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>) pid;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> pid_hi = (<a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>) (pid &gt;&gt; 32);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keywordtype">int</span> stream_in_use_retries = <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#a24e8d83877094b431134bb755147e126">WFC_STREAM_RETRIES</a>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <a class="code" href="../../d2/d49/structWFC__STREAM__INFO__T.html">WFC_STREAM_INFO_T</a> info;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   memset(&amp;info, 0, <span class="keyword">sizeof</span>(info));</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   info.<a class="code" href="../../d2/d49/structWFC__STREAM__INFO__T.html#a212283e4f9cffed6f78271461cdedc61">size</a> = <span class="keyword">sizeof</span>(info);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   info.<a class="code" href="../../d2/d49/structWFC__STREAM__INFO__T.html#a9ba27ccba5b0cd1010294d2ec0a71933">flags</a> = <a class="code" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordflow">do</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#a1b63b402a93ccab36c4232d69517fd16">handle</a> = <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#a6665bd4a5af7f3b41108fd918a062faf">wfc_server_stream_create_info</a>(stream, &amp;info, pid_lo, pid_hi);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      vcos_log_trace(<span class="stringliteral">&quot;%s: server create returned 0x%x&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#a1b63b402a93ccab36c4232d69517fd16">handle</a>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="comment">// If a handle is re-used rapidly, it may still be in use in the server temporarily</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="comment">// Retry after a short delay</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keywordflow">if</span> (stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#a1b63b402a93ccab36c4232d69517fd16">handle</a> == <a class="code" href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a>)</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;         <a class="code" href="../../de/d30/vcos__thread_8h.html#a0a8ff046abbe0114d9bd85c46d642ad4">vcos_sleep</a>(<a class="code" href="../../d4/d62/wfc__client__stream_8c.html#ac2b63ebe494306ff28d41c2f4bfb0719">WFC_STREAM_RETRY_DELAY_MS</a>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <span class="keywordflow">while</span> (stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#a1b63b402a93ccab36c4232d69517fd16">handle</a> == <a class="code" href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a> &amp;&amp; stream_in_use_retries-- &gt; 0);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keywordflow">if</span> (stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#a1b63b402a93ccab36c4232d69517fd16">handle</a> == <a class="code" href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a>)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">// Even after the retries, stream handle was still in use. Fail.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      vcos_log_error(<span class="stringliteral">&quot;%s: stream 0x%x already exists in server&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      result = <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8a0ca6e99c27ba605c50ae59084a302468">VCOS_EEXIST</a>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      wfc_stream_destroy_if_ready(stream_ptr);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a2413d74a65e1859d1fbc9bc098053f50">vcos_assert</a>(stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#a1b63b402a93ccab36c4232d69517fd16">handle</a> == stream);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">registrations</a>++;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#af02a2613ecef71cc0131fcb07158e129">info</a>.<a class="code" href="../../d2/d49/structWFC__STREAM__INFO__T.html#a9ba27ccba5b0cd1010294d2ec0a71933">flags</a> = <a class="code" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a>(stream_ptr);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="ttc" id="egl__client__get__proc_8c_html_a2413d74a65e1859d1fbc9bc098053f50"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a2413d74a65e1859d1fbc9bc098053f50">vcos_assert</a></div><div class="ttdeci">#define vcos_assert(cond)</div></div>
<div class="ttc" id="structWFC__STREAM__INFO__T_html_a9ba27ccba5b0cd1010294d2ec0a71933"><div class="ttname"><a href="../../d2/d49/structWFC__STREAM__INFO__T.html#a9ba27ccba5b0cd1010294d2ec0a71933">WFC_STREAM_INFO_T::flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8c/wfc__server__api_8h_source.html#l00054">wfc_server_api.h:54</a></div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_a6665bd4a5af7f3b41108fd918a062faf"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#a6665bd4a5af7f3b41108fd918a062faf">wfc_server_stream_create_info</a></div><div class="ttdeci">WFCNativeStreamType wfc_server_stream_create_info(WFCNativeStreamType stream, const WFC_STREAM_INFO_T *info, uint32_t pid_lo, uint32_t pid_hi)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00295">wfc_client_server_api.c:295</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_ac2b63ebe494306ff28d41c2f4bfb0719"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#ac2b63ebe494306ff28d41c2f4bfb0719">WFC_STREAM_RETRY_DELAY_MS</a></div><div class="ttdeci">#define WFC_STREAM_RETRY_DELAY_MS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00072">wfc_client_stream.c:72</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_a24e8d83877094b431134bb755147e126"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#a24e8d83877094b431134bb755147e126">WFC_STREAM_RETRIES</a></div><div class="ttdeci">#define WFC_STREAM_RETRIES</div><div class="ttdoc">Number of attempts allowed to create a stream with a given handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00074">wfc_client_stream.c:74</a></div></div>
<div class="ttc" id="eglext_8h_html_a0f1b4b29f7a4e4106eec81bb30f16a01"><div class="ttname"><a href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a></div><div class="ttdeci">EGLSyncKHR EGLint flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/eglext_8h_source.html#l00188">eglext.h:188</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_acd28ae372e040d3f461f38324bea1976"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a></div><div class="ttdeci">#define STREAM_UNLOCK(stream_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00067">wfc_client_stream.c:67</a></div></div>
<div class="ttc" id="wfc_8h_html_af7088007b2f62d4b1fe2c9aa70e3f6a7"><div class="ttname"><a href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a></div><div class="ttdeci">#define WFC_INVALID_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00041">khrn_misc.h:41</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_a1b63b402a93ccab36c4232d69517fd16"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#a1b63b402a93ccab36c4232d69517fd16">WFC_STREAM_tag::handle</a></div><div class="ttdeci">WFCNativeStreamType handle</div><div class="ttdoc">Handle; may be assigned by window manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00082">wfc_client_stream.c:82</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_af02a2613ecef71cc0131fcb07158e129"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#af02a2613ecef71cc0131fcb07158e129">WFC_STREAM_tag::info</a></div><div class="ttdeci">WFC_STREAM_INFO_T info</div><div class="ttdoc">Configuration info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00094">wfc_client_stream.c:94</a></div></div>
<div class="ttc" id="structWFC__STREAM__INFO__T_html_a212283e4f9cffed6f78271461cdedc61"><div class="ttname"><a href="../../d2/d49/structWFC__STREAM__INFO__T.html#a212283e4f9cffed6f78271461cdedc61">WFC_STREAM_INFO_T::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8c/wfc__server__api_8h_source.html#l00053">wfc_server_api.h:53</a></div></div>
<div class="ttc" id="containers__types_8h_html_a06896e8c53f721507066c079052171f8"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a></div><div class="ttdeci">unsigned long uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00073">containers_types.h:73</a></div></div>
<div class="ttc" id="vcos__thread_8h_html_a4a7a1b694dcb3cdf222cdda8f9ee7439"><div class="ttname"><a href="../../de/d30/vcos__thread_8h.html#a4a7a1b694dcb3cdf222cdda8f9ee7439">vcos_process_id_current</a></div><div class="ttdeci">VCOS_INLINE_DECL VCOS_UNSIGNED vcos_process_id_current(void)</div><div class="ttdoc">Return a unique identifier for the current process. </div></div>
<div class="ttc" id="structWFC__STREAM__INFO__T_html"><div class="ttname"><a href="../../d2/d49/structWFC__STREAM__INFO__T.html">WFC_STREAM_INFO_T</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8c/wfc__server__api_8h_source.html#l00051">wfc_server_api.h:51</a></div></div>
<div class="ttc" id="containers__types_8h_html_aaa5d1cd013383c889537491c3cfd9aad"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a></div><div class="ttdeci">unsigned long long uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00075">containers_types.h:75</a></div></div>
<div class="ttc" id="vcos__thread_8h_html_a0a8ff046abbe0114d9bd85c46d642ad4"><div class="ttname"><a href="../../de/d30/vcos__thread_8h.html#a0a8ff046abbe0114d9bd85c46d642ad4">vcos_sleep</a></div><div class="ttdeci">VCOS_INLINE_DECL void vcos_sleep(uint32_t ms)</div><div class="ttdoc">Sleep a while. </div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_aa0053aac55127a6aedaf1ec1c315b61b"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">WFC_STREAM_tag::registrations</a></div><div class="ttdeci">uint32_t registrations</div><div class="ttdoc">Number of times this stream has been registered in the process. Creation implies registration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00085">wfc_client_stream.c:85</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8a0ca6e99c27ba605c50ae59084a302468"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8a0ca6e99c27ba605c50ae59084a302468">VCOS_EEXIST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00083">vcos_types.h:83</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8acdc4bb6fa0cab99955b64136f1bb7926"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8acdc4bb6fa0cab99955b64136f1bb7926">VCOS_ENOMEM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00081">vcos_types.h:81</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f257846f3fb02fe150d07a89163045c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f257846f3fb02fe150d07a89163045c">&#9670;&nbsp;</a></span>wfc_stream_create_assign_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> wfc_stream_create_assign_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a stream, and automatically assign it a new stream number, which is returned. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00224">224</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df3/vcos__types_8h_source.html#l00083">VCOS_EEXIST</a>, <a class="el" href="../../d5/d5f/khrn__misc_8h_source.html#l00041">WFC_INVALID_HANDLE</a>, <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00164">wfc_stream_create()</a>, <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00244">wfc_stream_create_req_rect()</a>, and <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00148">wfc_stream_get_next()</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <a class="code" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> stream = <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#a9a0ddda34b2df016e7912857c2909eda">wfc_stream_get_next</a>();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> failure = <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#a80dfd842d8f0f70e42787b900f82f2e5">wfc_stream_create</a>(stream, <a class="code" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <span class="keywordflow">if</span> (failure == <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8a0ca6e99c27ba605c50ae59084a302468">VCOS_EEXIST</a>)</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="comment">// If a duplicate stream exists, give it one more go with a new ID</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      stream = <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#a9a0ddda34b2df016e7912857c2909eda">wfc_stream_get_next</a>();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      failure = <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#a80dfd842d8f0f70e42787b900f82f2e5">wfc_stream_create</a>(stream, <a class="code" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <span class="keywordflow">if</span>(failure) {<span class="keywordflow">return</span> <a class="code" href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a>;}</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   <span class="keywordflow">else</span> {<span class="keywordflow">return</span> stream;}</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div><div class="ttc" id="wfcplatform_8h_html_a93e059a3a756af667b37e688d0b66366"><div class="ttname"><a href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a></div><div class="ttdeci">WFCHandle WFCNativeStreamType</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4e/wfcplatform_8h_source.html#l00065">wfcplatform.h:65</a></div></div>
<div class="ttc" id="eglext_8h_html_a0f1b4b29f7a4e4106eec81bb30f16a01"><div class="ttname"><a href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a></div><div class="ttdeci">EGLSyncKHR EGLint flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/eglext_8h_source.html#l00188">eglext.h:188</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_a80dfd842d8f0f70e42787b900f82f2e5"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#a80dfd842d8f0f70e42787b900f82f2e5">wfc_stream_create</a></div><div class="ttdeci">uint32_t wfc_stream_create(WFCNativeStreamType stream, uint32_t flags)</div><div class="ttdoc">Create a stream, using the given stream handle (typically assigned by the window manager). Return zero if OK. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00164">wfc_client_stream.c:164</a></div></div>
<div class="ttc" id="wfc_8h_html_af7088007b2f62d4b1fe2c9aa70e3f6a7"><div class="ttname"><a href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a></div><div class="ttdeci">#define WFC_INVALID_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00041">khrn_misc.h:41</a></div></div>
<div class="ttc" id="containers__types_8h_html_a06896e8c53f721507066c079052171f8"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a></div><div class="ttdeci">unsigned long uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00073">containers_types.h:73</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_a9a0ddda34b2df016e7912857c2909eda"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#a9a0ddda34b2df016e7912857c2909eda">wfc_stream_get_next</a></div><div class="ttdeci">WFCNativeStreamType wfc_stream_get_next(void)</div><div class="ttdoc">In cases where the caller doesn&amp;#39;t want to assign a stream number, provide one for it...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00148">wfc_client_stream.c:148</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8a0ca6e99c27ba605c50ae59084a302468"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8a0ca6e99c27ba605c50ae59084a302468">VCOS_EEXIST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00083">vcos_types.h:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a27ce5930cf6d0bf5f766f9e275ac8a33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27ce5930cf6d0bf5f766f9e275ac8a33">&#9670;&nbsp;</a></span>wfc_stream_create_for_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> wfc_stream_create_for_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a stream for an off-screen context to output to, with the default number of buffers. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00391">391</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00398">wfc_stream_create_for_context_nbufs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#acf610e8f24538a265c4f508ccd2b741e">wfc_stream_create_for_context_nbufs</a>(stream, <a class="code" href="../../dc/dd2/glext_8h.html#a9a82cf3caff84cabc4598e2619faac17">width</a>, <a class="code" href="../../d1/d3f/eglext__brcm_8h.html#aa352f2804b9902ac30769c00dde75d5f">height</a>, 0);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div><div class="ttc" id="wfc__client__stream_8c_html_acf610e8f24538a265c4f508ccd2b741e"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#acf610e8f24538a265c4f508ccd2b741e">wfc_stream_create_for_context_nbufs</a></div><div class="ttdeci">uint32_t wfc_stream_create_for_context_nbufs(WFCNativeStreamType stream, uint32_t width, uint32_t height, uint32_t nbufs)</div><div class="ttdoc">Create a stream for an off-screen context to output to, with a specific number of buffers...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00398">wfc_client_stream.c:398</a></div></div>
<div class="ttc" id="eglext__brcm_8h_html_aa352f2804b9902ac30769c00dde75d5f"><div class="ttname"><a href="../../d1/d3f/eglext__brcm_8h.html#aa352f2804b9902ac30769c00dde75d5f">height</a></div><div class="ttdeci">EGLint height</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3f/eglext__brcm_8h_source.html#l00091">eglext_brcm.h:91</a></div></div>
<div class="ttc" id="glext_8h_html_a9a82cf3caff84cabc4598e2619faac17"><div class="ttname"><a href="../../dc/dd2/glext_8h.html#a9a82cf3caff84cabc4598e2619faac17">width</a></div><div class="ttdeci">GLshort GLshort GLshort width</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd2/glext_8h_source.html#l00567">glext.h:567</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf610e8f24538a265c4f508ccd2b741e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf610e8f24538a265c4f508ccd2b741e">&#9670;&nbsp;</a></span>wfc_stream_create_for_context_nbufs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> wfc_stream_create_for_context_nbufs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>nbufs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a stream for an off-screen context to output to, with a specific number of buffers. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00398">398</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d73/egl__client__get__proc_8c.html#aabc5314eba790d654e1d1873091c5890">vcos_verify</a>, and <a class="el" href="../../d5/d5f/khrn__misc_8h_source.html#l00041">WFC_INVALID_HANDLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00391">wfc_stream_create_for_context()</a>.</p>
<div class="fragment"><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;{</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keywordtype">bool</span> stream_created = <span class="keyword">false</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#aabc5314eba790d654e1d1873091c5890">vcos_verify</a>(stream != <a class="code" href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a>))</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      {<span class="keywordflow">return</span> 1;}</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   stream_ptr = wfc_stream_find_stream_ptr(stream);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordflow">if</span> (stream_ptr)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="code" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a> = stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#af02a2613ecef71cc0131fcb07158e129">info</a>.<a class="code" href="../../d2/d49/structWFC__STREAM__INFO__T.html#a9ba27ccba5b0cd1010294d2ec0a71933">flags</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="comment">// Stream already exists, check flags match expected</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a>(stream_ptr);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">if</span> (flags != <a class="code" href="../../df/d61/wfc__client__stream_8h.html#af435f87668002f9486ce1d59a98a8cd8">WFC_STREAM_FLAGS_NONE</a>)</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;         vcos_log_error(<span class="stringliteral">&quot;%s: stream flags mismatch (expected 0x%x, got 0x%x)&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, <a class="code" href="../../df/d61/wfc__client__stream_8h.html#af435f87668002f9486ce1d59a98a8cd8">WFC_STREAM_FLAGS_NONE</a>, flags);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="comment">// Create stream</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d62/wfc__client__stream_8c.html#a80dfd842d8f0f70e42787b900f82f2e5">wfc_stream_create</a>(stream, <a class="code" href="../../df/d61/wfc__client__stream_8h.html#af435f87668002f9486ce1d59a98a8cd8">WFC_STREAM_FLAGS_NONE</a>) != 0)</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      stream_created = <span class="keyword">true</span>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="comment">// Allocate buffers on the server.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#ae9f00b42e47ca3345b0b16bbec3ccb64">wfc_server_stream_allocate_images</a>(stream, <a class="code" href="../../dc/dd2/glext_8h.html#a9a82cf3caff84cabc4598e2619faac17">width</a>, <a class="code" href="../../d1/d3f/eglext__brcm_8h.html#aa352f2804b9902ac30769c00dde75d5f">height</a>, nbufs))</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="comment">// Failed to allocate buffers</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      vcos_log_warn(<span class="stringliteral">&quot;%s: failed to allocate %u buffers for stream %X size %ux%u&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, nbufs, stream, <a class="code" href="../../dc/dd2/glext_8h.html#a9a82cf3caff84cabc4598e2619faac17">width</a>, <a class="code" href="../../d1/d3f/eglext__brcm_8h.html#aa352f2804b9902ac30769c00dde75d5f">height</a>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">if</span> (stream_created)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;         <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#a81542b5339b577cd1570c91d6a2a5087">wfc_stream_destroy</a>(stream);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div><div class="ttc" id="wfc__client__server__api_8c_html_ae9f00b42e47ca3345b0b16bbec3ccb64"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#ae9f00b42e47ca3345b0b16bbec3ccb64">wfc_server_stream_allocate_images</a></div><div class="ttdeci">bool wfc_server_stream_allocate_images(WFCNativeStreamType stream, uint32_t width, uint32_t height, uint32_t nbufs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00435">wfc_client_server_api.c:435</a></div></div>
<div class="ttc" id="structWFC__STREAM__INFO__T_html_a9ba27ccba5b0cd1010294d2ec0a71933"><div class="ttname"><a href="../../d2/d49/structWFC__STREAM__INFO__T.html#a9ba27ccba5b0cd1010294d2ec0a71933">WFC_STREAM_INFO_T::flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8c/wfc__server__api_8h_source.html#l00054">wfc_server_api.h:54</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="eglext_8h_html_a0f1b4b29f7a4e4106eec81bb30f16a01"><div class="ttname"><a href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a></div><div class="ttdeci">EGLSyncKHR EGLint flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/eglext_8h_source.html#l00188">eglext.h:188</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_a80dfd842d8f0f70e42787b900f82f2e5"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#a80dfd842d8f0f70e42787b900f82f2e5">wfc_stream_create</a></div><div class="ttdeci">uint32_t wfc_stream_create(WFCNativeStreamType stream, uint32_t flags)</div><div class="ttdoc">Create a stream, using the given stream handle (typically assigned by the window manager). Return zero if OK. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00164">wfc_client_stream.c:164</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_acd28ae372e040d3f461f38324bea1976"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a></div><div class="ttdeci">#define STREAM_UNLOCK(stream_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00067">wfc_client_stream.c:67</a></div></div>
<div class="ttc" id="wfc_8h_html_af7088007b2f62d4b1fe2c9aa70e3f6a7"><div class="ttname"><a href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a></div><div class="ttdeci">#define WFC_INVALID_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00041">khrn_misc.h:41</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_af02a2613ecef71cc0131fcb07158e129"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#af02a2613ecef71cc0131fcb07158e129">WFC_STREAM_tag::info</a></div><div class="ttdeci">WFC_STREAM_INFO_T info</div><div class="ttdoc">Configuration info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00094">wfc_client_stream.c:94</a></div></div>
<div class="ttc" id="containers__types_8h_html_a06896e8c53f721507066c079052171f8"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a></div><div class="ttdeci">unsigned long uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00073">containers_types.h:73</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_aabc5314eba790d654e1d1873091c5890"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#aabc5314eba790d654e1d1873091c5890">vcos_verify</a></div><div class="ttdeci">#define vcos_verify(cond)</div></div>
<div class="ttc" id="eglext__brcm_8h_html_aa352f2804b9902ac30769c00dde75d5f"><div class="ttname"><a href="../../d1/d3f/eglext__brcm_8h.html#aa352f2804b9902ac30769c00dde75d5f">height</a></div><div class="ttdeci">EGLint height</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3f/eglext__brcm_8h_source.html#l00091">eglext_brcm.h:91</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_a81542b5339b577cd1570c91d6a2a5087"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#a81542b5339b577cd1570c91d6a2a5087">wfc_stream_destroy</a></div><div class="ttdeci">void wfc_stream_destroy(WFCNativeStreamType stream)</div><div class="ttdoc">Destroy a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00351">wfc_client_stream.c:351</a></div></div>
<div class="ttc" id="glext_8h_html_a9a82cf3caff84cabc4598e2619faac17"><div class="ttname"><a href="../../dc/dd2/glext_8h.html#a9a82cf3caff84cabc4598e2619faac17">width</a></div><div class="ttdeci">GLshort GLshort GLshort width</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd2/glext_8h_source.html#l00567">glext.h:567</a></div></div>
<div class="ttc" id="wfc__client__stream_8h_html_af435f87668002f9486ce1d59a98a8cd8"><div class="ttname"><a href="../../df/d61/wfc__client__stream_8h.html#af435f87668002f9486ce1d59a98a8cd8">WFC_STREAM_FLAGS_NONE</a></div><div class="ttdeci">#define WFC_STREAM_FLAGS_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d61/wfc__client__stream_8h_source.html#l00041">wfc_client_stream.h:41</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9aba47bf0a63cf24a6dadd31a5d2e160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aba47bf0a63cf24a6dadd31a5d2e160">&#9670;&nbsp;</a></span>wfc_stream_create_req_rect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> wfc_stream_create_req_rect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d61/wfc__client__stream_8h.html#ae71b204939f659ab1a7840cf042cfa67">WFC_STREAM_REQ_RECT_CALLBACK_T</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> *&#160;</td>
          <td class="paramname"><em>cb_args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a stream, using the given stream handle, which will notify the calling module when the server requests a change in source and/or destination rectangle, using the supplied callback. Return zero if OK. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00244">244</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00224">wfc_stream_create_assign_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   vcos_log_info(<span class="stringliteral">&quot;wfc_stream_create_req_rect: stream %X&quot;</span>, stream);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> failure;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   failure = <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#a80dfd842d8f0f70e42787b900f82f2e5">wfc_stream_create</a>(stream, <a class="code" href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a> | <a class="code" href="../../df/d61/wfc__client__stream_8h.html#a2a504aea63fff9e57f6b3430ede1fabe">WFC_STREAM_FLAGS_REQ_RECT</a>);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <span class="keywordflow">if</span> (failure)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">return</span> failure;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr = wfc_stream_find_stream_ptr(stream);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="comment">// Stream just created, so ought to be found</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a2413d74a65e1859d1fbc9bc098053f50">vcos_assert</a>(stream_ptr);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   <span class="comment">// There&#39;s no point creating this type of stream if you don&#39;t supply a callback</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <span class="comment">// to update the src/dest rects via WF-C.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a2413d74a65e1859d1fbc9bc098053f50">vcos_assert</a>(callback != <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#aef3e53e188128e5cf31ded2fdfc266a8">req_rect_callback</a> = callback;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#af05e5387e13bf3b54705e40b7380c6e8">req_rect_cb_args</a> = cb_args;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="comment">// Create thread for handling server-side request to change source</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="comment">// and/or destination rectangles. One per stream (if enabled).</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8">VCOS_STATUS_T</a> <a class="code" href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a> = <a class="code" href="../../dd/d29/vcos__pthreads_8c.html#a913549abb71a2d5d44c4da7665d6a423">vcos_thread_create</a>(&amp;stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#a499ee86c8dbe7421572de2b377bbde16">rect_req_thread_data</a>, <span class="stringliteral">&quot;wfc_stream_rect_req_thread&quot;</span>,</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, wfc_stream_rect_req_thread, (<span class="keywordtype">void</span> *) stream);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a7452aaf38a800ca29241240ac18f537e">vcos_demand</a>(status == <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a>(stream_ptr);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div><div class="ttc" id="egl__client__get__proc_8c_html_a2413d74a65e1859d1fbc9bc098053f50"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a2413d74a65e1859d1fbc9bc098053f50">vcos_assert</a></div><div class="ttdeci">#define vcos_assert(cond)</div></div>
<div class="ttc" id="mmal__util_8c_html_affbc5e7be0de233c0edafa72d894118c"><div class="ttname"><a href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a></div><div class="ttdeci">MMAL_STATUS_T status</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddd/mmal__util_8c_source.html#l00037">mmal_util.c:37</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8">VCOS_STATUS_T</a></div><div class="ttdeci">VCOS_STATUS_T</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00073">vcos_types.h:73</a></div></div>
<div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_a499ee86c8dbe7421572de2b377bbde16"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#a499ee86c8dbe7421572de2b377bbde16">WFC_STREAM_tag::rect_req_thread_data</a></div><div class="ttdeci">VCOS_THREAD_T rect_req_thread_data</div><div class="ttdoc">Thread for handling server-side request to change source and/or destination rectangles. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00103">wfc_client_stream.c:103</a></div></div>
<div class="ttc" id="wfc__client__stream_8h_html_a2a504aea63fff9e57f6b3430ede1fabe"><div class="ttname"><a href="../../df/d61/wfc__client__stream_8h.html#a2a504aea63fff9e57f6b3430ede1fabe">WFC_STREAM_FLAGS_REQ_RECT</a></div><div class="ttdeci">#define WFC_STREAM_FLAGS_REQ_RECT</div><div class="ttdoc">Allow the server to indicate to the host that a change to the source and/or destination rectangles ha...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d61/wfc__client__stream_8h_source.html#l00059">wfc_client_stream.h:59</a></div></div>
<div class="ttc" id="eglext_8h_html_a0f1b4b29f7a4e4106eec81bb30f16a01"><div class="ttname"><a href="../../d3/dda/eglext_8h.html#a0f1b4b29f7a4e4106eec81bb30f16a01">flags</a></div><div class="ttdeci">EGLSyncKHR EGLint flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/eglext_8h_source.html#l00188">eglext.h:188</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_a80dfd842d8f0f70e42787b900f82f2e5"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#a80dfd842d8f0f70e42787b900f82f2e5">wfc_stream_create</a></div><div class="ttdeci">uint32_t wfc_stream_create(WFCNativeStreamType stream, uint32_t flags)</div><div class="ttdoc">Create a stream, using the given stream handle (typically assigned by the window manager). Return zero if OK. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00164">wfc_client_stream.c:164</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_acd28ae372e040d3f461f38324bea1976"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a></div><div class="ttdeci">#define STREAM_UNLOCK(stream_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00067">wfc_client_stream.c:67</a></div></div>
<div class="ttc" id="containers__types_8h_html_a06896e8c53f721507066c079052171f8"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a></div><div class="ttdeci">unsigned long uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00073">containers_types.h:73</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00075">vcos_types.h:75</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a7452aaf38a800ca29241240ac18f537e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a7452aaf38a800ca29241240ac18f537e">vcos_demand</a></div><div class="ttdeci">#define vcos_demand(cond)</div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_af05e5387e13bf3b54705e40b7380c6e8"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#af05e5387e13bf3b54705e40b7380c6e8">WFC_STREAM_tag::req_rect_cb_args</a></div><div class="ttdeci">void * req_rect_cb_args</div><div class="ttdoc">Argument to callback function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00109">wfc_client_stream.c:109</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_aef3e53e188128e5cf31ded2fdfc266a8"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#aef3e53e188128e5cf31ded2fdfc266a8">WFC_STREAM_tag::req_rect_callback</a></div><div class="ttdeci">WFC_STREAM_REQ_RECT_CALLBACK_T req_rect_callback</div><div class="ttdoc">Callback function notifying calling module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00107">wfc_client_stream.c:107</a></div></div>
<div class="ttc" id="vcos__pthreads_8c_html_a913549abb71a2d5d44c4da7665d6a423"><div class="ttname"><a href="../../dd/d29/vcos__pthreads_8c.html#a913549abb71a2d5d44c4da7665d6a423">vcos_thread_create</a></div><div class="ttdeci">VCOS_STATUS_T vcos_thread_create(VCOS_THREAD_T *thread, const char *name, VCOS_THREAD_ATTR_T *attrs, VCOS_THREAD_ENTRY_FN_T entry, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d29/vcos__pthreads_8c_source.html#l00165">vcos_pthreads.c:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81542b5339b577cd1570c91d6a2a5087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81542b5339b577cd1570c91d6a2a5087">&#9670;&nbsp;</a></span>wfc_stream_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00351">351</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>.</p>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;{</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   vcos_log_info(<span class="stringliteral">&quot;%s: stream: %X&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr = wfc_stream_find_stream_ptr(stream);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">if</span> (stream_ptr)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="comment">/* If stream is still in use (e.g. it&#39;s attached to at least one source/mask</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">       * which is associated with at least one element) then destruction is delayed</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">       * until it&#39;s no longer in use. */</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keywordflow">if</span> (stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">registrations</a>&gt; 0)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;         stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">registrations</a>--;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;         vcos_log_trace(<span class="stringliteral">&quot;%s: stream: %X ready to destroy?&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;         vcos_log_error(<span class="stringliteral">&quot;%s: stream: %X destroyed when unregistered&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">// Stream is unlocked by destroy_if_ready</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      wfc_stream_destroy_if_ready(stream_ptr);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      vcos_log_warn(<span class="stringliteral">&quot;%s: stream %X doesn&#39;t exist&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div><div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_aa0053aac55127a6aedaf1ec1c315b61b"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">WFC_STREAM_tag::registrations</a></div><div class="ttdeci">uint32_t registrations</div><div class="ttdoc">Number of times this stream has been registered in the process. Creation implies registration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00085">wfc_client_stream.c:85</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a0ddda34b2df016e7912857c2909eda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a0ddda34b2df016e7912857c2909eda">&#9670;&nbsp;</a></span>wfc_stream_get_next()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> wfc_stream_get_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>In cases where the caller doesn't want to assign a stream number, provide one for it. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00148">148</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00060">GLOBAL_LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00224">wfc_stream_create_assign_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#aa0289389960d884a11482d94810cd191">GLOBAL_LOCK</a>();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <a class="code" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a> next_stream = wfc_stream_next_handle;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   wfc_stream_next_handle++;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#a6d2dc4f00d0c5cf1028a7c33d177a31b">GLOBAL_UNLOCK</a>();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keywordflow">return</span> next_stream;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="ttc" id="wfcplatform_8h_html_a93e059a3a756af667b37e688d0b66366"><div class="ttname"><a href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a></div><div class="ttdeci">WFCHandle WFCNativeStreamType</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4e/wfcplatform_8h_source.html#l00065">wfcplatform.h:65</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_a6d2dc4f00d0c5cf1028a7c33d177a31b"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#a6d2dc4f00d0c5cf1028a7c33d177a31b">GLOBAL_UNLOCK</a></div><div class="ttdeci">#define GLOBAL_UNLOCK()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00061">wfc_client_stream.c:61</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_aa0289389960d884a11482d94810cd191"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#aa0289389960d884a11482d94810cd191">GLOBAL_LOCK</a></div><div class="ttdeci">#define GLOBAL_LOCK()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00060">wfc_client_stream.c:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed4164be3dbfb6f9b15bd4231b7b358f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed4164be3dbfb6f9b15bd4231b7b358f">&#9670;&nbsp;</a></span>wfc_stream_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00983">983</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00094">WFC_STREAM_tag::info</a>, <a class="el" href="../../db/d8c/wfc__server__api_8h_source.html#l00053">WFC_STREAM_INFO_T::size</a>, <a class="el" href="../../df/ddd/mmal__util_8c_source.html#l00037">status</a>, <a class="el" href="../../de/d30/vcos__thread_8h.html#a4a7a1b694dcb3cdf222cdda8f9ee7439">vcos_process_id_current()</a>, <a class="el" href="../../da/df3/vcos__types_8h_source.html#l00075">VCOS_SUCCESS</a>, <a class="el" href="../../d2/da1/wfc__client__server__api_8c_source.html#l00085">wfc_server_connect()</a>, and <a class="el" href="../../d2/da1/wfc__client__server__api_8c_source.html#l00605">wfc_server_stream_get_info()</a>.</p>
<div class="fragment"><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                                     {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> pid = <a class="code" href="../../de/d30/vcos__thread_8h.html#a4a7a1b694dcb3cdf222cdda8f9ee7439">vcos_process_id_current</a>();</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> pid_lo = (<a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>)pid;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> pid_hi = (<a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>)(pid &gt;&gt; 32);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#a25e124dddb22b74e6d45ffc1f4737e20">wfc_server_connect</a>() == <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a>)</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <a class="code" href="../../d2/d49/structWFC__STREAM__INFO__T.html">WFC_STREAM_INFO_T</a> info;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> <a class="code" href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      info.<a class="code" href="../../d2/d49/structWFC__STREAM__INFO__T.html#a212283e4f9cffed6f78271461cdedc61">size</a> = <span class="keyword">sizeof</span>(info);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      status = <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#ab975d51e4e13bfd0dfc5f9cbb26902ae">wfc_server_stream_get_info</a>(stream, &amp;info);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordflow">if</span> (status == <a class="code" href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a>)</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;         <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr = wfc_stream_create_stream_ptr(stream, <span class="keyword">true</span>);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;         <span class="keywordflow">if</span> (stream_ptr)</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;         {</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">registrations</a>++;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            memcpy(&amp;stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#af02a2613ecef71cc0131fcb07158e129">info</a>, &amp;info, info.<a class="code" href="../../d2/d49/structWFC__STREAM__INFO__T.html#a212283e4f9cffed6f78271461cdedc61">size</a>);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a>(stream_ptr);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;         }</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;         <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#aa50089e561f74d7d133d4557f72431f0">wfc_server_stream_register</a>(stream, pid_lo, pid_hi);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;         vcos_log_error(<span class="stringliteral">&quot;%s: get stream info failed: %u&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, status);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   }</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;}</div><div class="ttc" id="mmal__util_8c_html_affbc5e7be0de233c0edafa72d894118c"><div class="ttname"><a href="../../df/ddd/mmal__util_8c.html#affbc5e7be0de233c0edafa72d894118c">status</a></div><div class="ttdeci">MMAL_STATUS_T status</div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddd/mmal__util_8c_source.html#l00037">mmal_util.c:37</a></div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_a25e124dddb22b74e6d45ffc1f4737e20"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#a25e124dddb22b74e6d45ffc1f4737e20">wfc_server_connect</a></div><div class="ttdeci">VCOS_STATUS_T wfc_server_connect(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00085">wfc_client_server_api.c:85</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_acd28ae372e040d3f461f38324bea1976"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a></div><div class="ttdeci">#define STREAM_UNLOCK(stream_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00067">wfc_client_stream.c:67</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_af02a2613ecef71cc0131fcb07158e129"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#af02a2613ecef71cc0131fcb07158e129">WFC_STREAM_tag::info</a></div><div class="ttdeci">WFC_STREAM_INFO_T info</div><div class="ttdoc">Configuration info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00094">wfc_client_stream.c:94</a></div></div>
<div class="ttc" id="structWFC__STREAM__INFO__T_html_a212283e4f9cffed6f78271461cdedc61"><div class="ttname"><a href="../../d2/d49/structWFC__STREAM__INFO__T.html#a212283e4f9cffed6f78271461cdedc61">WFC_STREAM_INFO_T::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8c/wfc__server__api_8h_source.html#l00053">wfc_server_api.h:53</a></div></div>
<div class="ttc" id="containers__types_8h_html_a06896e8c53f721507066c079052171f8"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a></div><div class="ttdeci">unsigned long uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00073">containers_types.h:73</a></div></div>
<div class="ttc" id="vcos__thread_8h_html_a4a7a1b694dcb3cdf222cdda8f9ee7439"><div class="ttname"><a href="../../de/d30/vcos__thread_8h.html#a4a7a1b694dcb3cdf222cdda8f9ee7439">vcos_process_id_current</a></div><div class="ttdeci">VCOS_INLINE_DECL VCOS_UNSIGNED vcos_process_id_current(void)</div><div class="ttdoc">Return a unique identifier for the current process. </div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_ab975d51e4e13bfd0dfc5f9cbb26902ae"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#ab975d51e4e13bfd0dfc5f9cbb26902ae">wfc_server_stream_get_info</a></div><div class="ttdeci">uint32_t wfc_server_stream_get_info(WFCNativeStreamType stream, WFC_STREAM_INFO_T *info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00605">wfc_client_server_api.c:605</a></div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_aa50089e561f74d7d133d4557f72431f0"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#aa50089e561f74d7d133d4557f72431f0">wfc_server_stream_register</a></div><div class="ttdeci">void wfc_server_stream_register(WFCNativeStreamType stream, uint32_t pid_lo, uint32_t pid_hi)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00567">wfc_client_server_api.c:567</a></div></div>
<div class="ttc" id="structWFC__STREAM__INFO__T_html"><div class="ttname"><a href="../../d2/d49/structWFC__STREAM__INFO__T.html">WFC_STREAM_INFO_T</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8c/wfc__server__api_8h_source.html#l00051">wfc_server_api.h:51</a></div></div>
<div class="ttc" id="containers__types_8h_html_aaa5d1cd013383c889537491c3cfd9aad"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a></div><div class="ttdeci">unsigned long long uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00075">containers_types.h:75</a></div></div>
<div class="ttc" id="vcos__types_8h_html_a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c"><div class="ttname"><a href="../../da/df3/vcos__types_8h.html#a3bc2a2f6e35ff0159714c5e4396bc3a8aa2b21a294575d4d8cfdb7b1f6ffe474c">VCOS_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/vcos__types_8h_source.html#l00075">vcos_types.h:75</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_aa0053aac55127a6aedaf1ec1c315b61b"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">WFC_STREAM_tag::registrations</a></div><div class="ttdeci">uint32_t registrations</div><div class="ttdoc">Number of times this stream has been registered in the process. Creation implies registration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00085">wfc_client_stream.c:85</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa18d4b166f2e220d1c152cee1bb61be7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa18d4b166f2e220d1c152cee1bb61be7">&#9670;&nbsp;</a></span>wfc_stream_register_off_screen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_register_off_screen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d0a/vcos__stdbool_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&#160;</td>
          <td class="paramname"><em>used_for_off_screen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called on behalf of an off-screen context, to either set or clear the stream's flag indicating that it's being used as output for that context. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00466">466</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, and <a class="el" href="../../d5/d5f/khrn__misc_8h_source.html#l00041">WFC_INVALID_HANDLE</a>.</p>
<div class="fragment"><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;{</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="keywordflow">if</span>(stream == <a class="code" href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a>)</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      {<span class="keywordflow">return</span>;}</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;%s: stream 0x%x&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr = wfc_stream_find_stream_ptr(stream);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <span class="keywordflow">if</span> (!stream_ptr)</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#a99c25912babb49a7852b22e0223ac0e3">used_for_off_screen</a> = used_for_off_screen;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <span class="keywordflow">if</span> (used_for_off_screen)</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a>(stream_ptr);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="comment">// Stream is unlocked by destroy_if_ready</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      wfc_stream_destroy_if_ready(stream_ptr);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div><div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_acd28ae372e040d3f461f38324bea1976"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a></div><div class="ttdeci">#define STREAM_UNLOCK(stream_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00067">wfc_client_stream.c:67</a></div></div>
<div class="ttc" id="wfc_8h_html_af7088007b2f62d4b1fe2c9aa70e3f6a7"><div class="ttname"><a href="../../d1/dea/wfc_8h.html#af7088007b2f62d4b1fe2c9aa70e3f6a7">WFC_INVALID_HANDLE</a></div><div class="ttdeci">#define WFC_INVALID_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00041">khrn_misc.h:41</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_a99c25912babb49a7852b22e0223ac0e3"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#a99c25912babb49a7852b22e0223ac0e3">WFC_STREAM_tag::used_for_off_screen</a></div><div class="ttdeci">bool used_for_off_screen</div><div class="ttdoc">Record if this stream holds the output from an off-screen context. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00100">wfc_client_stream.c:100</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e3fa8fbaef1916622f697509714549d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e3fa8fbaef1916622f697509714549d">&#9670;&nbsp;</a></span>wfc_stream_register_source_or_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0a/vcos__stdbool_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> wfc_stream_register_source_or_mask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d0a/vcos__stdbool_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&#160;</td>
          <td class="paramname"><em>add_source_or_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate that a source or mask is now associated with this stream, or should now be removed from such an association. </p>
<dl class="section return"><dt>Returns</dt><dd>True if successful, false if not (invalid handle). </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00282">282</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr = wfc_stream_find_stream_ptr(stream);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <span class="keywordflow">if</span> (!stream_ptr)</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;%s: stream 0x%x %d-&gt;%d&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;         stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#abef741443243109ea76eb5ac1e1f84e2">num_of_sources_or_masks</a>,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;         add_source_or_mask ? stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#abef741443243109ea76eb5ac1e1f84e2">num_of_sources_or_masks</a> + 1 : stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#abef741443243109ea76eb5ac1e1f84e2">num_of_sources_or_masks</a> - 1);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">if</span>(add_source_or_mask)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#abef741443243109ea76eb5ac1e1f84e2">num_of_sources_or_masks</a>++;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a>(stream_ptr);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#aabc5314eba790d654e1d1873091c5890">vcos_verify</a>(stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#abef741443243109ea76eb5ac1e1f84e2">num_of_sources_or_masks</a> &gt; 0))</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;         {stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#abef741443243109ea76eb5ac1e1f84e2">num_of_sources_or_masks</a>--;}</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="comment">// Stream is unlocked by destroy_if_ready</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      wfc_stream_destroy_if_ready(stream_ptr);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_acd28ae372e040d3f461f38324bea1976"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a></div><div class="ttdeci">#define STREAM_UNLOCK(stream_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00067">wfc_client_stream.c:67</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_aabc5314eba790d654e1d1873091c5890"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#aabc5314eba790d654e1d1873091c5890">vcos_verify</a></div><div class="ttdeci">#define vcos_verify(cond)</div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_abef741443243109ea76eb5ac1e1f84e2"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#abef741443243109ea76eb5ac1e1f84e2">WFC_STREAM_tag::num_of_sources_or_masks</a></div><div class="ttdeci">uint32_t num_of_sources_or_masks</div><div class="ttdoc">Image providers to which this stream sends data; recorded so we do not destroy this stream if it is s...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00098">wfc_client_stream.c:98</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af5e67eb097d2f0ebe24fdb65e042062d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5e67eb097d2f0ebe24fdb65e042062d">&#9670;&nbsp;</a></span>wfc_stream_release_eglimage_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_release_eglimage_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/dda/eglext_8h.html#ac56f71530c81ade3ddaab91f45696909">EGLImageKHR</a>&#160;</td>
          <td class="paramname"><em>im</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a93b46d0a190edd97c145539e64dcec24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93b46d0a190edd97c145539e64dcec24">&#9670;&nbsp;</a></span>wfc_stream_signal_eglimage_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_signal_eglimage_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/dda/eglext_8h.html#ac56f71530c81ade3ddaab91f45696909">EGLImageKHR</a>&#160;</td>
          <td class="paramname"><em>im</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad2a43374c66c00f54ed03bc49eca5a7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a43374c66c00f54ed03bc49eca5a7a">&#9670;&nbsp;</a></span>wfc_stream_signal_eglimage_data_protected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_signal_eglimage_data_protected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/dda/eglext_8h.html#ac56f71530c81ade3ddaab91f45696909">EGLImageKHR</a>&#160;</td>
          <td class="paramname"><em>im</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>is_protected</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a482b39cd40cfc925ed6f5525525751c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a482b39cd40cfc925ed6f5525525751c5">&#9670;&nbsp;</a></span>wfc_stream_signal_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_signal_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/d87/structWFC__STREAM__IMAGE__T.html">WFC_STREAM_IMAGE_T</a> *&#160;</td>
          <td class="paramname"><em>image</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00977">977</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/da1/wfc__client__server__api_8c_source.html#l00534">wfc_server_stream_signal_image()</a>.</p>
<div class="fragment"><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;{</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#ad0cad4ae9d52264438da7875b80ef24a">wfc_server_stream_signal_image</a>(stream, image);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;}</div><div class="ttc" id="wfc__client__server__api_8c_html_ad0cad4ae9d52264438da7875b80ef24a"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#ad0cad4ae9d52264438da7875b80ef24a">wfc_server_stream_signal_image</a></div><div class="ttdeci">void wfc_server_stream_signal_image(WFCNativeStreamType stream, const WFC_STREAM_IMAGE_T *image)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00534">wfc_client_server_api.c:534</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04c149c2fcb465279127e2e376a578c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04c149c2fcb465279127e2e376a578c4">&#9670;&nbsp;</a></span>wfc_stream_signal_mm_image_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_signal_mm_image_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>im</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00966">966</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/da1/wfc__client__server__api_8c_source.html#l00491">wfc_server_stream_signal_mm_image_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#a241d719c7612fe932379aa4ea40b03fc">wfc_server_stream_signal_mm_image_data</a>(stream, im);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;}</div><div class="ttc" id="wfc__client__server__api_8c_html_a241d719c7612fe932379aa4ea40b03fc"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#a241d719c7612fe932379aa4ea40b03fc">wfc_server_stream_signal_mm_image_data</a></div><div class="ttdeci">void wfc_server_stream_signal_mm_image_data(WFCNativeStreamType stream, uint32_t image_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00491">wfc_client_server_api.c:491</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33c89bdfca725712a71b8293f85e6504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33c89bdfca725712a71b8293f85e6504">&#9670;&nbsp;</a></span>wfc_stream_signal_raw_pixels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_signal_raw_pixels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td>
          <td class="paramname"><em>vpitch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00971">971</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/da1/wfc__client__server__api_8c_source.html#l00509">wfc_server_stream_signal_raw_pixels()</a>.</p>
<div class="fragment"><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;{</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#a2c9a987b413ef5f25cc324d2a9433863">wfc_server_stream_signal_raw_pixels</a>(stream, handle, <a class="code" href="../../dc/dd2/glext_8h.html#a71a65ffd977afe9c3fef116a5bc9ee27">format</a>, w, h, pitch, vpitch);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;}</div><div class="ttc" id="glext_8h_html_a71a65ffd977afe9c3fef116a5bc9ee27"><div class="ttname"><a href="../../dc/dd2/glext_8h.html#a71a65ffd977afe9c3fef116a5bc9ee27">format</a></div><div class="ttdeci">GLint GLint GLint GLint GLsizei GLsizei GLsizei GLenum format</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd2/glext_8h_source.html#l01095">glext.h:1095</a></div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_a2c9a987b413ef5f25cc324d2a9433863"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#a2c9a987b413ef5f25cc324d2a9433863">wfc_server_stream_signal_raw_pixels</a></div><div class="ttdeci">void wfc_server_stream_signal_raw_pixels(WFCNativeStreamType stream, uint32_t handle, uint32_t format, uint32_t width, uint32_t height, uint32_t pitch, uint32_t vpitch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00509">wfc_client_server_api.c:509</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af401f62ca22b7b2cba5b86a855bdad03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af401f62ca22b7b2cba5b86a855bdad03">&#9670;&nbsp;</a></span>wfc_stream_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/vgext_8h.html#aae3b83af3dea1ca0b0785dbe3499954a">void</a> wfc_stream_unregister </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l01016">1016</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d30/vcos__thread_8h.html#a4a7a1b694dcb3cdf222cdda8f9ee7439">vcos_process_id_current()</a>.</p>
<div class="fragment"><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                                                       {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> pid = <a class="code" href="../../de/d30/vcos__thread_8h.html#a4a7a1b694dcb3cdf222cdda8f9ee7439">vcos_process_id_current</a>();</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> pid_lo = (<a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>)pid;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> pid_hi = (<a class="code" href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>)(pid &gt;&gt; 32);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr = wfc_stream_find_stream_ptr(stream);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#aabc5314eba790d654e1d1873091c5890">vcos_verify</a>(stream_ptr != <a class="code" href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#aa40079ccd4d5ba337a40f99482494759">wfc_server_stream_unregister</a>(stream, pid_lo, pid_hi);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordflow">if</span> (stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">registrations</a> &gt; 0)</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;         stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">registrations</a>--;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;         vcos_log_trace(<span class="stringliteral">&quot;%s: stream %X&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;         vcos_log_error(<span class="stringliteral">&quot;%s: stream %X already fully unregistered&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      wfc_stream_destroy_if_ready(stream_ptr);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   <a class="code" href="../../d2/da1/wfc__client__server__api_8c.html#adfa3d7d330fa3cd30a2bc77347b01a67">wfc_server_disconnect</a>();</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;}</div><div class="ttc" id="khrn__int__common_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../da/d05/khrn__int__common_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/khrn__misc_8h_source.html#l00133">khrn_misc.h:133</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_adfa3d7d330fa3cd30a2bc77347b01a67"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#adfa3d7d330fa3cd30a2bc77347b01a67">wfc_server_disconnect</a></div><div class="ttdeci">void wfc_server_disconnect(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00106">wfc_client_server_api.c:106</a></div></div>
<div class="ttc" id="containers__types_8h_html_a06896e8c53f721507066c079052171f8"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a></div><div class="ttdeci">unsigned long uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00073">containers_types.h:73</a></div></div>
<div class="ttc" id="vcos__thread_8h_html_a4a7a1b694dcb3cdf222cdda8f9ee7439"><div class="ttname"><a href="../../de/d30/vcos__thread_8h.html#a4a7a1b694dcb3cdf222cdda8f9ee7439">vcos_process_id_current</a></div><div class="ttdeci">VCOS_INLINE_DECL VCOS_UNSIGNED vcos_process_id_current(void)</div><div class="ttdoc">Return a unique identifier for the current process. </div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_aabc5314eba790d654e1d1873091c5890"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#aabc5314eba790d654e1d1873091c5890">vcos_verify</a></div><div class="ttdeci">#define vcos_verify(cond)</div></div>
<div class="ttc" id="containers__types_8h_html_aaa5d1cd013383c889537491c3cfd9aad"><div class="ttname"><a href="../../d0/d5f/containers__types_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a></div><div class="ttdeci">unsigned long long uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5f/containers__types_8h_source.html#l00075">containers_types.h:75</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_aa0053aac55127a6aedaf1ec1c315b61b"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#aa0053aac55127a6aedaf1ec1c315b61b">WFC_STREAM_tag::registrations</a></div><div class="ttdeci">uint32_t registrations</div><div class="ttdoc">Number of times this stream has been registered in the process. Creation implies registration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00085">wfc_client_stream.c:85</a></div></div>
<div class="ttc" id="wfc__client__server__api_8c_html_aa40079ccd4d5ba337a40f99482494759"><div class="ttname"><a href="../../d2/da1/wfc__client__server__api_8c.html#aa40079ccd4d5ba337a40f99482494759">wfc_server_stream_unregister</a></div><div class="ttdeci">void wfc_server_stream_unregister(WFCNativeStreamType stream, uint32_t pid_lo, uint32_t pid_hi)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/wfc__client__server__api_8c_source.html#l00586">wfc_client_server_api.c:586</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ec06ef4ba897c3e5a8d412b4d48e9d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ec06ef4ba897c3e5a8d412b4d48e9d0">&#9670;&nbsp;</a></span>wfc_stream_used_for_off_screen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0a/vcos__stdbool_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> wfc_stream_used_for_off_screen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d4e/wfcplatform_8h.html#a93e059a3a756af667b37e688d0b66366">WFCNativeStreamType</a>&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if this stream exists, and is in use as the output of an off-screen context. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00444">444</a> of file <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html">wfc_client_stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d62/wfc__client__stream_8c_source.html#l00100">WFC_STREAM_tag::used_for_off_screen</a>, and <a class="el" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>.</p>
<div class="fragment"><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;{</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <span class="keywordtype">bool</span> used_for_off_screen;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   vcos_log_trace(<span class="stringliteral">&quot;%s: stream 0x%x&quot;</span>, <a class="code" href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a>, stream);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <a class="code" href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_T</a> *stream_ptr = wfc_stream_find_stream_ptr(stream);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keywordflow">if</span> (!stream_ptr)</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   used_for_off_screen = stream_ptr-&gt;<a class="code" href="../../d8/d01/structWFC__STREAM__tag.html#a99c25912babb49a7852b22e0223ac0e3">used_for_off_screen</a>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <a class="code" href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a>(stream_ptr);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   <span class="keywordflow">return</span> used_for_off_screen;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div><div class="ttc" id="structWFC__STREAM__tag_html"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html">WFC_STREAM_tag</a></div><div class="ttdoc">Top-level stream type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00079">wfc_client_stream.c:79</a></div></div>
<div class="ttc" id="wfc__client__stream_8c_html_acd28ae372e040d3f461f38324bea1976"><div class="ttname"><a href="../../d4/d62/wfc__client__stream_8c.html#acd28ae372e040d3f461f38324bea1976">STREAM_UNLOCK</a></div><div class="ttdeci">#define STREAM_UNLOCK(stream_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00067">wfc_client_stream.c:67</a></div></div>
<div class="ttc" id="structWFC__STREAM__tag_html_a99c25912babb49a7852b22e0223ac0e3"><div class="ttname"><a href="../../d8/d01/structWFC__STREAM__tag.html#a99c25912babb49a7852b22e0223ac0e3">WFC_STREAM_tag::used_for_off_screen</a></div><div class="ttdeci">bool used_for_off_screen</div><div class="ttdoc">Record if this stream holds the output from an off-screen context. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d62/wfc__client__stream_8c_source.html#l00100">wfc_client_stream.c:100</a></div></div>
<div class="ttc" id="egl__client__get__proc_8c_html_a8ff968457bec9989c7904f661e7a817e"><div class="ttname"><a href="../../d2/d73/egl__client__get__proc_8c.html#a8ff968457bec9989c7904f661e7a817e">VCOS_FUNCTION</a></div><div class="ttdeci">#define VCOS_FUNCTION</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
